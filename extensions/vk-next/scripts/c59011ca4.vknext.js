"use strict";(globalThis.webpackChunkvknext=globalThis.webpackChunkvknext||[]).push([[959],{7708:(e,t,n)=>{n.d(t,{A:()=>c});var s=n(74848),o=n(11157),r=n(39107),a=n(13742),l=n(68741),i=n(91691);const u="zRIhm_rzeRaOj2Bs",_="m8aAYX3glAEj5Q3G",c=({beforeClassname:e,backPage:t,hideButtonIsFirstPage:n,hideBackButtonInTablet:c,children:h,...d})=>{const g=(0,o.XC)(),p=(0,o.Gz)(),{width:x}=(0,a.A)();let f=n&&g&&(0,i.A)();return c&&(x||800)>768&&(f=!0),(0,s.jsx)(r.aOn,{before:!f&&(0,s.jsx)(r.Hy0,{onClick:async()=>{g?t?await p.replace(t):await p.push(l.JZ.root.main.home):await p.back()},className:(0,r.xWm)(u,e),hideLabelOnIOS:!0}),...d,children:(0,s.jsx)("div",{className:_,children:h})})}},10343:(e,t,n)=>{n.a(e,async(e,s)=>{try{n.d(t,{A:()=>h});var o=n(74848),r=n(39107),a=n(8015),l=n(33258),i=n(87137),u=n(387),_=n(96540),c=e([a]);a=(c.then?(await c)():c)[0];const h=({event:e})=>{const t=(0,a.A)(),{title:n,photo_100:s,type:c,sex:h,time:d}=e;let g=(0,_.useMemo)(()=>({chat_typing:t.use("global_spy_event_typing"),chat_upload_voice:t.use("global_spy_event_voice"),chat_upload_photo:t.use("global_spy_event_photo"),chat_upload_video:t.use("global_spy_event_video"),chat_upload_file:t.use("global_spy_event_file"),chat_upload_video_message:t.use("global_spy_event_video_message"),friend_offline:t.use("global_spy_event_offline"),friend_online:t.use("global_spy_event_online"),message_read:t.use("global_spy_event_read_messages"),friend_remove:t.use("global_spy_remove_friend")}[c]),[t]);["chat_typing"].includes(c)&&Array.isArray(g)&&(g=g[0]);return(0,o.jsx)(r.z85,{disabled:!0,before:(0,o.jsx)(l.A,{size:36,src:s}),extraSubtitle:Array.isArray(g)?g[h||0]:g,afterCaption:(e=>{const n=new Date(1e3*e),s=(new Date).getFullYear(),o=(0,u.A)()-e<=86400,r=[t.use("global_month1_of"),t.use("global_month2_of"),t.use("global_month3_of"),t.use("global_month4_of"),t.use("global_month5_of"),t.use("global_month6_of"),t.use("global_month7_of"),t.use("global_month8_of"),t.use("global_month9_of"),t.use("global_month10_of"),t.use("global_month11_of"),t.use("global_month12_of")],a=(0,i.A)(n.getHours()),l=(0,i.A)(n.getMinutes()),_=(0,i.A)(n.getSeconds()),c=n.getDate(),h=n.getMonth(),d=n.getFullYear(),g=d!==s?` ${d}`:"";return o?`${a}:${l}:${_}`:`${c} ${r[h].toLowerCase()}${g} ${a}:${l}:${_}`})(d),children:n})};s()}catch(e){s(e)}})},15247:(e,t,n)=>{n.d(t,{H:()=>s});const s="\nvar users = Args.users.split(',');\nvar i = 0;\nvar items = [];\nvar ids = [];\nvar result;\nvar x;\n\nwhile (true) {\n  if (i == 25) {\n    return { items: items, ids: ids };\n  }\n  \n  x = users.slice(i * 100, (i + 1) * 100);\n  \n  if (!x.length || !users.length) {\n    return { items: items, ids: ids };\n  }\n  \n  result = API.messages.getConversationsById({\n    peer_ids: x,\n    extended: 1,\n    group_id: 0,\n    fields: \"sex,photo_100\",\n  });\n  \n  if (result.items) {\n    x = 0;\n    \n    while (x < result.items.length) {\n      items.push(result.items[x].peer);\n      \n      if (result.items[x].peer.type == 'chat') {\n        ids.push([\n          result.items[x].peer.id,\n          result.items[x].chat_settings.title,\n          result.items[x].chat_settings.photo.photo_100,\n          0,\n        ]);\n      }\n      \n      x = x + 1;\n    }\n  }\n  \n  if (result.profiles) {\n    x = 0;\n    \n    while (x < result.profiles.length) {\n      ids.push([\n        result.profiles[x].id,\n        result.profiles[x].first_name + ' ' + result.profiles[x].last_name,\n        result.profiles[x].photo_100,\n        result.profiles[x].sex,\n      ]);\n      \n      x = x + 1;\n    }\n  }\n  \n  if (result.groups) {\n    x = 0;\n    \n    while (x < result.groups.length) {\n      ids.push([\n        -result.groups[x].id,\n        result.groups[x].name,\n        result.groups[x].photo_100,\n        0\n      ]);\n      \n      x = x + 1;\n    }\n  }\n  \n  i = i + 1;\n}\n"},60313:(e,t,n)=>{n.a(e,async(e,s)=>{try{n.d(t,{A:()=>c});var o=n(74848),r=n(3178),a=n(39107),l=n(8015),i=n(90275),u=n(68275),_=e([l]);l=(_.then?(await _)():_)[0];const c=()=>{const e=(0,l.A)(),[t,n]=(0,u.L)();return t?.length?(0,o.jsx)(i.Ku,{trigger:"hover",actions:(0,o.jsx)(i.vH,{onClick:n,children:e.use("settings_spy_clear_events")}),placement:"bottom-end",children:(0,o.jsx)(a.qAe,{"aria-label":"",children:(0,o.jsx)(r.o,{})})}):null};s()}catch(e){s(e)}})},68275:(e,t,n)=>{n.d(t,{A:()=>c,L:()=>_});var s=n(74848),o=n(96540),r=n(74225),a=n.n(r),l=n(57087),i=n(15247);const u=(0,o.createContext)([null,async()=>{}]),_=()=>(0,o.useContext)(u),c=({children:e})=>{const[t,r]=(0,o.useState)(null),{viewer:_}=(0,l.ur)();a()(async e=>{if(!_?.id)return;const t=(await n.e(4639).then(n.bind(n,74639))).default,{events:s}=await t.getData(_.id);if(!e())return;const o=new Set,a=Object.keys(s),l=Object.values(s).flat();for(const e of a)o.add(Number(e));for(const e of l)o.add(Number(e.userId));const{vkapiWrapper:u}=await Promise.resolve().then(n.bind(n,52370)),{response:c}=await u.execute({code:i.H,users:[...o]}),h=new Map;for(const[e,t,n,s]of c.ids)h.set(e,[e,t,n,s]);const d=[];for(const e of l){const t=h.get(Number(e.userId))||[0,"","",0];d.push({...e,sex:1===t[3]?1:0,title:t[1],photo_100:t[2]})}const g=d.sort((e,t)=>t.time-e.time);e()&&r(g)},[_?.id]);return(0,s.jsx)(u.Provider,{value:[t,async()=>{if(!_?.id)return;const e=(await n.e(4639).then(n.bind(n,74639))).default;await e.clearEventList(_.id),r([])}],children:e})}},80959:(e,t,n)=>{n.a(e,async(e,s)=>{try{n.r(t),n.d(t,{default:()=>p});var o=n(74848),r=n(39107),a=n(7708),l=n(1883),i=n(8015),u=n(68741),_=n(60313),c=n(10343),h=n(68275),d=e([i,_,c]);[i,_,c]=d.then?(await d)():d;const g=()=>{const e=(0,i.A)(),[t]=(0,h.L)();return t?0===t.length?(0,o.jsx)(r.OrA,{children:e.use("global_not_found")}):(0,o.jsx)(o.Fragment,{children:t.map((e,t)=>(0,o.jsx)(c.A,{event:e},`${e.type}_${e.userId}_${t}`))}):(0,o.jsx)(r.qBl,{})},p=()=>{const e=(0,i.A)();return(0,o.jsxs)(h.A,{children:[(0,o.jsx)(a.A,{backPage:u.JZ.root.main_0_0_0.spyning,after:(0,o.jsx)(_.A,{}),children:e.use("settings_menu_spy_events_list_short_title")}),(0,o.jsx)(l.A,{children:(0,o.jsx)(g,{})})]})};s()}catch(e){s(e)}})},87137:(e,t,n)=>{n.d(t,{A:()=>s});const s=e=>((e=e.toString()).length<2?"0":"")+e}}]);