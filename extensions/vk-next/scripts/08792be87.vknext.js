"use strict";(globalThis.webpackChunkvknext=globalThis.webpackChunkvknext||[]).push([[9304],{9304:(t,e,a)=>{a.a(t,async(t,s)=>{try{a.r(e),a.d(e,{default:()=>g});var n=a(74848),i=a(39107),o=a(48591),r=a(87675),l=a(46949),d=a(31104),c=t([r]);r=(c.then?(await c)():c)[0];const g=()=>{const t=(0,r.A)(),{stats:e}=(0,l.b)();if(e?.messagesByDay?.size)return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.Y9Y,{children:t.use("vkcom_chat_stats_top_dates")}),(0,n.jsx)(i.iau,{className:o.A.chatStatsDiv,children:(0,n.jsx)(d.A,{messagesByDay:e?.messagesByDay})})]})};s()}catch(t){s(t)}})},31104:(t,e,a)=>{a.d(e,{A:()=>O});var s=a(74848),n=a(37706),i=a(96736),o=a(23252),r=a(31267),l=a(2574),d=a(45568),c=a(96540);const g=["#252525","#525252","#737373","#969696","#bdbdbd","#d9d9d9","#f0f0f0"],p="var(--vkui--color_text_primary)",b="#969696",m={width:450,height:400,padding:50,colorScale:g},h={fontFamily:"var(--vkui--font_text--font_family--regular)",fontSize:14,letterSpacing:"normal",padding:10,fill:p,stroke:"transparent"},k=Object.assign({textAnchor:"middle"},h),f={area:Object.assign({style:{data:{fill:p},labels:h}},m),axis:Object.assign({style:{axis:{fill:"transparent",stroke:p,strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round"},axisLabel:Object.assign({},k,{padding:25}),grid:{fill:"none",stroke:"none",pointerEvents:"painted"},ticks:{fill:"transparent",size:1,stroke:"transparent"},tickLabels:h}},m),bar:Object.assign({style:{data:{fill:"var(--vkui--color_icon_accent)",padding:8,strokeWidth:0},labels:h},cornerRadius:{top:5},barWidth:10},m),boxplot:Object.assign({style:{max:{padding:8,stroke:p,strokeWidth:1},maxLabels:Object.assign({},h,{padding:3}),median:{padding:8,stroke:p,strokeWidth:1},medianLabels:Object.assign({},h,{padding:3}),min:{padding:8,stroke:p,strokeWidth:1},minLabels:Object.assign({},h,{padding:3}),q1:{padding:8,fill:b},q1Labels:Object.assign({},h,{padding:3}),q3:{padding:8,fill:b},q3Labels:Object.assign({},h,{padding:3})},boxWidth:20},m),candlestick:Object.assign({style:{data:{stroke:p,strokeWidth:1},labels:Object.assign({},h,{padding:5})},candleColors:{positive:"#ffffff",negative:p}},m),chart:m,errorbar:Object.assign({borderWidth:8,style:{data:{fill:"transparent",stroke:p,strokeWidth:2},labels:h}},m),group:Object.assign({colorScale:g},m),histogram:Object.assign({style:{data:{fill:b,stroke:p,strokeWidth:2},labels:h}},m),legend:{colorScale:g,gutter:10,orientation:"vertical",titleOrientation:"top",style:{data:{type:"circle"},labels:h,title:Object.assign({},h,{padding:5})}},line:Object.assign({style:{data:{fill:"transparent",stroke:p,strokeWidth:2},labels:h}},m),pie:{style:{data:{padding:10,stroke:"transparent",strokeWidth:1},labels:Object.assign({},h,{padding:20})},colorScale:g,width:400,height:400,padding:50},scatter:Object.assign({style:{data:{fill:p,stroke:"transparent",strokeWidth:0},labels:h}},m),stack:Object.assign({colorScale:g},m),tooltip:{style:Object.assign({},h,{padding:0,pointerEvents:"none",fill:"var(--vkui--color_text_contrast_themed)"}),flyoutStyle:{strokeWidth:1,pointerEvents:"none",fill:"var(--vkui--color_background_modal_inverse)",stroke:"transparent"},flyoutPadding:{top:8,bottom:8,left:12,right:12},cornerRadius:8,pointerLength:10},voronoi:Object.assign({style:{data:{fill:"transparent",stroke:"transparent",strokeWidth:0},labels:Object.assign({},h,{padding:5,pointerEvents:"none"}),flyout:{stroke:p,strokeWidth:1,fill:"#f0f0f0",pointerEvents:"none"}}},m)};var u=a(3772),x=a(48591);const y=864e5,j=25;function v(t,e,a=75){const s=t.findIndex(t=>t.x>=e[0]),n=t.findIndex(t=>t.x>e[1]),i=t.slice(s,n);if(i.length>a){const t=Math.pow(2,Math.ceil(Math.log2(i.length/a)));return i.filter((e,a)=>(a+s)%t===0)}return i}function O({messagesByDay:t}){const e=(0,c.useMemo)(()=>[...t].map(([t,e])=>({dayTimestamp:t,value:e})),[t]),a=(0,c.useMemo)(()=>e.reduce((t,e)=>e.dayTimestamp<t.dayTimestamp?e:t,e[0]).dayTimestamp,[e]),g=(0,c.useMemo)(()=>{const t=e.map(t=>({x:Math.floor((t.dayTimestamp-a)/y),y:t.value}));return t.sort((t,e)=>t.x-e.x),t},[e,a]),p=(0,c.useMemo)(()=>function(t){return{y:[0,t.reduce((t,e)=>e.y>t.y?e:t,t[0]).y],x:[t[0].x,t[t.length-1].x]}}(g),[g]),[b,m]=(0,c.useState)(p.x);return(0,s.jsx)("div",{className:x.A.DatesChart,children:(0,s.jsx)(n.t,{width:606,padding:{left:70,top:10,bottom:25,right:0},theme:f,domainPadding:10,domain:p,containerComponent:(0,s.jsx)(i.xI,{zoomDimension:"x",onZoomDomainChange:t=>m(t.x),minimumZoom:{x:j}}),defaultAxes:{dependent:(0,s.jsx)(o.O,{dependentAxis:!0,tickFormat:t=>(0,u.A)(t)}),independent:(0,s.jsx)(o.O,{tickFormat:t=>(0,d.A)(a+t*y,!1,!0),fixLabelOverlap:!0})},children:(0,s.jsx)(r.k,{labelComponent:(0,s.jsx)(l.A,{}),labels:({datum:t})=>`${(0,d.A)(a+t.x*y,!1)}: ${(0,u.A)(t.y)}`,data:v(g,b)})})})}}}]);