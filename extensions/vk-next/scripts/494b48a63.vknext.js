"use strict";(globalThis.webpackChunkvknext=globalThis.webpackChunkvknext||[]).push([[6946],{33734:(e,t,r)=>{r.d(t,{A:()=>s});var o=r(47875),n=r(61054);const i=new Map,s=e=>{const t=i.get(e);if(t)return t;const r=new Promise(async t=>{const r=await o.A.call("users.getGifById",{user_id:e});if(!r.docs)return t(null),void i.delete(e);const s=await(0,n.V)(),a=(await s.api("docs.getById",{docs:r.docs}))[0].url;if(a){const e={imageUrl:a};r.height&&(e.height=r.height),t(e)}});return i.set(e,r),r}},38444:(e,t,r)=>{r.d(t,{A:()=>g});var o=r(22440),n=r(7417),i=r(22707),s=r(37400),a=r(38729),l=r(91570),c=r(2006);const d=(0,o.A)(),u=(0,a.NS)(),f=(0,a.NS)(),p=[],m=async(e,t)=>{if(!(e[`_${t}`]>1)){e[`_${t}`]=(e[`_${t}`]||0)+1;for(const r of p){const o=r[t];o&&(await(0,s.G)(),o(e))}}},h=(e,t)=>{t[u]||(t[u]=new MutationObserver(async r=>{for(const o of r)if("attributes"===o.type&&"style"===o.attributeName&&(await(0,s.G)(),"none"===t.style.display)){const t=e.querySelector(".Profile");t&&m(t,"onProfileLoadComplited")}}),t[u].observe(t,{attributes:!0}),c.A.add(t))},y=e=>{const t=e.querySelector(".Profile");return!!t&&(m(t,"onProfileLoadComplited"),!0)},v=()=>{for(const e of document.querySelectorAll(".ProfileWrapper,.ProfileWrapper__root")){m(e,"onProfileLoad");const t=e.querySelector("#profile_skeleton");let r=e.querySelector(".ProfileWrapper__root,#react_rootprofile")||e;r?y(r)||r&&!r[f]&&(r[f]=new MutationObserver((e,t)=>{y(r)&&t.disconnect()}),r[f].observe(r,{childList:!0,subtree:!0}),c.A.add(r)):t?h(e,t):m(e,"onErrorFindSkeleton")}};let w=!1;const g=async e=>{if(p.push(e),(0,n.n)(v),w)return;w=!0;(await(0,l.R)()).subscribeOnModuleEvaluated(async()=>{await(0,i.t)(),d.cur?.module&&"profile"!==d.cur?.module||requestIdleCallback(v)})}},66946:(e,t,r)=>{r.a(e,async(e,o)=>{try{r.r(t);var n=r(57580),i=r(90603),s=r(38444),a=r(33734),l=e([n]);n=(l.then?(await l)():l)[0];const c=async()=>{const{state:e,store:t}=(0,i.A)();if(!e?.owner.id)return;if(!t)return;const r=await(0,a.A)(e.owner.id);if(!r)return;const o={...t.getState().owner};o.cover={enabled:1,images:[{url:r.imageUrl,width:0,height:0}],photo_id:0},t.dispatch({type:"UPDATE_STATE",state:{owner:o}})};0,(0,s.A)({onProfileLoadComplited:c}),o()}catch(e){o(e)}})},90603:(e,t,r)=>{r.d(t,{A:()=>n});var o=r(95728);const n=()=>{const e=document.getElementById("profile_redesigned");if(!e)return{state:void 0,profileRedesigned:void 0,store:void 0};const t=document.getElementById("react_rootprofile"),{container:r,fiber:n}=(0,o.A)(t);let{env:i,store:s}=r?.memoizedState?.element?.props||n?.memoizedProps?.children?.[0]?.props?.children?.props||{};if(!s){const{fiber:t}=(0,o.A)(e);s=t?.return?.return?.memoizedProps?.value?.store||t?.return?.return?.return?.return?.return?.memoizedProps?.value}const a=s?.getState?.();return a||console.warn("profile state not found"),{state:a||void 0,profileRedesigned:e,store:s,env:i}}}}]);