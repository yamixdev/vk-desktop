"use strict";(globalThis.webpackChunkvknext=globalThis.webpackChunkvknext||[]).push([[432],{2749:(e,t,o)=>{o.d(t,{A:()=>l});var s=o(22707),n=o(37400),r=o(51018),c=o(8148);const i=new r.e,a=async e=>{if(!e)return;await(0,n.G)(),await(0,s.t)();const t=document.querySelector("#reforged-root .ConvoProfileNew,#reforged-root .RightPanel__profile");if(t){0;for(const o of i.listeners)await(0,n.G)(),o(t,e)}};let d=!1;const l=async e=>{const t=i.addListener(e);return d||(d=!0,(0,c.A)(a)),t}},8148:(e,t,o)=>{o.d(t,{A:()=>c});var s=o(51018),n=o(5679);const r=new s.e;(0,n.A)(e=>{if("UserOpenedConvoProfile"===e.type){0;for(const t of r.listeners)try{t?.(e.peerId,e.isLinkWithHistory)}catch(e){console.error(e)}}},!0);const c=e=>r.addListener(e)},8906:(e,t,o)=>{o.d(t,{d:()=>n});var s=o(50313);const n=()=>(0,s.A)("Photoview")},11630:(e,t,o)=>{o.d(t,{A:()=>c});var s=o(22707),n=o(37400);class r{obs;obsChildNodes;simulateAddedNodes;target;initialSelector;selectors;onAddNodes;onRemoveNodes;constructor({selector:e,onAddNode:t,onRemoveNode:o}){this.initialSelector=e,this.selectors=e.split(">").map(e=>e.trim()),this.onAddNodes=new Set,this.onRemoveNodes=new Set,t&&this.onAddNodes.add(t),o&&this.onRemoveNodes.add(o);this.obsChildNodes=[],this.obs=new MutationObserver(async e=>{for(const t of e)"childList"===t.type&&(t.addedNodes.length&&await this.processNodes({nodes:t.addedNodes,callbacks:this.onAddNodes,type:"add"}),t.removedNodes.length&&this.onAddNodes.size&&await this.processNodes({nodes:t.removedNodes,callbacks:this.onAddNodes,type:"remove"}))})}_childSelector;get childSelector(){if(this._childSelector)return this._childSelector;const e=[...this.selectors];if(e.length>=2){const t=e.slice(0,2).join(" ");this._childSelector=[t,...e.slice(2)].join(" > ")}else this._childSelector=e.join(" > ");return this._childSelector}async processNodes({nodes:e,callbacks:t,type:o}){await(0,n.G)();const c=this.selectors[0],i=this.selectors.length<=1||"remove"===o,a=this.target?.matches(c);for(const o of e){if(1!==o.nodeType)continue;await(0,n.G)(),await(0,s.t)();const e=o,d=e.matches(c);if(i&&(a||d))for(const o of t)await(0,n.G)(),await(0,s.t)(),o(e,this.target);else if(!d){const t=e.querySelector(c);if(t){const e=new r({selector:this.childSelector});for(const t of this.onAddNodes)e.onAddNodes.add(t);for(const t of this.onRemoveNodes)e.onRemoveNodes.add(t);e.observe(t,{simulateAddedNodes:!0}),this.obsChildNodes.push(e)}}}}observe(e,{simulateAddedNodes:t}={}){if(e._clMO&&e._clMO.initialSelector===this.initialSelector){const o=e._clMO;let s=!1;for(const e of this.onAddNodes)o.onAddNodes.has(e)||(s=!0),o.onAddNodes.add(e);for(const e of this.onRemoveNodes)o.onRemoveNodes.has(e)||(s=!0),o.onRemoveNodes.add(e);return s&&t&&o.processNodes({nodes:e.childNodes,callbacks:o.onAddNodes,type:"add"}).catch(console.error),o}return this.target=e,this.simulateAddedNodes=t,this.simulateAddedNodes&&this.processNodes({nodes:e.childNodes,callbacks:this.onAddNodes,type:"add"}).catch(console.error),this.obs.observe(this.target,{childList:!0}),e._clMO=this,this}disconnect(){for(const e of this.obsChildNodes)e.disconnect();return this.obs.disconnect(),this.target?._clMO&&delete this.target._clMO,this}}const c=r},13674:(e,t,o)=>{o.d(t,{A:()=>c});var s=o(48913),n=o(79068),r=o(51018);const c=e=>{const t=new r.e,o=o=>{let s=o[e];Object.defineProperty(o,e,{get:()=>s,set:e=>{s=e;for(const e of t.listeners)try{e(s)}catch(e){console.error(e)}return!0},configurable:!0,enumerable:!0})};let c=!1;const i=async r=>{c||(c=!0,await(async()=>{let r=await(0,s.e)();o(r),(0,n.A)(s=>{if(r[e]!==s[e])for(const o of t.listeners)try{o(s[e])}catch(e){console.error(e)}o(s),r=s})})());r((await(0,s.e)())[e])};return e=>{const o=t.addListener(e);return i(e),o}}},14198:(e,t,o)=>{o.d(t,{A:()=>v});var s=o(22440),n=o(95728),r=o(22707),c=o(37400),i=o(51018),a=o(38729),d=o(91570),l=o(39201);const f=(0,s.A)(),u=new i.e,m=(0,a.NS)(),h='div[class*="UserRichCell__container"]',_=async e=>{const t=e.querySelector('a[href^="/id"], [class*="UserRichCell__name"] > a');if(!t)return;await(0,c.G)();const{fiber:o}=(0,n.A)(e);let s=Number(o?.memoizedProps?.children?.props?.id||o?.return?.memoizedProps?.children?.props?.id||o?.return?.memoizedProps?.status?.props?.user?.id||o?.return?.memoizedProps?.nameAfter?.props?.user?.id);if(s||(s=Number(t.href?.split("/id")[1])),s)for(const t of u.listeners){if(await(0,r.t)(),!e.parentElement)return;await(0,c.G)(),t(e,s)}},b=e=>{if(!e[m]){for(const t of e.querySelectorAll(h))_(t);e[m]=new MutationObserver(e=>{for(const t of e)for(const e of t.addedNodes)_(e)}),e[m].observe(e,{childList:!0})}},y=e=>{const t=e.querySelector('.vkuiSplitLayout__inner,[class*="TwoColumnLayout__container"]');if(!t)return;if(t.querySelector('[class*="vkuiRichCell__host"] [class*="Skeleton__skeleton"],[class*="vkuiRichCell__host"] [class*="SkeletonComponent__skeleton"]'))return void setTimeout(()=>y(e),500);for(const e of t.querySelectorAll(h))_(e);const o=t.querySelector(`.vkuiInternalGroup:has([class*="FriendsSearch__root"]):has(${h})`);if(o&&!o[m]){for(const e of o.childNodes)e instanceof HTMLElement&&0===e.classList.length&&e.firstChild&&b(e.firstChild);o[m]=new MutationObserver(e=>{for(const t of e)for(const e of t.addedNodes)e instanceof HTMLElement&&0===e.classList.length&&e.firstChild&&b(e.firstChild)}),o[m].observe(o,{childList:!0})}};let p=!1;const v=e=>{const t=u.addListener(e);return(async()=>{if(p)return;p=!0,(0,l.A)(async e=>{await(0,r.t)(),"friends"===f.cur.module&&y(e)}),(await(0,d.R)()).onLocationChange(async e=>{if(e.startsWith("friends")){await(0,r.t)();const e=document.querySelector("#spa_root > .vkui__root");if(!e)return;y(e)}})})(),t}},18397:(e,t,o)=>{o.d(t,{A:()=>b});var s=o(49032),n=o(7417),r=o(36585),c=o(51018),i=o(22707),a=o(37400),d=o(91570),l=o(38729);const f=new c.e,u="#im_dialogs .ui_scroll_content, #im_dialogs:not(.ui_scroll_container)",m=(0,l.NS)(),h=async()=>{const e=document.querySelector(u);if(e){if(e)for(const t of e.querySelectorAll(".nim-dialog")){await(0,a.G)(),await(0,i.t)();for(const e of f.listeners)e(t)}e[m]||(e[m]=new MutationObserver(async e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes){if(1!==e.nodeType)continue;await(0,a.G)(),await(0,i.t)();const t=e;if(t.classList.contains("nim-dialog")){0;for(const e of f.listeners)e(t)}}}),e[m].observe(e,{childList:!0}))}};let _=!1;const b=async e=>{const t=f.addListener(e);if(requestAnimationFrame(h),!_){if(_=!0,s.lz.test(window.location.pathname)){let e=!1;const t=new MutationObserver(()=>{document.querySelector(u)&&(e=!0,t.disconnect(),h())});t.observe(await(0,r.v)(),{childList:!0}),(0,n.n)(()=>{e||(t.disconnect(),h())})}(0,d.R)().then(e=>{e.onLocationChange(e=>{s.lz.test(e)&&requestIdleCallback(h)})})}return t}},21850:(e,t,o)=>{o.d(t,{A:()=>m});var s=o(92046),n=o(22707),r=o(51018),c=o(48913),i=o(91570),a=o(33012);const d=new r.e,l=["group","public","profile","groups","groups_edit"],f=async(e="")=>{await(0,n.t)(),document.getElementById("public")||await(0,s.c)(1e3),l.includes(e)&&(()=>{for(const e of d.listeners)try{e()}catch(e){console.error(e)}})()};let u=!1;const m=e=>{const t=d.addListener(e);return(async e=>{const t=await(0,c.e)();if(l.includes(t?.module)&&e(),u)return;u=!0,(0,a.A)(f),(await(0,i.R)()).subscribeOnModuleEvaluated(f)})(e),t}},30646:(e,t,o)=>{o.d(t,{A:()=>l});var s=o(7618),n=o(51018),r=o(94169),c=o(44497);const i=new n.e,a=e=>{const t=document.querySelector("#reforged-root .ConvoHeader .ConvoTitle");if(t){0;for(const o of i.listeners)requestIdleCallback(()=>o(t,e))}};let d=!1;const l=e=>{const t=i.addListener(e);const o=(0,c.A)();return o&&!s.z.isChatId(o)&&a(o),d?t:(d=!0,void(0,r.A)(e=>{s.z.isChatId(e)||a(e)}))}},33012:(e,t,o)=>{o.d(t,{A:()=>s});const s=(0,o(13674).A)("module")},34881:(e,t,o)=>{o.d(t,{A:()=>u});var s=o(22440),n=o(51018),r=o(48913),c=o(21850);const i=(0,s.A)(),a=new n.e,d=(e,t)=>{for(const o of a.listeners)o(e,t)},l=async()=>{const e=await(0,r.e)();if("number"==typeof e?.oid)for(const e of document.getElementsByClassName("page_name"))d(e,i.cur.oid)};let f=!1;const u=async e=>{const t=a.addListener(e);return requestAnimationFrame(l),f||(f=!0,(0,c.A)(l)),t}},38444:(e,t,o)=>{o.d(t,{A:()=>v});var s=o(22440),n=o(7417),r=o(22707),c=o(37400),i=o(38729),a=o(91570),d=o(2006);const l=(0,s.A)(),f=(0,i.NS)(),u=(0,i.NS)(),m=[],h=async(e,t)=>{if(!(e[`_${t}`]>1)){e[`_${t}`]=(e[`_${t}`]||0)+1;for(const o of m){const s=o[t];s&&(await(0,c.G)(),s(e))}}},_=(e,t)=>{t[f]||(t[f]=new MutationObserver(async o=>{for(const s of o)if("attributes"===s.type&&"style"===s.attributeName&&(await(0,c.G)(),"none"===t.style.display)){const t=e.querySelector(".Profile");t&&h(t,"onProfileLoadComplited")}}),t[f].observe(t,{attributes:!0}),d.A.add(t))},b=e=>{const t=e.querySelector(".Profile");return!!t&&(h(t,"onProfileLoadComplited"),!0)},y=()=>{for(const e of document.querySelectorAll(".ProfileWrapper,.ProfileWrapper__root")){h(e,"onProfileLoad");const t=e.querySelector("#profile_skeleton");let o=e.querySelector(".ProfileWrapper__root,#react_rootprofile")||e;o?b(o)||o&&!o[u]&&(o[u]=new MutationObserver((e,t)=>{b(o)&&t.disconnect()}),o[u].observe(o,{childList:!0,subtree:!0}),d.A.add(o)):t?_(e,t):h(e,"onErrorFindSkeleton")}};let p=!1;const v=async e=>{if(m.push(e),(0,n.n)(y),p)return;p=!0;(await(0,a.R)()).subscribeOnModuleEvaluated(async()=>{await(0,r.t)(),l.cur?.module&&"profile"!==l.cur?.module||requestIdleCallback(y)})}},39201:(e,t,o)=>{o.d(t,{A:()=>y});var s=o(7417),n=o(51018),r=o(38729),c=o(91570);const i=new n.e,a=(0,r.NS)(),d=(0,r.NS)(),l=(0,r.sr)(),f="vkui__root",u=`.${f}`,m=e=>{if(!e[l]){e[l]=!0;for(const t of i.listeners)t(e)}},h=e=>{if(e.classList.contains(f))return m(e);for(const t of e.querySelectorAll(u))m(t);e[a]||(e[a]=new MutationObserver(async e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)e instanceof HTMLElement&&e.classList.contains(f)&&m(e)}),e[a].observe(e,{childList:!0}))},_=()=>{const e=document.getElementById("spa_root");if(e){for(const t of e.querySelectorAll(u))h(t);e[d]||(e[d]=new MutationObserver(e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)e instanceof HTMLElement&&e.classList.contains(f)&&h(e)}),e[d].observe(e,{childList:!0}))}};let b=!1;const y=async e=>{const t=i.addListener(e);if((0,s.n)(_),b)return t;b=!0;return(await(0,c.R)()).subscribeOnModuleEvaluated(()=>{setTimeout(_,100)}),t}},44497:(e,t,o)=>{o.d(t,{A:()=>s});const s=()=>{const e=window.location.pathname.match(/\/convo\/(-?\d+)/);if(e)return Number(e[1])||0;const t=new URLSearchParams(window.location.search),o=Number(t.get("sel"));return o||0}},47648:(e,t,o)=>{o.d(t,{A:()=>m});var s=o(49032),n=o(7417),r=o(51018),c=o(22707),i=o(91570);const a=(0,o(38729).sr)(),d=new r.e,l=()=>{if(document.querySelector(".im-page:not(.im-page_group)"))return void setTimeout(l,1e3);const e=document.querySelector("#reforged-root,.VKCOMMessenger__reforgedRoot");e?e.querySelector(".VKCOMMessenger__skeletonWrapper")?setTimeout(l,500):(e=>{if(!e[a]){e[a]=!0;for(const t of d.listeners)t(e)}})(e):0===document.getElementById("wrap3")?.children.length&&setTimeout(l,500)},f=async e=>{if(document.getElementsByClassName("im-page")[0]&&!e)return void(0,n.n)(()=>f(!0));const t=await(0,i.R)();l(),t.onLocationChange(async e=>{await(0,c.t)(),s.lz.test(e)&&l()})};let u=!1;const m=e=>{const t=d.addListener(e);return(0,n.n)(l),u||(u=!0,f()),t}},51210:(e,t,o)=>{o.d(t,{A:()=>_});var s=o(7417),n=o(51018),r=o(91570),c=o(38729),i=o(2006);const a=new n.e,d=(0,c.NS)(),l=(0,c.sr)(),f=e=>{if(e[l])return;e[l]=!0;const t=Number(e.id.match(/group_u_(members|admins)(\d+)/)?.[2]);if(!t)return void 0;const o=e.querySelector(".group_u_title");o&&((e,t)=>{for(const o of a.listeners)requestIdleCallback(()=>o(e,t))})(o,t)},u=e=>{for(const t of e.getElementsByClassName("group_l_row"))f(t);e[d]||(e[d]=new MutationObserver(e=>{for(const t of e)for(const e of t.addedNodes)e instanceof HTMLElement&&e.classList.contains("group_l_row")&&f(e)}),e[d].observe(e,{childList:!0}),i.A.add(e))},m=()=>{for(const e of document.querySelectorAll("#group_u_rows_members,.group_u_rows"))u(e)};let h=!1;const _=async e=>{const t=a.addListener(e);return(0,s.n)(m),h||(h=!0,(0,r.R)().then(e=>{e.onLocationChange(e=>{e.includes("act=users")&&m()})})),t}},51302:(e,t,o)=>{o.d(t,{A:()=>A});var s=o(51018),n=o(22707),r=o(37400),c=o(8906),i=o(38729),a=o(2006),d=o(67767);const l=new s.e,f=(0,i.NS)(),u=(0,i.NS)(),m=(0,i.Ln)(),h=(0,i.sr)(),_=(0,i.NS)(),b=async e=>{if(e[h])return;if(e[h]=!0,await(0,n.t)(),!e.classList.contains("reply"))return;await(0,r.G)();let t=Number(e.dataset.answeringId);if(!t&&e.onclick){const o=e.onclick.toString().match(/Wall\.replyClick\(.+?,\s*(-?\d+)\)/);o&&(t=Number(o[1]))}if(t||(t=Number(e.querySelector("div[data-outline-id]")?.dataset?.outlineId)),!t)return void 0;const o=e.querySelector(".reply_author");if(o)for(const e of l.listeners)await(0,r.G)(),e(o,t)},y=e=>{e[m]||(e[m]=new IntersectionObserver(async t=>{for(const o of t)o.isIntersecting&&(b(e),e._ibs&&(e._ibs.unobserve(e),delete e._ibs))},{threshold:0}),e[m].observe(e),a.A.add(e))},p=e=>{for(const t of e.getElementsByClassName("reply"))y(t);e[f]||(e[f]=new MutationObserver(()=>{for(const t of e.getElementsByClassName("reply"))y(t);for(const t of e.getElementsByClassName("replies_list_deep"))p(t)}),e[f].observe(e,{childList:!0}),a.A.add(e))},v=e=>{e[u]||(e[u]=new MutationObserver(e=>{for(const t of e)if("childList"===t.type&&t.addedNodes.length)for(const e of t.addedNodes)e instanceof HTMLElement&&(e.classList.contains("reply")&&y(e),(e.classList.contains("replies_wrap_deep")||e.classList.contains("replies_list_deep"))&&p(e))}),e[u].observe(e,{childList:!0}),a.A.add(e))},w=e=>{const t=e;for(const e of t.querySelectorAll(".replies_list,.wl_replies")){for(const t of e.getElementsByClassName("reply"))y(t);for(const t of e.getElementsByClassName("replies_wrap_deep"))p(t);for(const t of e.getElementsByClassName("replies_list_deep"))p(t);v(e)}};let N=!1;const A=e=>{const t=l.addListener(e);return N||(N=!0,(0,d.A)(w),(0,c.d)().then(e=>{const t=e.show;e.show=function(...e){const o=Reflect.apply(t,this,e);try{(()=>{const e=document.getElementById("pv_box");if(!e)return;const t=e.querySelector(".narrow_column .ui_scroll_overflow .pv_comments_list");if(t){for(const e of t.getElementsByClassName("reply"))y(e);t[_]||(t[_]=new MutationObserver(e=>{for(const t of e)if("childList"===t.type&&t.addedNodes.length)for(const e of t.addedNodes)e instanceof HTMLElement&&b(e)}),t[_].observe(t,{childList:!0}),a.A.add(t))}})()}catch(e){console.error(e)}return o}})),t}},55015:(e,t,o)=>{o.d(t,{A:()=>y});var s=o(22440),n=o(95728),r=o(51018),c=o(71191),i=o(38729),a=o(2006);const d=(0,s.A)(),l=new r.e,f=(0,i.NS)(),u=e=>{const{fiber:t}=(0,n.A)(e);if(!t)return;let o=e.querySelector(".Entity__title");if(!o)return;o=o.querySelector("a > span")||o;const s=Number(t?.return?.key);if(s){0;for(const e of l.listeners)requestIdleCallback(()=>e(o,s))}},m=e=>{if(!e[f]){for(const t of e.getElementsByClassName("ListItem"))u(t);e[f]=new MutationObserver(e=>{for(const t of e)if("childList"===t.type&&t.addedNodes.length)for(const e of t.addedNodes)e instanceof HTMLElement&&e.classList.contains("ListItem")&&u(e)}),e[f].observe(e,{childList:!0})}},h=e=>{if(e[f])return;const t=()=>{for(const t of e.querySelectorAll(".ChatSettingsMembersWidget__list > ul, .ChatSettingsMembersWidget__list > .List"))m(t)};t(),e[f]=new MutationObserver(t),e[f].observe(e,{childList:!0}),a.A.add(e)},_=e=>{if(e[f])return;const t=()=>{for(const t of e.getElementsByClassName("ChatSettings__content"))h(t)};t(),e[f]=new MutationObserver(t),e[f].observe(e,{childList:!0}),a.A.add(e)};let b=!1;const y=e=>{const t=l.addListener(e);return b||(b=!0,(0,c.K)().then(()=>{const e=d.boxQueue._show;d.boxQueue._show=function(...t){try{const[e]=t,o=d._message_boxes[e];if(o?.bodyNode){const e=o.bodyNode.querySelector("#ChatSettings,.ChatSettingsWrapper");e&&(e=>{if(e[f])return;const t=()=>{for(const t of e.getElementsByClassName("ChatSettings"))_(t)};t(),e[f]=new MutationObserver(t),e[f].observe(e,{childList:!0}),a.A.add(e)})(e)}}catch(e){console.error(e)}return Reflect.apply(e,d.boxQueue,t)}})),t}},56969:(e,t,o)=>{o.d(t,{A:()=>f});var s=o(51018),n=o(38729),r=o(47648);const c=new s.e,i=(0,n.NS)(),a=e=>{for(const t of c.listeners)t(e)},d=e=>{const t=e.querySelector(".MEApp__content,.MEApp__mainPanel");t?a(t):e[i]&&(e[i]=new MutationObserver(()=>{const t=e.querySelector(".MEApp__content,.MEApp__mainPanel");t&&(a(t),e[i].disconnect())}),e[i].observe(e,{childList:!0,subtree:!0}))};let l=!1;const f=e=>{const t=c.addListener(e);return l||(l=!0,(0,r.A)(d)),t}},60312:(e,t,o)=>{o.d(t,{A:()=>y});var s=o(22440),n=o(51018),r=o(38729),c=o(48913),i=o(2006),a=o(79068);const d=new n.e,l=async e=>{for(const t of d.listeners)try{t?.(e)}catch(e){console.error(e)}};(0,a.A)(e=>{!function(e){let{peer:t}=e;Object.defineProperty(e,"peer",{get:()=>t,set:e=>(l(e),t=e),configurable:!0}),l(t)}(e)});const f=function(e){const t=d.addListener(e);return window.cur?.peer&&l(window.cur.peer),t},u=(0,s.A)(),m=new n.e,h=(0,r.NS)(),_=e=>{const t=document.querySelector(".im-page--title-main-in");if(t){0;for(const o of m.listeners)requestIdleCallback(()=>o(t,e))}};let b=!1;const y=e=>{const t=m.addListener(e);if(!b){b=!0;const e=new Map;(0,c.e)().then(()=>{f(async t=>{t&&(e.has(t)&&clearTimeout(e.get(t)),e.set(t,setTimeout(async()=>{_(t),(()=>{const e=document.querySelector(".im-page--title-wrapper");e&&(e[h]&&e[h].disconnect(),e[h]=new MutationObserver(e=>{for(const t of e)t.removedNodes.length&&u.cur.peer&&_(u.cur.peer)}),e[h].observe(e,{attributes:!0,childList:!0,characterData:!0}),i.A.add(e))})(),e.delete(t)},1e3)))})})}return t}},60889:(e,t,o)=>{o.d(t,{A:()=>A});var s=o(95728),n=o(51018),r=o(22707),c=o(37400),i=o(38729),a=o(2006),d=o(67767);const l=new n.e,f='[class*="CommentBase__root"]',u=(0,i.NS)(),m=(0,i.Ln)(),h=(0,i.sr)(),_=(0,i.NS)(),b=async e=>{if(e[h])return;e[h]=!0,await(0,r.t)();const{fiber:t}=(0,s.A)(e),o=t?.return?.return?.return?.return?.return?.memoizedProps?.comment;await(0,c.G)();let n=Number(o?.from_id);if(!n)return void 0;const i={element:e,comment:o,ownerId:n};for(const e of l.listeners)await(0,c.G)(),e(i)},y=e=>{e[m]||(e[m]=new IntersectionObserver(async t=>{for(const o of t)o.isIntersecting&&(b(e),e._ibs&&(e._ibs.unobserve(e),delete e._ibs))},{threshold:0}),e[m].observe(e),a.A.add(e))},p=e=>{if(!e[_]){e[_]=new MutationObserver(e=>{for(const t of e)if("childList"===t.type&&t.addedNodes.length)for(const e of t.addedNodes)e instanceof HTMLElement&&(e.matches(f)&&y(e),e.firstElementChild?.matches(f)&&y(e.firstElementChild))});for(const t of e.querySelectorAll(f).values())b(t);e[_].observe(e,{childList:!0}),a.A.add(e)}},v=e=>{for(const t of e.querySelectorAll('[data-testid="wall_comments_layout_root"]'))p(t);for(const t of e.querySelectorAll(f).values())b(t)},w=e=>{const t=e;t[u]||(v(t),t[u]=new MutationObserver(e=>{for(const o of e)"childList"===o.type&&o.addedNodes.length&&v(t)}),t[u].observe(t,{childList:!0}),a.A.add(t))};let N=!1;const A=e=>{const t=l.addListener(e);if(N)for(const e of document.querySelectorAll(f).values())b(e);else N=!0,(0,d.A)(w);return t}},61622:(e,t,o)=>{o.d(t,{A:()=>b});var s=o(11630),n=o(95728),r=o(37400),c=o(51018),i=o(43171),a=o(56969);const d=new c.e,l=new Set;let f=!1;const u=async e=>{if(!e.classList.contains("SearchResult"))return;const{fiber:t}=(0,n.A)(e),o=Number(t?.key);if(!o)return void 0;const s=e.getElementsByClassName("ConvoTitle")[0];if(s){0;for(const e of d.listeners)await(0,r.G)(),e(s,o)}},m=e=>{if(!e.classList.contains("SearchMessageResult"))return;const{fiber:t}=(0,n.A)(e),o=Number(t?.return?.memoizedProps?.convo?.peerId||t.return?.memoizedProps?.peer?.id);if(!o)return void 0;const s=e.getElementsByClassName("SearchMessageResult__titleWithIcon")[0];if(s)for(const e of d.listeners)e(s,o)},h=()=>{const e=document.getElementById("reforged-root");if(!e)return;const t=new s.A({selector:"#reforged-root .ConvoList > .SearchTabs .SearchTabs__tabPanel > div .SearchConvoTab__scrollbar-content > .SearchConvoTab__resultsContainer",onAddNode:e=>{new s.A({selector:".SearchResult",onAddNode:u}).observe(e,{simulateAddedNodes:!0})}}).observe(e,{simulateAddedNodes:!0}),o=new s.A({selector:"#reforged-root .ConvoList > .SearchTabs .SearchTabs__tabPanel > div .SearchMessageTab__scrollbar-content > .SearchMessageTab__resultsContainer",onAddNode:e=>{new s.A({selector:".SearchMessageResult",onAddNode:m}).observe(e,{simulateAddedNodes:!0})}}).observe(e,{simulateAddedNodes:!0}),n=new s.A({selector:"#reforged-root .MEApp > .RightPanel .ConvoSearch__container > .ConvoSearch__content .ConvoSearch__scrollbar-content > .SearchMessageTab__resultsContainer",onAddNode:e=>{new s.A({selector:".SearchMessageResult",onAddNode:m}).observe(e,{simulateAddedNodes:!0})}}).observe(e,{simulateAddedNodes:!0});l.add(()=>t.disconnect()),l.add(()=>o.disconnect()),l.add(()=>n.disconnect()),f||(f=!0,(0,i.A)(()=>{for(const e of l)e();l.clear(),f=!1}))};let _=!1;const b=async e=>{const t=d.addListener(e);return _||(_=!0,(0,a.A)(h)),t}},71191:(e,t,o)=>{o.d(t,{K:()=>n});var s=o(50313);const n=()=>(0,s.A)("boxQueue")},79068:(e,t,o)=>{o.d(t,{A:()=>a});var s=o(51018),n=o(54251),r=o(48913);const c=new s.e;let i=!1;const a=e=>{const t=c.addListener(e);return(async e=>{i?await(0,r.e)():(i=!0,(0,n.A)("cur",e=>{for(const t of c.listeners)try{t(e)}catch(e){console.error(e)}})),e(window.cur)})(e),t}},79346:(e,t,o)=>{o.d(t,{A:()=>d});var s=o(7417),n=o(51018),r=o(8906);const c=new n.e,i=()=>{const e=document.getElementById("pv_box");if(!e)return;const t=e.querySelector(".narrow_column");if(!t)return;const o=t.querySelector("#pv_author_name");o&&(e=>{const t=Number(window.cur?.pvCurPhoto?.id.split("_")[0]);if(t)for(const o of c.listeners)o(e,t)})(o)};let a=!1;const d=e=>{const t=c.addListener(e);return(0,s.n)(i),a||(a=!0,(0,r.d)().then(e=>{const t=e.show;e.show=function(...e){const o=Reflect.apply(t,this,e);try{i()}catch(e){console.error(e)}return o}})),t}},82181:(e,t,o)=>{o.d(t,{A:()=>_});var s=o(7417),n=o(22707),r=o(37400),c=o(51018),i=o(38729),a=o(91570),d=o(45939);const l=new c.e,f=(0,i.NS)(),u=async e=>{await(0,r.G)(),await(0,n.t)();const t=Number(e?.dataset?.peer);if(t)for(const o of l.listeners)o(e,t)},m=()=>{const e=document.querySelector("._im_peer_history");if(e){for(const t of e.getElementsByClassName("im-mess-stack"))u(t);e[f]||(e[f]=new MutationObserver(e=>{for(const t of e)for(const e of t.addedNodes){const t=e;t.parentElement&&u(t)}}),e[f].observe(e,{childList:!0}),d.A.add(e))}};let h=!1;const _=e=>{const t=l.addListener(e);return(0,s.n)(()=>{for(const e of document.getElementsByClassName("im-mess-stack"))u(e)}),h||(h=!0,(0,a.R)().then(e=>{m(),e.onLocationChange(e=>{e.includes("sel=")&&m()})})),t}},88016:(e,t,o)=>{o.d(t,{A:()=>p});var s=o(7417),n=o(22707),r=o(37400),c=o(51018),i=o(38729),a=o(91570),d=o(2006);const l=new c.e,f=(0,i.NS)(),u=(0,i.sr)(),m=e=>{const t=Number(e.dataset.id)|Number(e.dataset.groupId)||Number(e.id.match(/(\d+)/)?.[0]);if(!t)return void 0;const o=e.querySelector(".title, .labeled, .group_row_labeled");o&&(async(e,t)=>{if(e[u])return;e[u]=!0;const o=-Math.abs(t);for(const t of l.listeners)await(0,r.G)(),t(e,o)})(o,t)},h=e=>e.classList.contains("group_list_row")||e.classList.contains("groups_row"),_=e=>{for(const t of e.getElementsByClassName("group_list_row"))m(t);for(const t of e.getElementsByClassName("groups_row"))m(t);e[f]||(e[f]=new MutationObserver(e=>{for(const t of e)for(const e of t.addedNodes){const t=e instanceof HTMLElement;t&&h(e)&&m(e),t&&"search_more_results"===e.id&&_(e)}}),e[f].observe(e,{childList:!0}),d.A.add(e))},b=()=>{for(const e of document.querySelectorAll(".groups_list,#groups_list_groups,.search_communities_block,.search_communities_results,#results:has(.groups_row)"))_(e)};let y=!1;const p=e=>{const t=l.addListener(e);return(0,s.n)(b),y||(y=!0,(0,a.R)().then(e=>{e.subscribeOnModuleEvaluated(async()=>{await(0,n.t)(),window.cur.module&&window.cur.module.startsWith("groups")&&b()})})),t}},99769:(e,t,o)=>{o.d(t,{A:()=>v});var s=o(51018),n=o(22707),r=o(37400),c=o(91570),i=o(38729),a=o(56969);const d=new s.e,l=(0,i.NS)(),f=(0,i.NS)(),u=(0,i.NS)(),m=(0,i.sr)(),h=async e=>{if(!e[m]){e[m]=!0,await(0,n.t)();for(const t of d.listeners)await(0,r.G)(),t(e)}},_=e=>{const t=()=>{for(const t of e.getElementsByClassName("ConvoListItem"))h(t)};t(),e[l]||(e[l]=new MutationObserver(e=>{for(const o of e)for(const e of o.addedNodes)e instanceof HTMLElement&&t()}),e[l].observe(e,{childList:!0}))},b=e=>{for(const t of e.children)_(t);e[f]||(e[f]=new MutationObserver(e=>{for(const t of e)for(const e of t.addedNodes)e instanceof HTMLElement&&e.childNodes[0]instanceof HTMLElement&&_(e)}),e[f].observe(e,{childList:!0}))},y=async()=>{await(0,n.t)();const e=document.getElementById("reforged-root");if(!e)return;const t=e.querySelector(".ConvoList .ConvoList__items .ConvoList__itemsWrapper > .ConvoList__scrollbar-content");t&&(e=>{for(const t of e.querySelectorAll(".ConvoList__organiserSection,section[id]"))b(t);e[u]||(e[u]=new MutationObserver(e=>{for(const t of e)for(const e of t.addedNodes)e instanceof HTMLElement&&e.matches(".ConvoList__organiserSection,section[id]")&&b(e)}),e[u].observe(e,{childList:!0}))})(t)};let p=!1;const v=e=>{const t=d.addListener(e);return y(),p||(p=!0,(0,a.A)(y),(0,c.R)().then(e=>{e.onLocationChange(e=>{(e.startsWith("im")||e.startsWith("/im"))&&y()})})),t}}}]);