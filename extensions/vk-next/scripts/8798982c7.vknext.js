"use strict";(globalThis.webpackChunkvknext=globalThis.webpackChunkvknext||[]).push([[1812,2957],{7708:(e,t,s)=>{s.d(t,{A:()=>d});var a=s(74848),c=s(11157),n=s(39107),l=s(13742),i=s(68741),r=s(91691);const h="zRIhm_rzeRaOj2Bs",o="m8aAYX3glAEj5Q3G",d=({beforeClassname:e,backPage:t,hideButtonIsFirstPage:s,hideBackButtonInTablet:d,children:g,...u})=>{const m=(0,c.XC)(),_=(0,c.Gz)(),{width:x}=(0,l.A)();let j=s&&m&&(0,r.A)();return d&&(x||800)>768&&(j=!0),(0,a.jsx)(n.aOn,{before:!j&&(0,a.jsx)(n.Hy0,{onClick:async()=>{m?t?await _.replace(t):await _.push(i.JZ.root.main.home):await _.back()},className:(0,n.xWm)(h,e),hideLabelOnIOS:!0}),...u,children:(0,a.jsx)("div",{className:o,children:g})})}},12957:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.r(t),s.d(t,{default:()=>w});var c=s(74848),n=s(11157),l=s(39107),i=s(96540),r=s(7708),h=s(1883),o=s(61699),d=s(23274),g=s(8015),u=s(22549),m=s(68741),_=s(57087),x=s(92046),j=s(31812),k=e([g,u]);[g,u]=k.then?(await k)():k;const p=()=>{const e=(0,g.A)(),{VKNclearCacheParams:t,updateValue:a}=(0,u.A)("VKNclearCacheParams"),{currentTheme:r,updateValue:h}=(0,u.A)("currentTheme"),m=(0,n.Gz)(),{forceUpdateAuthVKMe:k}=(0,_.De)(),{viewer:p}=(0,_.ur)(),w=(0,d.A)(),{storage:f}=(0,o.A)(),v=(e,s)=>{const c={...t};c[e]=s,a(c),a(c)},C=(0,i.useMemo)(()=>!Object.values(t).some(Boolean),[t]),A=async()=>{if(!p?.id)return;m.showPopout((0,c.jsx)(l.WHT,{}));const e={...t},a={};if(e.msgAll&&(a.StorageMessages={},e.msgDeleted=!0,e.msgExpired=!0),e.msgDeleted&&(a.VKNDeletedMessages={}),e.msgExpired&&(a.VKNExpiredMessages={}),e.themes&&(a.Themes={},r&&h(w?"vkcom_dark":"light")),e.localRename&&(a.localRename={}),e.chatStats&&(a.chatStats={}),e.auth)try{await(0,j.default)()}catch(e){console.error(e)}if(e.authVKME&&p.id){const e=(await s.e(9817).then(s.bind(s,69817))).default,t=await e.getStorage()||{};delete t[p.id]?.vkMe,await e.setStorage(t),k()}await f.local.set(a),m.showPopout((0,c.jsx)(l.WHT,{state:"done"})),await(0,x.c)(1e3),await m.hidePopout()};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(l.Sc0,{defaultChecked:t.msgDeleted,onChange:({target:e})=>{v("msgDeleted",e.checked)},children:e.use("settings_cache_deleted_messages")}),(0,c.jsx)(l.Sc0,{defaultChecked:t.msgExpired,onChange:({target:e})=>{v("msgExpired",e.checked)},children:e.use("settings_cache_expired_messages")}),(0,c.jsx)(l.Sc0,{description:e.use("settings_cache_all_messages_description"),defaultChecked:t.msgAll,onChange:({target:e})=>{v("msgAll",e.checked)},children:e.use("settings_cache_all_messages")}),(0,c.jsx)(l.KzX,{size:8,children:(0,c.jsx)(l.wvv,{})}),(0,c.jsx)(l.Sc0,{defaultChecked:t.chatStats,onChange:({target:e})=>{v("chatStats",e.checked)},children:e.use("settings_cache_chat_stats")}),(0,c.jsx)(l.KzX,{size:8,children:(0,c.jsx)(l.wvv,{})}),(0,c.jsx)(l.Sc0,{defaultChecked:t.themes,onChange:({target:e})=>{v("themes",e.checked)},children:e.use("settings_cache_themes")}),(0,c.jsx)(l.KzX,{size:8,children:(0,c.jsx)(l.wvv,{})}),(0,c.jsx)(l.Sc0,{defaultChecked:t.localRename,onChange:({target:e})=>{v("localRename",e.checked)},children:e.use("settings_cache_local_rename")}),(0,c.jsx)(l.KzX,{size:8,children:(0,c.jsx)(l.wvv,{})}),(0,c.jsx)(l.Sc0,{defaultChecked:t.auth,description:e.use("settings_cache_auth_description"),onChange:({target:e})=>{v("auth",e.checked)},children:e.use("settings_cache_auth")}),(0,c.jsx)(l.KzX,{size:8,children:(0,c.jsx)(l.wvv,{})}),(0,c.jsx)(l.Sc0,{defaultChecked:t.authVKME,onChange:({target:e})=>{v("authVKME",e.checked)},children:e.use("settings_cache_auth_vkme")}),(0,c.jsx)(l.KzX,{size:8}),(0,c.jsx)(l.DzN,{onClick:()=>{m.showPopout((0,c.jsx)(l.V9m,{value:l.ODD.ANDROID,children:(0,c.jsx)(l.FcD,{actions:[{title:e.use("global_clear"),mode:"destructive",action:A},{title:e.use("global_cancel"),mode:"cancel"}],onClose:()=>m.hidePopout(),title:e.use("settings_confirm_action"),description:e.use("settings_confirm_clear_cache")})}))},disabled:C,children:e.use("global_clear")})]})},w=()=>{const e=(0,g.A)();return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(r.A,{backPage:m.JZ.root.main_0_0.settings,children:e.use("settings_section_clear_cache_title")}),(0,c.jsx)(h.A,{children:(0,c.jsx)(p,{})})]})};a()}catch(e){a(e)}})},31812:(e,t,s)=>{s.d(t,{default:()=>c});var a=s(98570);const c=async()=>{const e=(0,a.A)().browserApi;if(!e)throw new Error("browserApi not found");const t=e.storage;try{for(let e=localStorage.length-1;e>=0;e--){const t=localStorage.key(e);t&&(t.startsWith("vknLP")||t.startsWith("e4f8f7d4436d")||t.startsWith("posts_app_modules_@id:"))&&localStorage.removeItem(t)}}catch(e){console.error(e)}const s=[];for(const e in await t.local.getAll())e&&(e.startsWith("vknLP")||e.startsWith("e4f8f7d4436d")||e.startsWith("posts_app_modules_@id:"))&&s.push(e);await t.local.remove(s)}}}]);