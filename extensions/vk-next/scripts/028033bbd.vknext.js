"use strict";(globalThis.webpackChunkvknext=globalThis.webpackChunkvknext||[]).push([[8997],{7295:(e,t,n)=>{n.a(e,async(e,a)=>{try{n.d(t,{A:()=>m});var r=n(74848),s=n(39107),o=n(46512),c=n(36445),i=n(22779),l=n(33253),d=n(83018),u=n(49425),h=n(46558),g=e([c,i,l,d,u,h]);[c,i,l,d,u,h]=g.then?(await g)():g;const _=()=>{const[e,t]=(0,o.W)();return e?(0,r.jsx)(s.YJl,{children:(0,r.jsx)(s.qBl,{})}):t?(0,r.jsx)(c.A,{}):(0,r.jsxs)(s.YJl,{children:[(0,r.jsx)(u.A,{}),(0,r.jsx)(h.A,{})]})},m=()=>(0,r.jsx)(d.A,{children:(0,r.jsx)(l.A,{children:(0,r.jsx)(i.A,{children:(0,r.jsx)(o.A,{children:(0,r.jsx)(_,{})})})})});a()}catch(e){a(e)}})},7708:(e,t,n)=>{n.d(t,{A:()=>u});var a=n(74848),r=n(11157),s=n(39107),o=n(13742),c=n(68741),i=n(91691);const l="zRIhm_rzeRaOj2Bs",d="m8aAYX3glAEj5Q3G",u=({beforeClassname:e,backPage:t,hideButtonIsFirstPage:n,hideBackButtonInTablet:u,children:h,...g})=>{const _=(0,r.XC)(),m=(0,r.Gz)(),{width:v}=(0,o.A)();let x=n&&_&&(0,i.A)();return u&&(v||800)>768&&(x=!0),(0,a.jsx)(s.aOn,{before:!x&&(0,a.jsx)(s.Hy0,{onClick:async()=>{_?t?await m.replace(t):await m.push(c.JZ.root.main.home):await m.back()},className:(0,s.xWm)(l,e),hideLabelOnIOS:!0}),...g,children:(0,a.jsx)("div",{className:d,children:h})})}},8265:(e,t,n)=>{n.a(e,async(e,a)=>{try{n.d(t,{A:()=>l});var r=n(74848),s=n(8015),o=n(22549),c=n(39107),i=e([s,o]);[s,o]=i.then?(await i)():i;const l=()=>{const{backgroundSize:e,updateValue:t}=(0,o.A)("backgroundSize"),n=(0,s.A)(),a=[{label:n.use("settings_background_size_auto"),value:"auto"},{label:n.use("settings_background_size_cover"),value:"cover"},{label:n.use("settings_background_size_contain"),value:"contain"}];return(0,r.jsx)(c.eIh,{top:n.use("settings_background_size_form_name_label"),children:(0,r.jsx)(c.l6P,{options:a,defaultValue:e,onChange:e=>{const n=e.target.value;t(n)}})})};a()}catch(e){a(e)}})},13237:(e,t,n)=>{n.d(t,{A:()=>a});const a={BackgroundItem__container:"GRDowWgi1m87kcp_",BackgroundItem:"vJUwsw07oPk00Ago",BackgroundItem__wrapper:"_9aSthLBs87TBstHp",BackgroundItem__image:"zZvZynvEJVz7bf86",BackgroundItem__video:"AyqqaweLWOBzZdas",FormItem__noTopPadding:"D5YBXt_TXbZWv6sm",BackgroundItem__actions:"vsFaRq8iSWPYAlPg","BackgroundItem__actions--hover":"X7XxqaaLmXaY6tPn"}},14809:(e,t,n)=>{n.d(t,{A:()=>s});var a=n(96540);const r=function(){const e=(0,a.useRef)(!0);return e.current?(e.current=!1,!0):e.current};const s=function(e,t){const n=r();(0,a.useEffect)(()=>{if(!n)return e()},t)}},15033:(e,t,n)=>{n.d(t,{l:()=>r});var a=n(96540);const r=()=>{const[e,t]=(0,a.useState)({width:window.innerWidth,height:window.innerHeight,lastWidth:void 0,lastHeight:void 0}),n=()=>{t({lastWidth:e.width,lastHeight:e.height,width:window.innerWidth,height:window.innerHeight})};return(0,a.useEffect)(()=>{n()},[]),(0,a.useEffect)(()=>(window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)),[e]),e}},20126:(e,t,n)=>{n.d(t,{A:()=>a});const a=(e=window.screen.width,t=window.screen.height-170)=>{const n=(e,t)=>0===t?e:n(t,e%t),a=n(e,t);return`${e/a} / ${t/a}`}},20727:(e,t,n)=>{n.d(t,{A:()=>a});const a=e=>new Promise(t=>{const n=new Image;n.src=e,n.onload=()=>t(!0),n.onerror=()=>t(!1)})},22779:(e,t,n)=>{n.a(e,async(e,a)=>{try{n.d(t,{A:()=>g,p:()=>h});var r=n(74848),s=n(22549),o=n(99381),c=n(40414),i=n(14809),l=n(96540),d=e([s]);s=(d.then?(await d)():d)[0];const u=(0,l.createContext)([0,o.A]),h=()=>(0,l.useContext)(u),g=({children:e})=>{const{backgroundBlur:t,updateValue:n}=(0,s.A)("backgroundBlur"),[a,o]=(0,l.useState)(t),d=(0,c.A)(a,1e3);return(0,l.useEffect)(()=>o(t),[t]),(0,i.A)(()=>{n(d)},[d]),(0,r.jsx)(u.Provider,{value:[a,o],children:e})};a()}catch(e){a(e)}})},25763:(e,t,n)=>{n.d(t,{K:()=>a});var a=(0,n(78414).mT)("Icon20AddSquareOutline","add_square_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="add_square_outline_20"><path fill="currentColor" fill-rule="evenodd" d="M11.6 3.5H8.4c-1.145 0-1.913.001-2.505.05-.574.047-.849.13-1.03.223a2.5 2.5 0 0 0-1.093 1.092c-.092.181-.175.456-.222 1.03-.049.592-.05 1.36-.05 2.505v3.2c0 1.145.001 1.913.05 2.505.047.574.13.849.223 1.03a2.5 2.5 0 0 0 1.092 1.093c.181.092.456.176 1.03.222.592.049 1.36.05 2.505.05h3.2c1.145 0 1.913-.001 2.505-.05.574-.046.849-.13 1.03-.223a2.5 2.5 0 0 0 1.093-1.092c.092-.181.176-.456.222-1.03.049-.592.05-1.36.05-2.505V8.4c0-1.145-.001-1.913-.05-2.505-.046-.574-.13-.849-.223-1.03a2.5 2.5 0 0 0-1.092-1.092c-.181-.093-.456-.177-1.03-.224-.592-.048-1.36-.049-2.505-.049m-9.164.684C2 5.04 2 6.16 2 8.4v3.2c0 2.24 0 3.36.436 4.216a4 4 0 0 0 1.748 1.748C5.04 18 6.16 18 8.4 18h3.2c2.24 0 3.36 0 4.216-.436a4 4 0 0 0 1.748-1.748C18 14.96 18 13.84 18 11.6V8.4c0-2.24 0-3.36-.436-4.216a4 4 0 0 0-1.748-1.748C14.96 2 13.84 2 11.6 2H8.4c-2.24 0-3.36 0-4.216.436a4 4 0 0 0-1.748 1.748M10 6.004a.75.75 0 0 1 .75.75V9.25h2.496a.75.75 0 0 1 0 1.5H10.75v2.5a.75.75 0 0 1-1.5 0v-2.5H6.754a.75.75 0 0 1 0-1.5H9.25V6.753a.75.75 0 0 1 .75-.75" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},26089:(e,t,n)=>{n.d(t,{A:()=>a});var a=(0,n(78414).mT)("Icon24WarningTriangleOutline","warning_triangle_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="warning_triangle_outline_24"><g fill="currentColor"><path fill-rule="evenodd" d="M9.489 4.55c1.116-1.933 3.906-1.933 5.023 0l6.928 12c1.116 1.933-.28 4.35-2.512 4.35H5.072c-2.233 0-3.628-2.417-2.512-4.35zm3.464.9a1.1 1.1 0 0 0-1.906 0l-6.928 12a1.1 1.1 0 0 0 .953 1.65h13.856a1.1 1.1 0 0 0 .953-1.65z" clip-rule="evenodd" /><path fill-rule="evenodd" d="M12 8c.497 0 .9.374.9.836v4.828c0 .462-.403.836-.9.836s-.9-.374-.9-.836V8.836c0-.462.403-.836.9-.836" clip-rule="evenodd" /><path d="M13 16.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0" /></g></symbol>',24,24,!1,void 0)},26914:(e,t,n)=>{n.d(t,{A:()=>a});const a=()=>!1},27272:(e,t,n)=>{n.a(e,async(e,a)=>{try{n.d(t,{A:()=>l});var r=n(74848),s=n(8015),o=n(90275),c=n(94161),i=e([s]);s=(i.then?(await i)():i)[0];const l=()=>{const[e,,t]=(0,c.N)(),a=(0,s.A)();return(0,r.jsx)(o.vH,{onClick:async()=>{const e=(await Promise.resolve().then(n.bind(n,61619))).default;await e.deleteHistory(),t(await e.getHistory())},isLoading:e,children:a.use("settings_background_clear_my_wallpapers")})};a()}catch(e){a(e)}})},27514:(e,t,n)=>{n.d(t,{A:()=>a});const a=e=>void 0!==e&&!1!==e&&null!==e&&""!==e},27848:(e,t,n)=>{n.a(e,async(e,a)=>{try{n.d(t,{A:()=>h});var r=n(74848),s=n(8015),o=n(62952),c=n(68548),i=n(39107),l=n(96540),d=n(33253),u=e([s,d]);[s,d]=u.then?(await u)():u;const h=()=>{const[e,t]=(0,d.D)(),n=(0,s.A)(),a=(0,l.useMemo)(()=>Math.ceil(e/10),[e]),u=e===c.g.backgroundBrightness;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.eIh,{top:n.use("settings_background_brightness_form_name_label",{brightness:a}),children:(0,r.jsx)(i.Apm,{step:1,min:0,max:40,value:a,onChange:e=>{t(Math.ceil(10*e))}})}),(0,r.jsx)(i.eIh,{className:o.A.FormItem__noTopPadding,children:(0,r.jsx)(i.$nd,{size:"s",mode:"secondary",disabled:u,onClick:()=>{t(c.g.backgroundBrightness)},children:n.use("settings_background_set_default_value")})})]})};a()}catch(e){a(e)}})},33253:(e,t,n)=>{n.a(e,async(e,a)=>{try{n.d(t,{A:()=>g,D:()=>h});var r=n(74848),s=n(22549),o=n(99381),c=n(40414),i=n(14809),l=n(96540),d=e([s]);s=(d.then?(await d)():d)[0];const u=(0,l.createContext)([0,o.A]),h=()=>(0,l.useContext)(u),g=({children:e})=>{const{backgroundBrightness:t,updateValue:n}=(0,s.A)("backgroundBrightness"),[a,o]=(0,l.useState)(t),d=(0,c.A)(a,1e3);return(0,l.useEffect)(()=>o(t),[t]),(0,i.A)(()=>{n(d)},[d]),(0,r.jsx)(u.Provider,{value:[a,o],children:e})};a()}catch(e){a(e)}})},34029:(e,t,n)=>{n.a(e,async(e,a)=>{try{n.d(t,{A:()=>m});var r=n(74848),s=n(8015),o=n(61619),c=n(39107),i=n(96540),l=n(74225),d=n.n(l),u=n(63872),h=n(13237),g=n(94161),_=e([s,u]);[s,u]=_.then?(await _)():_;const m=()=>{const[e,t,n]=(0,g.N)(),a=(0,s.A)();return d()(async e=>{const t=await o.default.getHistory();e()&&n(t)},[]),(0,i.useEffect)(()=>o.default.addListener((e,t)=>{t?.history&&n(t.history)}),[]),e||null===t?(0,r.jsx)(c.qBl,{}):0===t.length?(0,r.jsx)(c.YJl,{children:(0,r.jsx)(c.OrA,{title:a.use("settings_background_not_found"),children:a.use("settings_background_my_wallpapers_description",{br:(0,r.jsx)("br",{})})})}):(0,r.jsx)(c.YJl,{separator:"hide",children:(0,r.jsx)("div",{className:h.A.BackgroundItem__container,children:t.map((e,t)=>e?(0,r.jsx)(u.A,{index:t,item:e},t):(0,r.jsx)(i.Fragment,{},t))})})};a()}catch(e){a(e)}})},36445:(e,t,n)=>{n.a(e,async(e,a)=>{try{n.d(t,{A:()=>b});var r=n(74848),s=n(22549),o=n(62952),c=n(57087),i=n(39107),l=n(46512),d=n(22779),u=n(33253),h=n(83018),g=n(44689),_=n(59133),m=n(20126),v=n(94083),x=e([s,d,u,h,g,_]);[s,d,u,h,g,_]=x.then?(await x)():x;const p=e=>"number"==typeof e,w=({blur:e,brightness:t,contrast:n})=>{const a=[];if(p(e)&&a.push(`blur(${e}px)`),p(t)&&a.push(`brightness(${t}%)`),p(n)&&a.push(`contrast(${n}%)`),a.length)return a.join("")},b=()=>{const[e,t]=(0,l.W)(),{backgroundSize:n}=(0,s.A)("backgroundSize"),{backgroundPosition:a}=(0,s.A)("backgroundPosition"),[x]=(0,d.p)(),[p]=(0,u.D)(),[b]=(0,h.I)(),[A,j]=(0,v.A)(),y=(0,c.kd)();return e||!t?null:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(i.YJl,{children:[!y&&(0,r.jsx)("div",{className:o.A.BackgroundViewer,children:(0,r.jsxs)("div",{className:o.A.BackgroundViewer__wrapper,style:{"--aspect-ratio":(0,m.A)(A,j),"--height":`${j}px`},children:["photo"===t?.type&&(0,r.jsx)("img",{src:t.url,style:{filter:w({blur:x,brightness:p,contrast:b}),objectFit:"auto"===n?"fill":n,objectPosition:a},className:o.A.BackgroundViewer__media}),"video"===t?.type&&(0,r.jsx)("video",{autoPlay:!0,muted:!0,disablePictureInPicture:!0,disableRemotePlayback:!0,loop:!0,className:o.A.BackgroundViewer__media,style:{filter:w({blur:x,brightness:p,contrast:b}),objectFit:"auto"===n?"fill":n,objectPosition:a},children:(0,r.jsx)("source",{src:t?.url,type:"video/mp4"})})]})}),(0,r.jsx)(_.A,{})]}),(0,r.jsx)(g.A,{})]})};a()}catch(e){a(e)}})},37851:(e,t,n)=>{n.d(t,{b:()=>s});var a=n(74848),r=(n(96540),n(22185));const s=e=>(0,a.jsx)(r.uC,{viewBox:"0 0 24 24",width:20,height:20,vkuiIconId:"external_link_outline_24",vkuiAttrs:{fill:"none"},vkuiProps:e,children:(0,a.jsxs)("g",{fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd",children:[(0,a.jsx)("path",{d:"M5.146 3.634c.762-.407 1.512-.534 3.082-.534H10.1a.9.9 0 1 1 0 1.8H8.228c-1.487 0-1.87.128-2.233.322q-.504.27-.773.773c-.194.362-.322.746-.322 2.233v7.544c0 1.487.128 1.87.322 2.233q.27.504.773.774c.362.193.746.321 2.233.321h7.544c1.487 0 1.87-.128 2.233-.321q.504-.27.774-.774c.193-.362.321-.746.321-2.233V13.9a.9.9 0 1 1 1.8 0v1.872c0 1.57-.127 2.32-.534 3.082a3.65 3.65 0 0 1-1.512 1.512c-.763.407-1.512.534-3.082.534H8.228c-1.57 0-2.32-.127-3.082-.534a3.65 3.65 0 0 1-1.512-1.512c-.407-.762-.534-1.512-.534-3.082V8.228c0-1.57.127-2.32.534-3.082a3.65 3.65 0 0 1 1.512-1.512"}),(0,a.jsx)("path",{d:"M14 4a.9.9 0 0 1 .9-.9H20a.9.9 0 0 1 .9.9v5.1a.9.9 0 1 1-1.8 0V6.173l-6.564 6.563a.9.9 0 1 1-1.272-1.272L17.827 4.9H14.9A.9.9 0 0 1 14 4"})]})})},40411:(e,t,n)=>{n.a(e,async(e,a)=>{try{n.d(t,{A:()=>m});var r=n(74848),s=n(56287),o=n(8015),c=n(90275),i=n(27514),l=n(99381),d=n(37851),u=n(73615),h=n(52509),g=n(39107),_=e([o]);o=(_.then?(await _)():_)[0];const m=({helpLink:e,actions:t})=>{const n=(0,o.A)(),a=(0,s.A)(),_=()=>{window.open(window.location.href),window.close()};return e||(0,i.A)(t)?(0,r.jsx)(c.Ku,{placement:"bottom-end",actions:(0,r.jsxs)(r.Fragment,{children:[(0,i.A)(t)&&(0,r.jsxs)(r.Fragment,{children:[t,(a||e)&&(0,r.jsx)(c.AS,{})]}),a&&(0,r.jsx)(c.vH,{onClick:_,leftIcon:(0,r.jsx)(d.b,{width:20,height:20}),children:n.use("settings_open_settings")}),e&&(0,r.jsx)(c.vH,{href:e,target:"_blank",leftIcon:(0,r.jsx)(u.V,{}),children:n.use("settings_menu_help_section")})]}),children:(0,r.jsx)(g.qAe,{onClick:l.A,children:(0,r.jsx)(h.z,{})})}):a?(0,r.jsx)(g.m_M,{description:n.use("settings_open_settings"),placement:"bottom",usePortal:!0,children:(0,r.jsx)(g.qAe,{onClick:_,children:(0,r.jsx)(d.b,{})})}):null};a()}catch(e){a(e)}})},40414:(e,t,n)=>{n.d(t,{A:()=>r});var a=n(96540);const r=function(e,t){const[n,r]=(0,a.useState)(e);return(0,a.useEffect)(()=>{const n=setTimeout(()=>{r(e)},t??500);return()=>{clearTimeout(n)}},[e,t]),n}},43027:(e,t,n)=>{n.d(t,{A:()=>a});const a=e=>{e.preventDefault?.(),e.stopPropagation?.(),e.stopImmediatePropagation?.()}},44689:(e,t,n)=>{n.a(e,async(e,a)=>{try{n.d(t,{A:()=>h});var r=n(74848),s=n(39107),o=n(82166),c=n(27848),i=n(79787),l=n(73179),d=n(8265),u=e([o,c,i,l,d]);[o,c,i,l,d]=u.then?(await u)():u;const h=()=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.YJl,{children:(0,r.jsxs)(s.gb$,{mode:"horizontal",children:[(0,r.jsx)(d.A,{}),(0,r.jsx)(l.A,{})]})}),(0,r.jsx)(s.YJl,{children:(0,r.jsx)(s.gb$,{children:(0,r.jsx)(o.A,{})})}),(0,r.jsx)(s.YJl,{children:(0,r.jsx)(s.gb$,{children:(0,r.jsx)(c.A,{})})}),(0,r.jsx)(s.YJl,{separator:"hide",children:(0,r.jsx)(s.gb$,{children:(0,r.jsx)(i.A,{})})})]});a()}catch(e){a(e)}})},46512:(e,t,n)=>{n.d(t,{A:()=>d,W:()=>l});var a=n(74848),r=n(99381),s=n(96540),o=n(74225),c=n.n(o);const i=(0,s.createContext)([!0,null,r.A]),l=()=>(0,s.useContext)(i),d=({children:e})=>{const[t,r]=(0,s.useState)(!0),[o,l]=(0,s.useState)(null);return c()(async e=>{const t=(await Promise.resolve().then(n.bind(n,61619))).default,a=await t.getCurrent();e()&&(l(a),r(!1))},[]),(0,a.jsx)(i.Provider,{value:[t,o,l],children:e})}},46558:(e,t,n)=>{n.a(e,async(e,a)=>{try{n.d(t,{A:()=>m});var r=n(74848),s=n(8015),o=n(57087),c=n(92046),i=n(26089),l=n(11157),d=n(39107),u=n(96540),h=n(46512),g=n(20727),_=e([s]);s=(_.then?(await _)():_)[0];const m=()=>{const[e,t]=(0,u.useState)(""),a=(0,s.A)(),[_,m]=(0,u.useState)(!1),[,,v]=(0,h.W)(),{showSnackbar:x,hideSnackbar:p}=(0,o.Qs)(),w=(0,l.Gz)(),b=0===e.length;return(0,u.useEffect)(()=>{if(!_)return;const e=setTimeout(()=>{x((0,r.jsx)(d.qb_,{duration:15e3,onClose:p,before:(0,r.jsx)(i.A,{fill:"var(--vkui--color_accent_orange--active)"}),children:a.use("settings_background_big_file_warning")}))},3e3);return()=>clearTimeout(e)},[_]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.eIh,{top:a.use("settings_background_direct_link"),children:(0,r.jsx)(d.pde,{placeholder:"https://static.vknext.net/test.png",value:e,onChange:({target:e})=>t(e.value)})}),(0,r.jsx)(d.eIh,{style:{paddingTop:0},children:(0,r.jsx)(d.$nd,{disabled:b,size:"m",onClick:async()=>{if(!e)return;m(!0),w.showPopout((0,r.jsx)(d.WHT,{state:"loading"}));const t=await(0,g.A)(e),a=(await Promise.resolve().then(n.bind(n,61619))).default,s={type:t?"photo":"video",url:e};await a.setCurrent(s),p(),m(!1),v(await a.getCurrent()),w.showPopout((0,r.jsx)(d.WHT,{state:"done"})),await(0,c.c)(1e3),w.hidePopout()},loading:_,children:a.use("settings_background_upload")})})]})};a()}catch(e){a(e)}})},48797:(e,t,n)=>{n.d(t,{A:()=>o});var a=n(74848),r=n(39107),s=n(58006);const o=({children:e,isTabs:t=!1,style:n={},...o})=>{const c=(0,s.A)({isTabs:t});return n.maxHeight||(n.maxHeight=c),(0,a.jsx)(r.guY,{style:n,...o,children:e})}},49425:(e,t,n)=>{n.a(e,async(e,a)=>{try{n.d(t,{A:()=>b});var r=n(74848),s=n(96540),o=n(39107),c=n(98001),i=n(52032),l=n(74225),d=n.n(l),u=n(46512),h=n(84851),g=n(43027),_=n(8015),m=n(26914),v=n(57087),x=n(79369),p=n(62952),w=e([_,x]);[_,x]=w.then?(await w)():w;const b=()=>{const e=(0,_.A)(),[t,a]=(0,s.useState)(null),[l,w]=(0,s.useState)(!1),[,,b]=(0,u.W)(),{showSnackbar:A,hideSnackbar:j}=(0,v.Qs)(),y=t=>{if(!t||0===t.length)return;const n=t[0];(0,h.A)(n.type)?a(n):A((0,r.jsx)(o.qb_,{duration:2e3,onClose:j,before:(0,r.jsx)(i.E,{fill:"var(--vkui--color_accent_red)"}),children:e.use("settings_background_unknown_file_type")}))};return d()(async e=>{if(!t)return;const a=new FileReader;a.onload=async a=>{if(!a.target)return;const r=a.target.result,s=t.type.startsWith("image/"),o=(await Promise.resolve().then(n.bind(n,61619))).default,c={type:s?"photo":"video",url:r};e()&&(await o.setCurrent(c),b(await o.getCurrent()))},a.readAsDataURL(t)},[t]),(0,r.jsx)(o.iau,{children:(0,r.jsxs)("div",{className:(0,o.xWm)(p.A.DropArea,l&&p.A.DropArea__dragging),onDragOver:e=>{e.preventDefault(),w(!0)},onDragLeave:()=>{w(!1)},onDrop:e=>{e.preventDefault(),w(!1);const t=e.dataTransfer.files;y(t)},children:[(0,r.jsx)("span",{className:p.A.DropArea__text,children:e.use("settings_background_drop_file")}),(0,r.jsx)(o.ZHH,{before:(0,r.jsx)(c.R,{}),accept:"image/*,video/mp4",onClick:e=>{(0,m.A)()&&((0,g.A)(e),A((0,r.jsx)(x.A,{})))},onChange:e=>{const t=e.target.files;y(t)},size:"m",children:e.use("settings_background_select_file")})]})})};a()}catch(e){a(e)}})},52032:(e,t,n)=>{n.d(t,{E:()=>a});var a=(0,n(78414).mT)("Icon24ErrorCircle","error_circle_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="error_circle_24"><path fill-rule="evenodd" d="M22 12c0 5.52-4.48 10-10 10S2 17.52 2 12 6.48 2 12 2s10 4.48 10 10m-9 0V8a1 1 0 1 0-2 0v4a1 1 0 1 0 2 0m-1 5.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},52319:(e,t,n)=>{n.d(t,{_:()=>a});var a=(0,n(78414).mT)("Icon28ErrorCircleOutline","error_circle_outline_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 28 28" id="error_circle_outline_28"><path fill="currentColor" d="M14 2c6.627 0 12 5.373 12 12s-5.373 12-12 12S2 20.627 2 14 7.373 2 14 2m0 2C8.477 4 4 8.477 4 14s4.477 10 10 10 10-4.477 10-10S19.523 4 14 4m0 13.6a1.4 1.4 0 1 1 0 2.8 1.4 1.4 0 0 1 0-2.8m.074-9.6c.237 0 .386.037.517.107q.196.106.302.302c.07.13.107.28.107.517v6.148c0 .237-.037.386-.107.517a.73.73 0 0 1-.302.302c-.13.07-.28.107-.517.107h-.148c-.237 0-.386-.037-.517-.107a.73.73 0 0 1-.302-.302c-.07-.13-.107-.28-.107-.517V8.926c0-.237.037-.386.107-.517a.73.73 0 0 1 .302-.302c.13-.07.28-.107.517-.107z" /></symbol>',28,28,!1,void 0)},52509:(e,t,n)=>{n.d(t,{z:()=>a});var a=(0,n(78414).mT)("Icon24MoreHorizontal","more_horizontal_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="more_horizontal_24"><path d="M18 10c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2m-6 4c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m-6 0c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2" /></symbol>',24,24,!1,void 0)},56287:(e,t,n)=>{n.d(t,{A:()=>s});var a=n(91691),r=n(15033);const s=()=>{const e=(0,r.l)();return((e.width||0)<=800||(e.height||0)<=600)&&!(0,a.A)()}},59133:(e,t,n)=>{n.a(e,async(e,a)=>{try{n.d(t,{A:()=>u});var r=n(74848),s=n(39107),o=n(25763),c=n(90639),i=n(46512),l=n(8015),d=e([l]);l=(d.then?(await d)():d)[0];const u=()=>{const e=(0,l.A)(),[,,t]=(0,i.W)(),a=async()=>{const e=(await Promise.resolve().then(n.bind(n,61619))).default;await e.deleteCurrent();const a=await e.getCurrent();t(a)};return(0,r.jsx)(s.gb$,{mode:"horizontal",children:(0,r.jsxs)(s.e2v,{stretched:!0,children:[(0,r.jsx)(s.$nd,{stretched:!0,mode:"secondary",before:(0,r.jsx)(o.K,{}),size:"m",onClick:async()=>await a(),children:e.use("settings_background_upload_new")}),(0,r.jsx)(s.$nd,{stretched:!0,mode:"secondary",before:(0,r.jsx)(c.z,{}),size:"m",style:{color:"var(--vkui--color_accent_red)"},onClick:async()=>await a(),children:e.use("global_remove")})]})})};a()}catch(e){a(e)}})},61619:(e,t,n)=>{n.r(t),n.d(t,{default:()=>l});var a=n(387),r=n(98570);const s=async e=>{const{storage:t}=(0,r.A)().browserApi;return await t.local.set({wallpaper:e})};let o,c=0;const i=()=>(o&&(0,a.A)()-c<=1||(o=new Promise(async e=>{const{storage:t}=(0,r.A)().browserApi;e((await t.local.get("wallpaper")).wallpaper||{})}),c=(0,a.A)()),o),l={getCurrent:async()=>(await i()).current||null,async setCurrent(e){const t=await i();t.history||(t.history=[]),t.current&&t.history.unshift(t.current);const n=t.history.findIndex(t=>t.type===e.type&&t.url===e.url);return-1!==n&&t.history.splice(n,1),t.current=e,await s(t),!0},async deleteCurrent(){const e=await i();if(e.history||(e.history=[]),e.current){const t=e.current;-1===e.history.findIndex(e=>e.type===t.type&&e.url===t.url)&&e.history.unshift(t)}return e.current=null,await s(e),!0},getHistory:async()=>(await i()).history||[],async setHistory(e){const t=await i();return t.history=e,await s(t),!0},async deleteHistory(){const e=await i();return e.current&&e.history&&e.history.unshift(e.current),e.history=[],await s(e),!0},addListener(e){const{storage:t}=(0,r.A)().browserApi;return t.local.onChanged.addListener("wallpaper",t=>e(t.oldValue||{},t.newValue||{}))}}},62952:(e,t,n)=>{n.d(t,{A:()=>a});const a={DropArea:"rqbQd5JgCjpgRsXY",DropArea__dragging:"gpWA5tNjFcWHpv97",DropArea__text:"siY_gawdjEr5rhkF",BackgroundViewer__wrapper:"FnBjIvL_w2l0ecOC",BackgroundViewer__media:"fBh_t4_9R8bL6oe0",FormItem__noTopPadding:"gv1eRIEGvnLrvIve"}},63872:(e,t,n)=>{n.a(e,async(e,a)=>{try{n.d(t,{A:()=>_});var r=n(74848),s=n(96540),o=n(39107),c=n(25763),i=n(90639),l=n(94161),d=n(13237),u=n(8015),h=e([u]);u=(h.then?(await h)():h)[0];const g=({hovered:e,item:t,index:a})=>{const[,s,h]=(0,l.N)(),g=(0,u.A)();return s?(0,r.jsx)("div",{className:(0,o.xWm)(d.A.BackgroundItem__actions,e&&d.A["BackgroundItem__actions--hover"]),children:(0,r.jsxs)(o.e2v,{mode:"vertical",align:"center",children:[(0,r.jsx)(o.$nd,{appearance:"overlay",before:(0,r.jsx)(c.K,{}),onClick:async()=>{const e=(await Promise.resolve().then(n.bind(n,61619))).default;await e.setCurrent(t)},children:g.use("global_install")}),(0,r.jsx)(o.$nd,{appearance:"overlay",before:(0,r.jsx)(i.z,{}),style:{color:"var(--vkui--color_accent_red)"},onClick:async()=>{if(!s)return;const e=[...s];e.splice(a,1);const t=(await Promise.resolve().then(n.bind(n,61619))).default;await t.setHistory(e),h(e)},children:g.use("global_remove")})]})}):null},_=({item:e,index:t})=>{const[n,a]=(0,s.useState)(!1),o=()=>{a(!0)},c=()=>{a(!1)};return"photo"===e.type?(0,r.jsx)("div",{className:d.A.BackgroundItem,onMouseEnter:o,onMouseLeave:c,children:(0,r.jsxs)("div",{className:d.A.BackgroundItem__wrapper,children:[(0,r.jsx)(g,{hovered:n,item:e,index:t}),(0,r.jsx)("div",{style:{backgroundImage:`url("${e.url}")`},className:d.A.BackgroundItem__image})]})}):(0,r.jsx)("div",{className:d.A.BackgroundItem,onMouseEnter:o,onMouseLeave:c,children:(0,r.jsxs)("div",{className:d.A.BackgroundItem__wrapper,children:[(0,r.jsx)(g,{hovered:n,item:e,index:t}),(0,r.jsx)("video",{autoPlay:!0,muted:!0,disablePictureInPicture:!0,disableRemotePlayback:!0,loop:!0,className:d.A.BackgroundItem__video,children:(0,r.jsx)("source",{src:e.url,type:"video/mp4"})})]})})};a()}catch(e){a(e)}})},73179:(e,t,n)=>{n.a(e,async(e,a)=>{try{n.d(t,{A:()=>u});var r=n(74848),s=n(8015),o=n(22549),c=n(39107),i=n(96540),l=e([s,o]);[s,o]=l.then?(await l)():l;const d=["center","top","bottom","left top","left","left bottom","right top","right","right bottom"],u=()=>{const{backgroundPosition:e,updateValue:t}=(0,o.A)("backgroundPosition"),n=(0,s.A)(),a=(0,i.useMemo)(()=>d.map(e=>({label:n.use(`settings_background_position_${e.replace(" ","_")}`),value:e})),[n]);return(0,r.jsx)(c.eIh,{top:n.use("settings_background_position_form_name_label"),children:(0,r.jsx)(c.l6P,{options:a,defaultValue:e,onChange:e=>{const n=e.target.value;t(n)}})})};a()}catch(e){a(e)}})},73615:(e,t,n)=>{n.d(t,{V:()=>a});var a=(0,n(78414).mT)("Icon20HelpOutline","help_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="help_outline_20"><g fill="currentColor"><path d="M10 6.25a1.25 1.25 0 0 0-1.21.937.75.75 0 0 1-1.453-.374 2.75 2.75 0 0 1 5.413.687c0 1.211-.654 1.84-1.144 2.298l-.009.008c-.478.446-.772.72-.855 1.3a.75.75 0 0 1-1.484-.212c.158-1.11.803-1.709 1.256-2.13l.068-.062c.447-.417.668-.663.668-1.202 0-.69-.56-1.25-1.25-1.25M10 15a1 1 0 1 0 0-2 1 1 0 0 0 0 2" /><path fill-rule="evenodd" d="M10 1.5a8.5 8.5 0 1 0 0 17 8.5 8.5 0 0 0 0-17M3 10a7 7 0 1 0 14 0 7 7 0 0 0-14 0" clip-rule="evenodd" /></g></symbol>',20,20,!1,void 0)},79369:(e,t,n)=>{n.a(e,async(e,a)=>{try{n.d(t,{A:()=>u});var r=n(74848),s=n(61699),o=n(8015),c=n(57087),i=n(52319),l=n(39107),d=e([o]);o=(d.then?(await d)():d)[0];const u=()=>{const e=(0,o.A)(),{hideSnackbar:t}=(0,c.Qs)(),{createTab:n}=(0,s.A)();return(0,r.jsx)(l.qb_,{onClose:t,duration:7e3,before:(0,r.jsx)(i._,{fill:"var(--vkui--color_icon_negative)"}),action:e.use("global_open"),onActionClick:()=>{n({url:window.location.href,active:!0}),window.close()},children:e.use("settings_file_input_is_not_supported")})};a()}catch(e){a(e)}})},79787:(e,t,n)=>{n.a(e,async(e,a)=>{try{n.d(t,{A:()=>h});var r=n(74848),s=n(8015),o=n(62952),c=n(68548),i=n(39107),l=n(96540),d=n(83018),u=e([s,d]);[s,d]=u.then?(await u)():u;const h=()=>{const[e,t]=(0,d.I)(),n=(0,s.A)(),a=(0,l.useMemo)(()=>Math.ceil(e/10),[e]),u=e===c.g.backgroundContrast;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.eIh,{top:n.use("settings_background_contrast_form_name_label",{contrast:a}),children:(0,r.jsx)(i.Apm,{step:1,min:0,max:40,value:a,onChange:e=>{t(Math.ceil(10*e))}})}),(0,r.jsx)(i.eIh,{className:o.A.FormItem__noTopPadding,children:(0,r.jsx)(i.$nd,{size:"s",mode:"secondary",disabled:u,onClick:()=>{t(c.g.backgroundContrast)},children:n.use("settings_background_set_default_value")})})]})};a()}catch(e){a(e)}})},82166:(e,t,n)=>{n.a(e,async(e,a)=>{try{n.d(t,{A:()=>u});var r=n(74848),s=n(8015),o=n(62952),c=n(68548),i=n(39107),l=n(22779),d=e([s,l]);[s,l]=d.then?(await d)():d;const u=()=>{const[e,t]=(0,l.p)(),n=(0,s.A)(),a=e===c.g.backgroundBlur;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.eIh,{top:n.use("settings_background_blur_form_name_label",{blur:e}),children:(0,r.jsx)(i.Apm,{step:1,min:0,max:10,value:e,onChange:t})}),(0,r.jsx)(i.eIh,{className:o.A.FormItem__noTopPadding,children:(0,r.jsx)(i.$nd,{size:"s",mode:"secondary",disabled:a,onClick:()=>{t(c.g.backgroundBlur)},children:n.use("settings_background_set_default_value")})})]})};a()}catch(e){a(e)}})},83018:(e,t,n)=>{n.a(e,async(e,a)=>{try{n.d(t,{A:()=>g,I:()=>h});var r=n(74848),s=n(22549),o=n(99381),c=n(40414),i=n(14809),l=n(96540),d=e([s]);s=(d.then?(await d)():d)[0];const u=(0,l.createContext)([0,o.A]),h=()=>(0,l.useContext)(u),g=({children:e})=>{const{backgroundContrast:t,updateValue:n}=(0,s.A)("backgroundContrast"),[a,o]=(0,l.useState)(t),d=(0,c.A)(a,1e3);return(0,l.useEffect)(()=>o(t),[t]),(0,i.A)(()=>{n(d)},[d]),(0,r.jsx)(u.Provider,{value:[a,o],children:e})};a()}catch(e){a(e)}})},84851:(e,t,n)=>{n.d(t,{A:()=>r});const a=["image/jpeg","image/png","image/gif","video/mp4"],r=e=>a.includes(e)},88997:(e,t,n)=>{n.a(e,async(e,a)=>{try{n.r(t),n.d(t,{default:()=>w});var r=n(74848),s=n(7708),o=n(40411),c=n(48797),i=n(8015),l=n(68741),d=n(11157),u=n(39107),h=n(27272),g=n(7295),_=n(34029),m=n(94161),v=e([o,i,h,g,_]);[o,i,h,g,_]=v.then?(await v)():v;const x=()=>{const e=(0,d.Gz)(),{tab:t="current"}=(0,d.Gu)(),n=(0,i.A)();return(0,r.jsx)(u.tUM,{mode:"default",children:(0,r.jsxs)(u.ox2,{children:[(0,r.jsx)(u.ORv,{onClick:()=>{e.replace(l.JZ.root.main_0.background.current)},selected:"current"===t,children:n.use("settings_background_tab_current_wallpaper")}),(0,r.jsx)(u.ORv,{onClick:()=>{e.replace(l.JZ.root.main_0.background.saved)},selected:"saved"===t,children:n.use("settings_background_tab_my_wallpapers")})]})})},p=()=>{const{tab:e="current"}=(0,d.Gu)();return"current"===e?(0,r.jsx)(g.A,{}):"saved"===e?(0,r.jsx)(_.A,{}):null},w=()=>(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(m.A,{children:[(0,r.jsx)(s.A,{backPage:l.JZ.root.main.appearance,after:(0,r.jsx)(o.A,{actions:(0,r.jsx)(h.A,{})}),children:(0,r.jsx)(x,{})}),(0,r.jsx)(c.A,{children:(0,r.jsx)(p,{})})]})});a()}catch(e){a(e)}})},90639:(e,t,n)=>{n.d(t,{z:()=>a});var a=(0,n(78414).mT)("Icon20DeleteOutline","delete_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="delete_outline_20"><path fill-rule="evenodd" d="M6.837 4H2.75a.75.75 0 0 0 0 1.5h.545l.907 9.248c.051.523.094.96.157 1.314.066.37.163.711.353 1.028a2.9 2.9 0 0 0 1.247 1.131c.334.158.682.222 1.058.25.36.029.797.029 1.323.029h3.32c.526 0 .964 0 1.323-.028.376-.03.724-.093 1.058-.25a2.9 2.9 0 0 0 1.247-1.132c.19-.317.287-.657.353-1.028.063-.355.106-.79.157-1.314l.907-9.248h.545a.75.75 0 0 0 0-1.5h-4.087a3.25 3.25 0 0 0-6.326 0m1.581 0h3.164a1.751 1.751 0 0 0-3.164 0m6.78 1.5H4.802l.89 9.072c.054.56.091.938.143 1.228.05.281.104.422.162.52a1.4 1.4 0 0 0 .603.546c.102.048.248.088.533.11.294.024.673.024 1.235.024h3.262c.562 0 .941 0 1.235-.023.285-.023.43-.063.533-.111a1.4 1.4 0 0 0 .603-.547c.058-.097.112-.238.162-.52.052-.29.09-.667.144-1.226l.89-9.073Zm-2.886 2.002a.75.75 0 0 1 .685.81l-.5 6.003a.75.75 0 0 1-1.494-.124l.5-6.003a.75.75 0 0 1 .81-.686Zm-4.624 0a.75.75 0 0 1 .81.686l.5 6.002a.75.75 0 0 1-1.495.125l-.5-6.003a.75.75 0 0 1 .685-.81" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},94083:(e,t,n)=>{n.d(t,{A:()=>c});var a=n(61699),r=n(96540),s=n(74225),o=n.n(s);const c=()=>{const[e,t]=(0,r.useState)(1920),[n,s]=(0,r.useState)(1080),{queryTab:c}=(0,a.A)();return o()(async e=>{if(!c)return;const n=(await c({active:!0,currentWindow:!0}))[0];e()&&(n.height&&s(n.height),n.width&&t(n.width))},[c]),(0,r.useEffect)(()=>{if(c)return;const e=()=>{t(window.innerWidth),s(window.innerHeight)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[c]),[e,n]}},94161:(e,t,n)=>{n.d(t,{A:()=>d,N:()=>l});var a=n(74848),r=n(99381),s=n(96540),o=n(74225),c=n.n(o);const i=(0,s.createContext)([!0,null,r.A]),l=()=>(0,s.useContext)(i),d=({children:e})=>{const[t,r]=(0,s.useState)(!0),[o,l]=(0,s.useState)(null);return c()(async e=>{const t=(await Promise.resolve().then(n.bind(n,61619))).default,a=await t.getHistory();e()&&(l(a),r(!1))},[]),(0,a.jsx)(i.Provider,{value:[t,o,l],children:e})}},98001:(e,t,n)=>{n.d(t,{R:()=>a});var a=(0,n(78414).mT)("Icon20DocumentOutline","document_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="document_outline_20"><path fill-rule="evenodd" d="M10.175 1.5H9c-.806 0-1.465.006-2.01.05-.63.052-1.172.16-1.67.413a4.25 4.25 0 0 0-1.857 1.858c-.253.497-.361 1.04-.413 1.67C3 6.103 3 6.864 3 7.816v4.366c0 .952 0 1.713.05 2.327.052.63.16 1.172.413 1.67a4.25 4.25 0 0 0 1.858 1.857c.497.253 1.04.361 1.67.413.613.05 1.374.05 2.326.05h1.366c.952 0 1.713 0 2.327-.05.63-.052 1.172-.16 1.67-.413a4.25 4.25 0 0 0 1.857-1.857c.253-.498.361-1.04.413-1.67.05-.614.05-1.375.05-2.327V8.325c0-.489 0-.733-.055-.963q-.075-.309-.24-.579c-.123-.201-.296-.374-.642-.72l-3.626-3.626c-.346-.346-.519-.519-.72-.642a2 2 0 0 0-.579-.24c-.23-.055-.474-.055-.963-.055M15.5 12.15c0 .992 0 1.692-.045 2.238-.044.537-.127.86-.255 1.11A2.75 2.75 0 0 1 14 16.7c-.252.128-.574.21-1.111.255-.546.044-1.245.045-2.238.045h-1.3c-.992 0-1.692 0-2.238-.045-.537-.044-.86-.127-1.11-.255A2.75 2.75 0 0 1 4.8 15.5c-.128-.252-.21-.574-.255-1.111-.044-.546-.045-1.245-.045-2.238v-4.3c0-.992 0-1.692.045-2.238.044-.537.127-.86.255-1.11A2.75 2.75 0 0 1 6.002 3.3c.25-.128.573-.21 1.11-.255C7.658 3.001 8.358 3 9.35 3H10v2.35c0 .409 0 .761.024 1.051.026.306.083.61.238.902.21.398.537.724.935.935.291.155.596.212.902.238.29.024.642.024 1.051.024h2.35zM14.879 7 11.5 3.621V5.32c0 .447 0 .736.02.955.017.21.047.288.067.326a.75.75 0 0 0 .312.312c.038.02.116.05.326.068.22.018.508.019.955.019z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)}}]);