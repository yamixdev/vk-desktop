"use strict";(globalThis.webpackChunkvknext=globalThis.webpackChunkvknext||[]).push([[4199],{7646:(e,n,s)=>{s.d(n,{A:()=>c});var t=s(74848),o=s(39107),i=s(42335);const c=({className:e,children:n,getRootRef:s,useScrollView:c,...a})=>c?(0,t.jsx)(o.guY,{getRootRef:s,className:(0,o.xWm)(i.A.ActionsMenu,e),children:n}):(0,t.jsx)("div",{ref:s,...a,className:(0,o.xWm)(i.A.ActionsMenu,e),children:n})},22860:(e,n,s)=>{s.d(n,{A:()=>a});var t=s(74848),o=s(75623),i=s(39107),c=s(7646);const a=({children:e,actions:n,actionsMenuClassName:s,hideOnClick:a=!0,disabled:r=!1,useScrollView:l=!1,...u})=>r?e:(0,t.jsx)(o.A,{content:(0,t.jsx)(c.A,{useScrollView:l,className:(0,i.xWm)(s),children:n}),noBackground:!0,hideOnClick:a,...u,children:e})},42335:(e,n,s)=>{s.d(n,{A:()=>t});const t={ActionsMenu:"oXPVlZtlcjoi6d8e"}},48336:(e,n,s)=>{s.a(e,async(e,t)=>{try{s.d(n,{default:()=>j});var o=s(74848),i=s(3178),c=s(39107),a=s(96540),r=s(74225),l=s.n(r),u=s(90275),A=s(89230),d=s(7618),h=s(99381),m=s(84833),g=s(67078),f=s(87675),x=s(1003),v=s(40473),p=e([f,v]);[f,v]=p.then?(await p)():p;const k=(0,a.createContext)([null,h.A]),w=()=>{const[e]=(0,a.useContext)(k),n=(0,f.A)(),[s,t]=(0,a.useState)(!1),[i,r]=(0,a.useState)(null),[u,h]=(0,a.useState)([]);return(0,a.useLayoutEffect)(()=>{window.stManager&&window.stManager.add(window.stDeps["/css/al/im.css"])},[]),l()(async n=>{if(null===e)return;if(!e.length)return t(!0);const s={},o=e[0].from_id;if(o){if(d.z.isUserId(o)){const e=(await window.vkApi.api("users.get",{user_ids:o,fields:"photo_50"}))[0];e.name=`${e.first_name} ${e.last_name}`,s[o]=e}else{let e=await window.vkApi.api("groups.getById",{group_ids:-o,fields:"photo_50"});e=(e.groups||e)[0],s[o]=e}n()&&(r(s),h(e))}},[e]),s?(0,o.jsx)(c.OrA,{children:n.use("global_not_found")}):u.length?(0,o.jsx)(v.A,{messages:u,users:i,isEdit:!0}):(0,o.jsx)(c.YJl,{children:[...Array(5).keys()].map(e=>(0,o.jsx)(A.A,{},e))})},_=({messageId:e})=>{const[n,t]=(0,a.useContext)(k),[r,l]=(0,a.useState)(!1),A=(0,f.A)(),d=(0,x.A)();return(0,a.useEffect)(()=>{if(!n)return l(!1);Object.keys(n).length?l(!0):l(!1)},[n]),r?(0,o.jsx)(u.Ku,{trigger:"hover",placement:"bottom-end",actions:(0,o.jsx)(u.vH,{onClick:async()=>{(await s.e(1691).then(s.bind(s,31691))).default.setMessages(`${d}_${e}`,[]),t([]),(0,g.A)({type:"done",text:A.use("vkcom_messages_history_cleared")}),l(!1)},children:A.use("vkcom_messages_history_clear")}),children:(0,o.jsx)(c.qAe,{"aria-label":A.use("global_close"),onClick:h.A,hasActive:!1,children:(0,o.jsx)(i.o,{})})}):null},j=({messageId:e})=>{const[n,t]=(0,a.useState)(null),i=(0,f.A)();return l()(async n=>{const o=(await s.e(1691).then(s.bind(s,31691))).default,i=(0,x.A)(),c=await o.getMessages(`${i}_${e}`,[]);n()&&t(c)},[]),(0,o.jsx)(k.Provider,{value:[n,t],children:(0,o.jsx)(m.A,{header:(0,o.jsx)(c.aO9,{after:(0,o.jsx)(_,{messageId:e}),children:i.use("vkcom_message_history")}),size:500,children:(0,o.jsx)(w,{})})})};t()}catch(e){t(e)}})},61166:(e,n,s)=>{s.d(n,{A:()=>t});const t={PopoverReforged:"V5vFILKwsuTAoDXp","reforged-anim-fade-in":"aKnVnnmt_OsWj600","reforged-anim-fade-out":"uvPWUxQQgpV6cgFC","PopoverReforged--noBackground":"h4DVtB6f3FyJCExI"}},62882:(e,n,s)=>{s.d(n,{A:()=>r});var t=s(74848),o=s(39107),i=s(53339);const c={mini:i.A["ActionsMenuAction--size-mini"],large:i.A["ActionsMenuAction--size-large"],regular:i.A["ActionsMenuAction--size-regular"],max:i.A["ActionsMenuAction--size-max"]},a={primary:i.A["ActionsMenuAction--primary"],secondary:i.A["ActionsMenuAction--secondary"],danger:i.A["ActionsMenuAction--danger"],warning:i.A["ActionsMenuAction--warning"]},r=({leftIcon:e,rightIcon:n,title:s,subtitle:r,type:l="secondary",size:u="regular",isActive:A=!1,hasHover:d=!0,isLoading:h,className:m,onClick:g,titleClassName:f,getRootRef:x,href:v,Component:p=(v?"a":"button"),children:k,multiline:w=!1,..._})=>(0,t.jsxs)(p,{className:(0,o.xWm)(i.A.ActionsMenuAction,d&&i.A["ActionsMenuAction--hover"],(g||d||v)&&i.A["ActionsMenuAction--clickable"],a[l],h&&i.A["ActionsMenuAction--loading"],A&&i.A["ActionsMenuAction--active"],w&&i.A["ActionsMenuAction--multiline"],c[u],m),onClick:h?void 0:g,ref:x,href:v,..._,children:[e&&(0,t.jsx)("i",{className:i.A.ActionsMenuAction__icon,children:e}),(0,t.jsxs)("span",{title:s,className:(0,o.xWm)(i.A.ActionsMenuAction__title,f),children:[k,r&&(0,t.jsx)("span",{className:i.A.ActionsMenuAction__subtitle,children:r})]}),n&&(0,t.jsx)("i",{className:i.A.ActionsMenuAction__icon,children:n})]})},74225:(e,n,s)=>{var t=s(96540);function o(e,n,s){var o="function"==typeof n;t.useEffect(function(){var s,t=!0,i=e(function(){return t});return Promise.resolve(i).then(function(e){s=e}),function(){t=!1,o&&n(s)}},o?s:n)}e.exports=o,e.exports.useAsyncEffect=o},75623:(e,n,s)=>{s.d(n,{A:()=>a});var t=s(74848),o=s(39107),i=s(96540),c=s(61166);const a=({hideOnClick:e=!1,noBackground:n=!1,mode:s,onClick:a,onShownChange:r,className:l,contentWrapperClassName:u,shown:A,content:d,...h})=>{const[m,g]=(0,i.useState)(!1),f=(0,i.useRef)(null),x=(0,i.useRef)(null),v=(0,i.useCallback)(e=>{e?g(!0):f.current=setTimeout(()=>{g(!1)},100),r?.(e)},[s,r,g]);return(0,i.useEffect)(()=>{"boolean"==typeof A&&v(A)},[A,v]),(0,t.jsx)(o.AMh,{shown:m,className:(0,o.xWm)(c.A.PopoverReforged,n&&c.A["PopoverReforged--noBackground"],l),onShownChange:v,onClick:e=>{if("side"===s&&f.current)clearTimeout(f.current);else try{a?.(e)}catch(e){console.error(e)}},content:(0,t.jsx)("div",{ref:x,className:(0,o.xWm)(u),onClick:n=>{e&&x.current?.contains(n.target)&&g(!1)},children:d}),...h})}},83558:(e,n,s)=>{s.d(n,{A:()=>c});var t=s(74848),o=s(39107),i=s(44511);const c=({getRootRef:e,className:n,...s})=>(0,t.jsx)("div",{role:"separator",className:(0,o.xWm)(i.A.ActionsMenuActionSeparator,n),ref:e,...s})},87675:(e,n,s)=>{s.a(e,async(e,t)=>{try{s.d(n,{A:()=>i});var o=s(93819);const e=await o.A,i=()=>e;t()}catch(e){t(e)}},1)},90275:(e,n,s)=>{s.d(n,{AS:()=>o.A,Ku:()=>i.A,vH:()=>t.A});s(7646);var t=s(62882),o=s(83558),i=s(22860)}}]);