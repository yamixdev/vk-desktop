"use strict";(globalThis.webpackChunkvknext=globalThis.webpackChunkvknext||[]).push([[5225],{2346:(e,t,n)=>{n.d(t,{A:()=>s});const s=(0,n(96540).createContext)(null)},15200:(e,t,n)=>{n.d(t,{A:()=>o});var s=n(96540),r=n(2346);const o=()=>{const e=(0,s.useContext)(r.A);if(!e)throw new Error("useConfirmList must be used within a ConfirmListProvider");return e}},19171:(e,t,n)=>{n.d(t,{A:()=>s});const s=new Map},29783:(e,t,n)=>{n.a(e,async(e,s)=>{try{n.d(t,{A:()=>A});var r=n(74848),o=n(45880),i=n(58006),a=n(8015),l=n(39107),c=n(88597),u=n(39044),d=n(15200),f=e([a]);a=(f.then?(await f)():f)[0];const h=c.B8,p=({ListItem:e,width:t,height:n})=>{const{filteredItems:s}=(0,d.A)(),o=(0,a.A)(),i=n-16-60-52;return 0===s.length?(0,r.jsx)(l.OrA,{style:{width:t,height:i},children:o.use("global_not_found")}):(0,r.jsx)(h,{width:t,height:i,rowHeight:52,rowCount:s.length,rowRenderer:({index:t,style:n})=>(0,r.jsx)("div",{style:n,children:(0,r.jsx)(e,{index:t})},t)})},g=()=>{const{search:e,setSearch:t}=(0,d.A)();return(0,r.jsx)(l.vji,{after:null,value:e,onChange:e=>t(e.currentTarget.value)})},A=({onChange:e,items:t,ListItem:n})=>{const{width:s,ref:a,style:l}=(0,o.A)(),c=(0,i.A)();return(0,r.jsxs)(u.A,{items:t,onChange:e,children:[(0,r.jsx)("div",{ref:a,style:l}),(0,r.jsx)(g,{}),(0,r.jsx)(p,{ListItem:n,width:s,height:c})]})};s()}catch(e){s(e)}})},31174:(e,t,n)=>{n.d(t,{A:()=>f});var s=n(96540),r=n(74225),o=n.n(r),i=n(19171),a=n(66556),l=n(52370);const c=async({offset:e=0,count:t=200,groupId:n})=>{if(n){const s=await l.vkapiWrapper.groups.getBanned({group_id:n,offset:e,count:t,fields:["is_nft","photo_50"]}),r=[],o=[],i=[],a=[];for(const e of s?.items||[])e.profile&&(i.push(e.profile),r.push(e.profile.id),e.ban_info&&a.push([e.profile.id,e.ban_info])),e.group&&(o.push(e.group),r.push(-e.group.id),e.ban_info&&a.push([-e.group.id,e.ban_info]));return{count:s.count,items:r,profiles:i,groups:o,banInfo:a}}return await l.vkapiWrapper.account.getBanned({offset:e,count:t,fields:["is_nft","photo_50"]})};const u=async function*(e=0){const{count:t}=await c({offset:0,count:0,groupId:e});if(yield{count:t,offset:0,items:[],profiles:[],groups:[]},0===t)return;let n=0;for(;n<t;){const{items:s,profiles:r,groups:o,banInfo:i}=await c({offset:n,groupId:e});if(0===s.length)break;yield{count:t,offset:n,items:s||[],profiles:r||[],groups:o||[],ban_info:i},n+=100}};var d=n(57610);const f=()=>{const[e,t]=(0,s.useState)(null),[n,r]=(0,s.useState)(0),[l,c]=(0,s.useState)(0),[f,h]=(0,s.useState)(new Map),p=(0,d.F9)();return o()(async e=>{t(null),r(0),c(0);const n=new Set,s=new Map;for await(const{offset:t,count:o,items:l,profiles:d,groups:f,ban_info:h}of u(p)){if(!e())return;if(0===t&&(c(o),r(0)),0===o){c(t);break}for(const e of l)n.add(e);for(const e of d)a.A.set(e.id,e);for(const e of f)i.A.set(e.id,e);if(h)for(const[e,t]of h)s.set(e,t);r(n.size)}e()&&(t(Array.from(n)),h(s))},[p]),{banned:e,progress:n,allBannedCount:l,banInfo:f}}},39044:(e,t,n)=>{n.d(t,{A:()=>a});var s=n(74848),r=n(96540),o=n(68737),i=n(2346);const a=({children:e,items:t,onChange:n})=>{const[a,l]=(0,r.useState)(""),[c,u]=(0,r.useState)(t);(0,r.useEffect)(()=>{n(c)},[c]);const d=(0,r.useMemo)(()=>a?t.filter(e=>(0,o.A)(e).toLowerCase().indexOf(a.toLowerCase())>-1):t,[a,t]);return(0,s.jsx)(i.A.Provider,{value:{onChange:n,items:t,search:a,filteredItems:d,setSelectedItems:u,selectedItems:c,setSearch:l},children:e})}},45880:(e,t,n)=>{n.d(t,{A:()=>o});var s=n(96540),r=n(13742);const o=()=>{const{width:e}=(0,r.A)(),[t,n]=(0,s.useState)(0),o=(0,s.useRef)(null);return(0,s.useEffect)(()=>{if(!o.current)return;const e=o.current.getBoundingClientRect();n(e.width)},[o,e]),{width:t,ref:o,style:{width:"100%",position:"relative",pointerEvents:"none",userSelect:"none",top:0,left:0}}}},46631:(e,t,n)=>{n.a(e,async(e,s)=>{try{n.r(t),n.d(t,{default:()=>v});var r=n(74848),o=n(52370),i=n(7139),a=n(85252),l=n(8015),c=n(68741),u=n(11157),d=n(39107),f=n(96540),h=n(58207),p=n(29783),g=n(81543),A=n(49747),m=n(23050),x=n(31174),_=n(57610),w=e([i,l,h,p,A]);[i,l,h,p,A]=w.then?(await w)():w;const b=()=>{const e=(0,l.A)(),[t,n]=(0,f.useState)(null),[s,h]=(0,f.useState)(null),{banned:w,progress:b,allBannedCount:v}=(0,x.A)(),j=(0,_.F9)(),[C]=(0,a.A)(),I=(0,u.Gz)();(0,f.useEffect)(()=>{null===w?(n(null),h(null)):h(w)},[w]);return null===w?(0,r.jsx)(d.YJl,{children:(0,r.jsx)(m.A,{label:e.use("settings_cleaner_blacklist_getting"),value:b,max:v})}):null!==t?t===s?.length?(0,r.jsx)(A.A,{}):(0,r.jsx)(d.YJl,{children:(0,r.jsx)(m.A,{label:e.use("settings_cleaner_blacklist_removing"),value:t,max:s?.length||0})}):(0,r.jsxs)(d.YJl,{children:[(0,r.jsx)(p.A,{items:w,onChange:e=>h(e),ListItem:g.A}),(0,r.jsx)(d.eIh,{children:(0,r.jsx)(d.$nd,{mode:"primary",stretched:!0,size:"m",disabled:0===(s?.length||0),onClick:async()=>{if(s)if(C){n(0);for(const e of s)try{j?await o.vkapiWrapper.groups.unban({group_id:j,user_id:e}):await o.vkapiWrapper.account.unban({owner_id:e}),n(e=>(e||0)+1)}catch(e){console.error(e)}}else I.push(c.JZ.root.main.prime)},after:(0,r.jsx)(i.A.Prime,{}),children:e.use("settings_cleaner_default_clear_button",{count:s?.length||0})})})]})},v=()=>{const e=(0,l.A)();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h.A,{children:e.use("settings_menu_cleaner_blacklist_title")}),(0,r.jsx)(b,{})]})};s()}catch(e){s(e)}})},65394:(e,t,n)=>{n.d(t,{A:()=>s});const s=new Map},66556:(e,t,n)=>{n.d(t,{A:()=>s});const s=new Map},68737:(e,t,n)=>{n.d(t,{A:()=>a});var s=n(7618),r=n(65394),o=n(19171),i=n(66556);const a=e=>{if(s.z.isChatId(e)){const t=r.A.get(e);return t?.chat_settings?.title||""}if(s.z.isUserId(e)&&i.A.has(e)){const t=i.A.get(e);return`${t.first_name} ${t.last_name}`}const t=Math.abs(e);if(s.z.isGroupId(e)&&o.A.has(t)){return o.A.get(t).name}return""}},81543:(e,t,n)=>{n.d(t,{A:()=>c});var s=n(74848),r=n(33258),o=n(39107),i=n(68737),a=n(66556),l=n(15200);const c=({index:e})=>{const{filteredItems:t,selectedItems:n,setSelectedItems:c}=(0,l.A)(),u=a.A.get(t[e]);if(!u)return null;const d=(0,i.A)(u.id),f=n.includes(u.id);return(0,s.jsx)(o.T6P,{before:(0,s.jsx)(r.A,{size:40,src:u.photo_50||u.photo_100,isNFT:u.is_nft,badge:u.online?"online":void 0}),Component:"label",after:(0,s.jsx)(o.Sc0,{hasHover:!1,hasActive:!1,checked:f,onChange:()=>{c(e=>e.includes(u.id)?e.filter(e=>e!==u.id):[...e,u.id])}}),children:d})}}}]);