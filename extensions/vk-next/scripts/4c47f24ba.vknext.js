"use strict";(globalThis.webpackChunkvknext=globalThis.webpackChunkvknext||[]).push([[4532],{17100:(o,e,r)=>{r.d(e,{Ay:()=>l,Fs:()=>_,Hb:()=>c});var n=r(74848),t=r(96540);const a=(0,t.createContext)(null),i=()=>{const o=(0,t.useContext)(a);if(!o)throw new Error("CustomModalPageContext has not been passed in provider");return o},c=()=>{const o=i();return{closeModal:()=>o.setOpen(!1)}},_=()=>{const{onClose:o,onClosed:e,onOpen:r,onOpened:n,open:t,setOpen:a}=i();return{open:t,setOpen:a,onClose:o,onClosed:e,onOpen:r,onOpened:n}},l=({onClose:o,onClosed:e,onOpen:r,onOpened:i,...c})=>{const[_,l]=(0,t.useState)(!0);return(0,n.jsx)(a.Provider,{value:{open:_,setOpen:l,onClose:o,onClosed:e,onOpen:r,onOpened:i},...c})}},49032:(o,e,r)=>{r.d(e,{Fl:()=>i,XZ:()=>a,hj:()=>t,lz:()=>n,pz:()=>_});const n=/(^|\/)al_im\.php|(^|\/)im(\?|$)|(^|\/)gim\d+|\/write-?\d+/,t=/(^|\/)al_im\.php|(^|\/)im(\?|$)|\/write-?\d+|\/im\/.*/,a={"--accent":"--vkui--color_icon_accent","--background_content":"--vkui--color_background_content","--background_highlighted":"--vkui--color_transparent--active","--background_hover":"--vkui--color_transparent--hover","--background_light":"--vkui--color_background_tertiary","--background_page":"--vkui--color_background","--background_suggestions":"--vkui--color_background_modal","--button_commerce_background":"--vkui--color_text_positive","--button_secondary_background":"--vkui--color_background_secondary_alpha","--button_secondary_destructive_foreground":"--vkui--color_background_negative","--content_tint_background":"--vkui--color_background_secondary","--content_warning_background":"--vkui--color_background_warning","--counter_prominent_text":"--vkui--color_text_contrast","--destructive":"--vkui--color_text_negative","--dynamic_gray":"--vkui--color_accent_gray","--dynamic_green":"--vkui--color_accent_green","--dynamic_orange":"--vkui--color_accent_orange","--dynamic_purple":"--vkui--color_accent_purple","--dynamic_red":"--vkui--color_accent_red","--dynamic_violet":"--vkui--color_accent_violet","--dynamic_blue":"--vkui--color_accent_blue","--dynamic_raspberry_pink":"--vkui--color_accent_raspberry_pink","--field_background":"--vkui--color_field_background","--field_border":"--vkui--color_field_border_alpha","--field_error_background":"--vkui--color_background_negative_tint","--field_error_border":"--vkui--color_stroke_negative","--field_valid_border":"--vkui--color_stroke_positive","--header_background":"--vkui--color_header_background","--header_tint_alternate":"--vkui--color_icon_accent_themed","--icon_alpha_placeholder":"--vkui--color_icon_contrast","--icon_medium_alpha":"--vkui--color_icon_medium_alpha","--icon_medium":"--vkui--color_icon_medium","--icon_secondary_alpha":"--vkui--color_icon_secondary_alpha","--icon_secondary":"--vkui--color_icon_secondary","--icon_tertiary_alpha":"--vkui--color_icon_tertiary_alpha","--icon_tertiary":"--vkui--color_icon_tertiary","--image_border":"--vkui--color_image_border_alpha","--input_background":"--vkui--color_write_bar_input_background","--input_border":"--vkui--color_write_bar_input_border_alpha","--link_alternate":"--vkui--color_text_link_themed","--loader_track_fill":"--vkui--color_track_background","--loader_track_value_fill":"--vkui--color_track_buffer","--placeholder_icon_background_opaque":"--vkui--color_image_placeholder_alpha","--placeholder_icon_background":"--vkui--color_image_placeholder","--search_bar_field_background":"--vkui--color_search_field_background","--segmented_control_bar_background":"--vkui--color_segmented_control","--separator_alpha":"--vkui--color_separator_primary_alpha","--separator_alternate":"--vkui--color_separator_secondary","--separator_common":"--vkui--color_separator_primary","--skeleton_foreground_from":"--vkui--color_skeleton_from","--skeleton_foreground_to":"--vkui--color_skeleton_to","--text_link":"--vkui--color_text_link","--text_muted":"--vkui--color_text_muted","--text_primary":"--vkui--color_text_primary","--text_secondary":"--vkui--color_text_secondary","--text_subhead":"--vkui--color_text_subhead","--text_tertiary":"--vkui--color_text_tertiary","--writebar_icon":"--vkui--color_write_bar_icon","--gray_400":"--vkui--color_text_secondary","--gray_500":"--vkui--color_text_subhead","--gray_600":"--vkui--color_text_subhead","--gray_900":"--vkui--color_text_muted","--im_forward_line_tint":"--vkui--vkontakte_color_im_forward_line_alpha","--im_bubble_incoming":"--vkui--vkontakte_color_im_bubble_incoming","--im_bubble_incoming_alternate":"--vkui--vkontakte_color_im_bubble_incoming_alternate","--im_bubble_incoming_expiring":"--vkui--vkontakte_color_im_bubble_incoming_expiring","--im_bubble_border_alternate_highlighted":"--vkui--vkontakte_color_im_bubble_border_alternate_highlighted_alpha","--modal_card_background":"--vkui--color_background_modal","--im_bubble_outgoing":"--vkui--vkontakte_color_im_bubble_outgoing"},i=1e3,c=globalThis.navigator.hardwareConcurrency||1,_=Math.max(1,Math.floor(c/2))},67078:(o,e,r)=>{r.d(e,{A:()=>c});var n=r(74848),t=r(3068),a=r(75511);const i=document.createElement("div");i.className=a.A.Snackbars;const c=async o=>{const e=(await Promise.all([r.e(961),r.e(7397),r.e(1649),r.e(8414),r.e(5812)]).then(r.bind(r,25812))).default;document.body.contains(i)||document.body.appendChild(i);const a=document.createElement("div");i.appendChild(a);const{unmount:c}=await(0,t.A)({root:a,content:(0,n.jsx)(e,{onClose:()=>{c(),a.remove(),0===i.children.length&&i.remove()},...o}),disableParentTransformForPositionFixedElements:!0,noStyling:!0})}},69926:(o,e,r)=>{r.d(e,{A:()=>t});var n=r(92580);const t=class{maxConcurrency;runningCount=0;taskQueue=[];allTasks=[];constructor(o){this.maxConcurrency=o}addTask(o){const{promise:e,resolve:r,reject:t}=(0,n.Q)();this.allTasks.push(e);const a=async()=>{this.runningCount++;try{const e=await o();r(e)}catch(o){console.error(o),t(o)}this.runningCount--,await this.runNext()};this.runningCount<this.maxConcurrency?a():this.taskQueue.push(a)}async runNext(){if(this.runningCount>=this.maxConcurrency)return;const o=this.taskQueue.shift();o&&await o()}async waitAll(){return await Promise.all(this.allTasks)}}},75511:(o,e,r)=>{r.d(e,{A:()=>n});const n={Snackbars:"fuEF5ymRhcBAxInE",BaseSnackbar:"Fu47p889xWCKEooV"}},89307:(o,e,r)=>{r.d(e,{A:()=>d});var n=r(74848),t=r(17100),a=r(3068);const i="d32BOj2kmVxWOEmy";let c=null,_=!1;const l=()=>{_||(_=!0,c=window.getComputedStyle(document.body).overflow,document.body.style.overflow="hidden")},u="--vknext--z_index_modal",d=async(o,{zIndex:e}={})=>{const r=document.createElement("div"),d=document.createElement("div");e&&(r.className=i,d.className=i,d.style.setProperty(u,e.toString()),r.style.setProperty(u,e.toString())),document.body.appendChild(r),document.body.appendChild(d);const{unmount:s}=await(0,a.A)({root:r,portal:d,content:(0,n.jsx)(t.Ay,{onOpen:l,onClosed:()=>{setTimeout(()=>{_&&(_=!1,null!==c&&(document.body.style.overflow=c,c=null))},100),setTimeout(()=>{s(),r.remove(),d.remove()},1e3)},children:"function"==typeof o?(0,n.jsx)(o,{}):o}),disableParentTransformForPositionFixedElements:!0,disableAnchorTextDecoration:!0})}},89481:(o,e,r)=>{r.d(e,{A:()=>c});var n=r(74848),t=r(37352),a=r(89307);const i=async({onShowPicker:o})=>{const{default:e}=await Promise.all([r.e(961),r.e(7397),r.e(1649),r.e(2204)]).then(r.bind(r,62204)),{promise:i,resolve:c}=(0,t.A)();return(0,a.A)((0,n.jsx)(e,{onSelect:c,onShowPicker:o}),{zIndex:1005}),await i},c=async({id:o,startIn:e})=>"showDirectoryPicker"in window?await i({onShowPicker:()=>window.showDirectoryPicker({id:o,startIn:e,mode:"readwrite"})}):null},94037:(o,e,r)=>{r.d(e,{A:()=>n});const n=async({dirHandle:o,zipFile:e,zipFilePromise:r,subFolderName:n})=>{const t=e||await r;if(!t)return;const a=await(async(o,e)=>{if(!e)return o;try{return await o.getDirectoryHandle(e,{create:!0})}catch(o){console.error(`[VK Next] Failed to create/access subdirectory "${e}":`,o)}return o})(o,n);await(async(o,e)=>{const{name:r,input:n}=e;try{const e=await o.getFileHandle(r,{create:!0}),t=await e.createWritable();try{await t.write(n)}finally{await t.close()}}catch(o){throw console.error(`[VK Next] Failed to write file "${r}":`,o),o}})(a,t)}}}]);