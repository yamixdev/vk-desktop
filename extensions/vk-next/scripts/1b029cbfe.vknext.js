"use strict";(globalThis.webpackChunkvknext=globalThis.webpackChunkvknext||[]).push([[1251],{3812:(e,t,n)=>{n.d(t,{A:()=>i});var s=n(52370);const i=async function*(){const e=await s.vkapiWrapper.friends.get({offset:0,count:0}),t=e?.count??0;if(yield{count:t,offset:0,items:[]},0===t)return;let n=0;for(;n<t;){const{items:e}=await s.vkapiWrapper.friends.get({offset:n,count:1e3,fields:["deactivated","has_photo","last_seen","photo_100","photo_id","can_write_private_message","online_info"]});if(0===e.length)break;yield{count:t,offset:n,items:e||[]},n+=1e3}}},94457:(e,t,n)=>{n.a(e,async(e,s)=>{try{n.r(t),n.d(t,{default:()=>w});var i=n(74848),r=n(52370),a=n(7139),l=n(85252),o=n(8015),c=n(68741),u=n(11157),d=n(39107),f=n(96540),_=n(74225),h=n.n(_),g=n(66556),m=n(58207),p=n(29783),x=n(81543),j=n(49747),b=n(23050),A=n(3812),k=n(5211),v=e([a,o,m,p,j,k]);[a,o,m,p,j,k]=v.then?(await v)():v;const y=()=>{const e=(0,o.A)(),[t,n]=(0,f.useState)(null),[s,_]=(0,f.useState)(0),[m,v]=(0,f.useState)(0),[y,w]=(0,f.useState)(null),[S,C]=(0,f.useState)(null),[J,L]=(0,f.useState)(null),[I,W]=(0,f.useState)(!1),[Y]=(0,l.A)(),z=(0,u.Gz)();h()(async e=>{const t=[];for await(const{offset:n,count:s,items:i}of(0,A.A)()){if(!e())return;if(0===n&&(_(s),v(0)),0===s){_(n);break}t.push(...i),v(t.length)}e()&&n(t)},[]);const F=async()=>{if(J){if(!Y)return z.push(c.JZ.root.main.prime);v(0),w(J.length);for(const e of J){try{await r.vkapiWrapper.friends.delete({user_id:e})}catch(e){console.error(e)}v(e=>e+1)}}},M=(0,f.useMemo)(()=>t?t.filter(e=>e.lists).length:0,[t]),T=(0,f.useMemo)(()=>t&&I?t.filter(e=>!e.lists):t,[t,I]);return null!==y?m===y?(0,i.jsx)(j.A,{}):(0,i.jsx)(d.YJl,{children:(0,i.jsx)(b.A,{label:e.use("settings_cleaner_friends_removing"),value:m,max:y})}):null===t?(0,i.jsx)(d.YJl,{children:(0,i.jsx)(b.A,{label:e.use("settings_cleaner_friends_getting"),value:m,max:s})}):null!==S&&null!==J?(0,i.jsxs)(d.YJl,{children:[(0,i.jsx)(p.A,{items:S,onChange:e=>L(e),ListItem:x.A}),(0,i.jsx)(d.eIh,{children:(0,i.jsx)(d.$nd,{mode:"primary",stretched:!0,size:"m",disabled:0===J.length,onClick:F,after:(0,i.jsx)(a.A.Prime,{}),children:e.use("settings_cleaner_friends_clear_button",{count:J.length})})})]}):(0,i.jsx)(k.A,{friends:T,onSelectedFriends:e=>{if(!Y)return void z.push(c.JZ.root.main.prime);const t=new Set;for(const n of e)n.id&&(t.add(n.id),g.A.set(n.id,n));const n=Array.from(t);C(n),L(n)},selectCategoryLabel:e.use("settings_cleaner_friends_select_category"),warningLabel:e.use("settings_cleaner_friends_warning"),confirmButtonLabelKey:"settings_cleaner_friends_clear_button",topChildren:(0,i.jsx)(d.eIh,{children:(0,i.jsx)(d.Sc0,{onChange:()=>W(e=>!e),checked:I,disabled:0===M,children:e.use("settings_cleaner_friends_ignore_users_list",{count:M})})})})},w=()=>{const e=(0,o.A)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(m.A,{children:e.use("settings_menu_cleaner_friends_title")}),(0,i.jsx)(y,{})]})};s()}catch(e){s(e)}})}}]);