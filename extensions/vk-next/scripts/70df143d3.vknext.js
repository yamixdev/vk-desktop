"use strict";(globalThis.webpackChunkvknext=globalThis.webpackChunkvknext||[]).push([[3158],{3178:(s,t,e)=>{e.d(t,{o:()=>a});var a=(0,e(78414).mT)("Icon28SlidersOutline","sliders_outline_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="sliders_outline_28"><g fill="none" fill-rule="evenodd"><path d="M0 0h28v28H0z" /><path fill="currentColor" fill-rule="nonzero" d="M18.5 15a3.5 3.5 0 0 1 3.355 2.5H24a1 1 0 0 1 0 2h-2.145a3.502 3.502 0 0 1-6.71 0H4a1 1 0 0 1 0-2h11.145A3.5 3.5 0 0 1 18.5 15m0 1.75a1.75 1.75 0 1 0 0 3.5 1.75 1.75 0 0 0 0-3.5M10.5 6a3.5 3.5 0 0 1 3.355 2.5H24a1 1 0 0 1 0 2H13.855a3.502 3.502 0 0 1-6.71 0H4a1 1 0 0 1 0-2h3.145A3.5 3.5 0 0 1 10.5 6m0 1.75a1.75 1.75 0 1 0 0 3.5 1.75 1.75 0 0 0 0-3.5" /></g></symbol>',28,28,!1,void 0)},3772:(s,t,e)=>{function a(s){return s.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}e.d(t,{A:()=>a})},7778:(s,t,e)=>{e.a(s,async(s,a)=>{try{e.d(t,{A:()=>m});var c=e(74848),i=e(26555),o=e(39107),n=e(52595),r=e(87675),l=e(46949),_=e(31955),u=s([n,r]);[n,r]=u.then?(await u)():u;const m=()=>{const s=(0,r.A)(),{stats:t}=(0,l.b)();if(t.attachments)return(0,c.jsxs)(o.iau,{children:[!!t.attachments&&(0,c.jsxs)(_.A,{children:[(0,c.jsxs)("b",{children:[s.use("vkcom_chat_stats_attachments",{})," "]}),t.attachments]}),!!t.photos&&(0,c.jsxs)(_.A,{children:[(0,c.jsxs)("b",{children:[s.use("vkcom_chat_stats_photos",{})," "]}),t.photos," ",`(${t.photosGeo} ${s.use("vkcom_chat_stats_photos_geo")})`]}),!!t.docs&&(0,c.jsxs)(_.A,{children:[(0,c.jsxs)("b",{children:[s.use("vkcom_chat_stats_docs",{})," "]}),t.docs," ",`(${(0,i.A)(t.docsSize)})`]}),!!t.audio&&(0,c.jsxs)(_.A,{children:[(0,c.jsxs)("b",{children:[s.use("vkcom_chat_stats_audio",{})," "]}),t.audio," ",`(${(0,n.A)(t.audioDuration)})`]}),!!t.video&&(0,c.jsxs)(_.A,{children:[(0,c.jsxs)("b",{children:[s.use("vkcom_chat_stats_video",{})," "]}),t.video," ",`(${(0,n.A)(t.videoDuration)})`]}),!!t.voices&&(0,c.jsxs)(_.A,{children:[(0,c.jsxs)("b",{children:[s.use("vkcom_chat_stats_voices",{})," "]}),t.voices," ",`(${(0,n.A)(t.voicesDuration)})`]}),!!t.videoMessages&&(0,c.jsxs)(_.A,{children:[(0,c.jsxs)("b",{children:[s.use("vkcom_chat_stats_video_messages",{})," "]}),t.videoMessages," ",`(${(0,n.A)(t.videoMessagesDuration)})`]}),!!t.calls&&(0,c.jsxs)(_.A,{children:[(0,c.jsxs)("b",{children:[s.use("vkcom_chat_stats_calls",{})," "]}),t.calls," ",`(${(0,n.A)(t.callsDuration)})`]}),!!t.posts&&(0,c.jsxs)(_.A,{children:[(0,c.jsxs)("b",{children:[s.use("vkcom_chat_stats_posts",{})," "]}),t.posts]}),!!t.postReplies&&(0,c.jsxs)(_.A,{children:[(0,c.jsxs)("b",{children:[s.use("vkcom_chat_stats_post_replies",{})," "]}),t.postReplies]}),!!t.stories&&(0,c.jsxs)(_.A,{children:[(0,c.jsxs)("b",{children:[s.use("vkcom_chat_stats_stories",{})," "]}),t.stories]}),!!t.polls&&(0,c.jsxs)(_.A,{children:[(0,c.jsxs)("b",{children:[s.use("vkcom_chat_stats_polls",{})," "]}),t.polls]}),(t.stickersCount||t.ugcStickersCount)&&(0,c.jsxs)(_.A,{children:[(0,c.jsxs)("b",{children:[s.use("vkcom_chat_stats_stickers",{})," "]}),t.stickersCount+t.ugcStickersCount," (",s.use("vkcom_chat_stats_ugc_stickers",{})," ",t.ugcStickersCount,")"]}),!!t.graffities&&(0,c.jsxs)(_.A,{children:[(0,c.jsxs)("b",{children:[s.use("vkcom_chat_stats_graffities",{})," "]}),t.graffities]}),!!t.audioPlaylists&&(0,c.jsxs)(_.A,{children:[(0,c.jsxs)("b",{children:[s.use("vkcom_chat_stats_audio_playlists",{})," "]}),t.audioPlaylists]}),!!t.gifts&&(0,c.jsxs)(_.A,{children:[(0,c.jsxs)("b",{children:[s.use("vkcom_chat_stats_gifts",{})," "]}),t.gifts]}),!!t.links&&(0,c.jsxs)(_.A,{children:[(0,c.jsxs)("b",{children:[s.use("vkcom_chat_stats_links",{})," "]}),t.links]}),!!t.miniApps&&(0,c.jsxs)(_.A,{children:[(0,c.jsxs)("b",{children:[s.use("vkcom_chat_stats_mini_apps",{})," "]}),t.miniApps]}),!!t.moneyRequests&&(0,c.jsxs)(_.A,{children:[(0,c.jsxs)("b",{children:[s.use("vkcom_chat_stats_money_requests",{})," "]}),t.moneyRequests]}),!!t.moneyTransfers&&(0,c.jsxs)(_.A,{children:[(0,c.jsxs)("b",{children:[s.use("vkcom_chat_stats_money_transfers",{})," "]}),t.moneyTransfers]}),!!t.geo&&(0,c.jsxs)(_.A,{children:[(0,c.jsxs)("b",{children:[s.use("vkcom_chat_stats_geo",{})," "]}),t.geo]}),!!t.markets&&(0,c.jsxs)(_.A,{children:[(0,c.jsxs)("b",{children:[s.use("vkcom_chat_stats_market",{})," "]}),t.markets]}),!!t.artists&&(0,c.jsxs)(_.A,{children:[(0,c.jsxs)("b",{children:[s.use("vkcom_chat_stats_artists",{})," "]}),t.artists]}),!!t.appActions&&(0,c.jsxs)(_.A,{children:[(0,c.jsxs)("b",{children:[s.use("vkcom_chat_stats_app_actions",{})," "]}),t.appActions]}),!!t.articles&&(0,c.jsxs)(_.A,{children:[(0,c.jsxs)("b",{children:[s.use("vkcom_chat_stats_articles",{})," "]}),t.articles]}),!!t.curators&&(0,c.jsxs)(_.A,{children:[(0,c.jsxs)("b",{children:[s.use("vkcom_chat_stats_curators",{})," "]}),t.curators]}),!!t.donutLinks&&(0,c.jsxs)(_.A,{children:[(0,c.jsxs)("b",{children:[s.use("vkcom_chat_stats_donut_links",{})," "]}),t.donutLinks]}),!!t.events&&(0,c.jsxs)(_.A,{children:[(0,c.jsxs)("b",{children:[s.use("vkcom_chat_stats_events",{})," "]}),t.events]}),!!t.groupCalls&&(0,c.jsxs)(_.A,{children:[(0,c.jsxs)("b",{children:[s.use("vkcom_chat_stats_group_calls",{})," "]}),t.groupCalls]}),!!t.marketAlbums&&(0,c.jsxs)(_.A,{children:[(0,c.jsxs)("b",{children:[s.use("vkcom_chat_stats_market_albums",{})," "]}),t.marketAlbums]}),!!t.narratives&&(0,c.jsxs)(_.A,{children:[(0,c.jsxs)("b",{children:[s.use("vkcom_chat_stats_narratives",{})," "]}),t.narratives]}),!!t.podcasts&&(0,c.jsxs)(_.A,{children:[(0,c.jsxs)("b",{children:[s.use("vkcom_chat_stats_podcasts",{})," "]}),t.podcasts]}),!!t.shares&&(0,c.jsxs)(_.A,{children:[(0,c.jsxs)("b",{children:[s.use("vkcom_chat_stats_shares",{})," "]}),t.shares]}),!!t.widgets&&(0,c.jsxs)(_.A,{children:[(0,c.jsxs)("b",{children:[s.use("vkcom_chat_stats_widgets",{})," "]}),t.widgets]}),!!t.unknownAttachments&&(0,c.jsxs)(_.A,{children:[(0,c.jsxs)("b",{children:[s.use("vkcom_chat_stats_unknown",{})," "]}),t.unknownAttachments]})]})};a()}catch(s){a(s)}})},12938:(s,t,e)=>{e.a(s,async(s,a)=>{try{e.d(t,{A:()=>u});var c=e(74848),i=e(33258),o=e(45568),n=e(39107),r=e(87675),l=e(46949),_=s([r]);r=(_.then?(await _)():_)[0];const u=()=>{const s=(0,r.A)(),{peerInfo:t,stats:e}=(0,l.b)();return(0,c.jsx)(n.iau,{children:(0,c.jsx)(n.T6P,{multiline:!0,before:(0,c.jsx)(i.A,{src:t?.photoUrl,isNFT:t?.hasNftAvatar}),subtitle:s.use("vkcom_chat_stats_collected_date",{dateString:(0,o.A)(1e3*e.collectedTimestamp)}),children:t?t?.groupName||t?.name:(0,c.jsx)(n.EAD,{width:200})})})};a()}catch(s){a(s)}})},13780:(s,t,e)=>{e.d(t,{A:()=>c});var a=e(7618);const c=s=>`/${a.z.isUserId(+s)?"id":"club"}${Math.abs(+s)}`},24330:(s,t,e)=>{e.d(t,{A:()=>n});var a=e(74848),c=e(48591),i=e(39107);const o=({value:s})=>(0,a.jsx)("div",{className:c.A.Counter,children:s}),n=({text:s,value:t,dangerouslySetInnerHTML:e})=>(0,a.jsxs)("div",{className:c.A.CounterCell,children:[e&&(0,a.jsx)(i.EYj,{className:c.A.CounterCell__Text,children:(0,a.jsx)("span",{dangerouslySetInnerHTML:{__html:s.replaceAll(window.Emoji.emojiRegex,window.Emoji.emojiReplace)}})}),!e&&(0,a.jsx)(i.EYj,{className:c.A.CounterCell__Text,children:s}),(0,a.jsx)(o,{value:t})]})},30311:(s,t,e)=>{e.d(t,{Ay:()=>i,Kl:()=>a,u7:()=>c});const a=15,c=30,i=(s,t=a,e=100)=>s===e?t:e},31955:(s,t,e)=>{e.d(t,{A:()=>o});var a=e(74848),c=e(39107),i=e(48591);const o=({className:s,weight:t="3",...e})=>(0,a.jsx)(c.EYj,{Component:"div",weight:t,className:(0,c.xWm)(i.A.chatStatsText,s),useAccentWeight:!0,...e})},37176:(s,t,e)=>{e.a(s,async(s,a)=>{try{e.d(t,{A:()=>h});var c=e(74848),i=e(7618),o=e(45568),n=e(39107),r=e(87675),l=e(46949),_=e(48591),u=e(70828),m=s([r]);r=(m.then?(await m)():m)[0];const h=()=>{const s=(0,r.A)(),{peerId:t,stats:e}=(0,l.b)(),a=i.z.isChatId(t);return(0,c.jsxs)(n.iau,{className:_.A.SummarySection,children:[(0,c.jsx)(u.A,{mainValue:e.incoming+e.outgoing,caption:s.use("vkcom_chat_stats_all_msg",{})}),(0,c.jsx)(u.A,{mainValue:e.wordsCount,caption:s.use("vkcom_chat_stats_words",{})}),(0,c.jsx)(u.A,{tooltipText:(0,o.A)(e.firstMessageTime),mainValue:(0,o.A)(e.firstMessageTime,!1),caption:s.use("vkcom_chat_stats_first_msg",{})}),(0,c.jsx)(u.A,{tooltipText:(0,o.A)(e.lastMessageTime),mainValue:(0,o.A)(e.lastMessageTime,!1),caption:s.use("vkcom_chat_stats_last_msg",{})}),(0,c.jsx)(u.A,{mainValue:e.incoming,percentValue:100*e.incoming/(e.incoming+e.outgoing),caption:s.use("vkcom_chat_stats_incoming_msg",{})}),(0,c.jsx)(u.A,{mainValue:e.outgoing,percentValue:100*e.outgoing/(e.incoming+e.outgoing),caption:s.use("vkcom_chat_stats_outgoing_msg",{})}),(0,c.jsx)(u.A,{mainValue:e.fwd,caption:s.use("vkcom_chat_stats_forwarded",{})}),(0,c.jsx)(u.A,{mainValue:e.replies,caption:s.use("vkcom_chat_stats_replies",{})}),(0,c.jsx)(u.A,{mainValue:e.chars,caption:s.use("vkcom_chat_stats_chars",{})}),(0,c.jsx)(u.A,{mainValue:e.badWordsCount,isApproximated:!0,caption:s.use("vkcom_chat_stats_explicit",{})}),a&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(u.A,{mainValue:e.actions,caption:s.use("vkcom_chat_stats_sources",{})}),(0,c.jsx)(u.A,{mainValue:e.msgCountBySender.size,caption:s.use("vkcom_chat_stats_unique_senders",{})})]})]})};a()}catch(s){a(s)}})},37746:(s,t,e)=>{e.d(t,{A:()=>i});const a=s=>{try{s.dispatchEvent(new MouseEvent("click"))}catch(t){const e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),s.dispatchEvent(e)}},c=async(s,t="download")=>{const e=document.createElement("a");e.download=t,e.rel="noopener",(globalThis?.chrome?.runtime?.id||globalThis?.browser?.runtime?.id)&&(e.target="_blank"),"string"==typeof s?(e.href=s,e.origin!==location.origin?await(async s=>{try{const t=await globalThis.fetch(s,{method:"HEAD"});return t.status>=200&&t.status<=299}catch(s){console.error(s)}return!1})(e.href)?await(async(s,t)=>{try{const e=await globalThis.fetch(s,{method:"GET"}),a=await e.blob();await c(a,t)}catch(s){console.error(s)}})(s,t):(e.target="_blank",a(e)):a(e)):(e.href=URL.createObjectURL(s),setTimeout(()=>{URL.revokeObjectURL(e.href)},4e4),setTimeout(()=>{a(e)},0))},i=c},43375:(s,t,e)=>{function a(s){return Array.from(s.entries()).sort((s,t)=>t[1]-s[1])}e.d(t,{A:()=>a})},45568:(s,t,e)=>{e.d(t,{A:()=>a});const a=(s,t=!0,e=!1)=>{const a=new Date(s),c=s=>String(s).padStart(2,"0"),i=c(a.getDate()),o=c(a.getMonth()+1);let n=c(a.getFullYear());const r=c(a.getHours()),l=c(a.getMinutes()),_=c(a.getSeconds());return e&&(n=n.substring(2)),t?`${i}.${o}.${n}, ${r}:${l}:${_}`:`${i}.${o}.${n}`}},46949:(s,t,e)=>{e.d(t,{V:()=>m,b:()=>u});var a=e(74848),c=e(96540),i=e(74225),o=e.n(i),n=e(97307),r=e(7618);const l=async(s,t,e,a)=>{const c={};if(c.peerId=s,c.groupId=t,r.z.isChatId(s)){const{items:t}=await vkApi.api("messages.getConversationsById",{peer_ids:s}),i=t[0].chat_settings;c.photoUrl=i?.photo?.photo_200,c.name=i?.title,c.membersCount=i?.members_count||0,c.members=new Map,a(s=>({...s,...c}));const o=await vkApi.api("messages.getConversationMembers",{peer_id:s});if(o.items)for(const s of o.items)c.members?.set(s.member_id,{isMember:!0});const l=e.filter(s=>r.z.isUserId(s)),_=e.filter(s=>r.z.isGroupId(s)).map(s=>-s),u=[],m=[];if(l.length)for(const s of(0,n.A)(l,100))u.push(vkApi.api("users.get",{user_ids:s}));if(_.length)for(const s of(0,n.A)(_,100))m.push(vkApi.api("groups.getById",{group_ids:s}));const h=(s,t)=>{const e=c.members?.get(s);e?c.members?.set(s,{...e,name:t}):c.members?.set(s,{isMember:!1,name:t})};if(u.length){(await Promise.all(u)).flatMap(s=>s).forEach(s=>h(s.id,`${s.first_name} ${s.last_name}`))}if(m.length){(await Promise.all(m)).flatMap(s=>s.groups).forEach(s=>h(-(s?.id||1),s?.name||"Группа"))}a(s=>({...s,...c}))}else if(r.z.isUserId(s)){const e=await vkApi.api("users.get",{user_ids:[s],fields:["photo_200, is_nft"]});if(t){const s=await vkApi.api("groups.getById",{group_ids:[t]});c.groupName=s.groups[0].name}c.photoUrl=e[0].photo_200,c.name=`${e[0].first_name} ${e[0].last_name}`,c.hasNftAvatar=!!e[0].is_nft,a(s=>({...s,...c}))}else{const t=await vkApi.api("groups.getById",{group_ids:[-s]});c.photoUrl=t.groups[0].photo_200,c.groupName=t.groups[0].name,a(s=>({...s,...c}))}},_=(0,c.createContext)(null),u=()=>{const s=(0,c.useContext)(_);if(!s)throw new Error("useChatsStats must be used within a ChatStatsContext");return s},m=({children:s,value:t})=>{const[e,i]=(0,c.useState)(null);return o()(async()=>{const{peerId:s,groupId:e,stats:a}=t;s&&await l(s,e,Array.from(a.msgCountBySender.keys()),i)},[t.peerId,t.groupId]),(0,a.jsx)(_.Provider,{value:{...t,peerInfo:e},children:s})}},48591:(s,t,e)=>{e.d(t,{A:()=>a});const a={ugcBadge:"rpyWwH3G0y7EmLsp",chatStatsText:"gvQW7noeUsjFFwFg",chatStatsDiv:"ouwC5VBkFVn7R06c",chatStatsTextTransparent:"adNHcBNszVsgAXBg",stickersGalleryWrapper:"ebGNFjJKzTu5yedT",stickersTitle:"OAW00k6cK7q3TUKn",SummaryText:"QhpKB7bDjlgyLAnL",SummaryText__mainValue:"Z5eCfrt3fMtvmx74",SummaryText__caption:"aqRR0KG9vKcjTZGD",SummaryText__percentValue:"gStKKyLFHr8XehTX",SummarySection:"CgaZyHwJVVfEs31J",DatesChart:"uL8dseaAIp81nF4C",ChatStatsModal:"NHxEYCLXcdYYHHec",CounterCellContainer:"ryL2sbvV29nXJkeD",CounterCell:"g_erOqBX3jafAVEJ",CounterCell__Text:"_PuDc5QZhHypCtgq",Counter:"D_LKmKjKecgO7k8V"}},49438:(s,t,e)=>{e.a(s,async(s,a)=>{try{e.d(t,{A:()=>g});var c,i=e(74848),o=e(13780),n=e(43375),r=e(39107),l=e(96540),_=e(87675),u=e(46949),m=e(48591),h=e(31955),d=e(30311),v=s([_]);_=(v.then?(await v)():v)[0],(p=c||(c={}))[p.All=0]="All",p[p.OnlyMembers=1]="OnlyMembers",p[p.OnlyLeft=2]="OnlyLeft";const g=()=>{const s=(0,_.A)(),[t,e]=(0,l.useState)(15),[a,v]=(0,l.useState)(c.All),{peerInfo:p,stats:g}=(0,u.b)(),k=p?.members||new Map,x=(0,l.useMemo)(()=>(0,n.A)(g?.msgCountBySender||new Map),[]);if(!k.size)return;const j=x.filter(s=>a===c.All||a===c.OnlyMembers&&k.get(s[0])?.isMember||a===c.OnlyLeft&&!k.get(s[0])?.isMember).slice(0,t);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.Y9Y,{size:"m",after:x.length>d.Kl&&(0,i.jsx)(r.N_E,{onClick:()=>e(s=>(0,d.Ay)(s)),children:t===d.Kl?s.use("vkcom_chat_stats_show_more"):s.use("vkcom_chat_stats_show_multiple")}),children:s.use("vkcom_chat_stats_members_header")}),(0,i.jsx)(r.tUM,{mode:"accent",children:(0,i.jsxs)(r.ox2,{children:[(0,i.jsx)(r.ORv,{onClick:()=>v(c.All),selected:a===c.All,children:s.use("vkcom_chat_stats_all_members")}),(0,i.jsx)(r.ORv,{onClick:()=>v(c.OnlyMembers),selected:a===c.OnlyMembers,children:s.use("vkcom_chat_stats_in_members")}),(0,i.jsx)(r.ORv,{onClick:()=>v(c.OnlyLeft),selected:a===c.OnlyLeft,children:s.use("vkcom_chat_stats_left_members")})]})}),(0,i.jsx)(r.iau,{className:m.A.chatStatsDiv,children:j.length?j.map((s,t)=>(0,i.jsxs)(h.A,{className:(0,r.xWm)(!k.get(s[0])?.isMember&&m.A.chatStatsTextTransparent),children:[(0,i.jsxs)("b",{children:[t+1,"."," ",(0,i.jsx)(r.N_E,{href:(0,o.A)(s[0]),target:"_blank",children:k.get(s[0])?.name}),":"," "]}),g?.msgCountBySender.get(s[0])]},s[0])):(0,i.jsx)(r.OrA,{children:s.use("global_not_found")})})]})};a()}catch(s){a(s)}var p})},52495:(s,t,e)=>{e.a(s,async(s,a)=>{try{e.d(t,{A:()=>p});var c=e(74848),i=e(62612),o=e(96540),n=e(74225),r=e.n(n),l=e(39107),_=e(48591),u=e(87675),m=e(46949),h=s([u]);u=(h.then?(await h)():h)[0];const d=window.location?.host||"vk.ru",v=async(s,t,e,a)=>{const c=[];if(e.size)for(const[s,t]of e)c.push({id:s,isUGC:!1,count:t,imageUrl:`https://${d}/sticker/1-${s}-128b`});if(a.size){const e=await vkApi.api("stickers.getUGCPacks",{owner_id:s,pack_ids:t});for(const[s,t]of a)c.push({id:s,isUGC:!0,count:t,imageUrl:e.packs[0].stickers.find(t=>t.id===s)?.images[1].url||""})}return{stickers:c}},p=()=>{const s=(0,u.A)(),{stats:t,peerId:e}=(0,m.b)(),[a,n]=(0,o.useState)(null);if(t?.stickers?.size||t?.ugcStickers?.size)return r()(async()=>{const s=await v(e,t?.ugcPackId,t?.stickers,t?.ugcStickers);n(s)},[]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(l.Y9Y,{size:"m",children:s.use("vkcom_chat_stats_top_stickers")}),(0,c.jsx)(l.iau,{className:_.A.chatStatsDiv,children:(0,c.jsx)(l.ox2,{showArrows:!0,getScrollToLeft:s=>s-280,getScrollToRight:s=>s+280,children:(0,c.jsxs)("div",{className:_.A.stickersGalleryWrapper,children:[!a&&[...Array(15).keys()].map((s,t)=>(0,c.jsx)(l.Fw6,{size:"l",title:(0,c.jsx)("div",{className:_.A.stickersTitle,children:(0,c.jsx)(l.EAD,{width:"30px"})}),children:(0,c.jsx)(l.EAD,{width:"128px",height:"128px"})},t)),!!a&&a.stickers.sort((s,t)=>t.count-s.count).slice(0,30).map(s=>{const t=s?.isUGC;return(0,c.jsx)(l.Fw6,{size:"l",onClick:t?void 0:async()=>{if(t)return;const e=await vkApi.api("store.getStockItemByStickerId",{sticker_id:s.id});window.Emoji.previewSticker(e.product.id)},disabled:t,title:(0,c.jsx)("div",{className:_.A.stickersTitle,children:s.count}),children:(0,c.jsxs)("div",{children:[(0,c.jsx)("img",{alt:"sticker",src:s.imageUrl,width:128,height:128}),s.isUGC&&(0,c.jsx)(i.o,{className:_.A.ugcBadge})]})},s.id)})]})})})]})};a()}catch(s){a(s)}})},52595:(s,t,e)=>{e.a(s,async(s,a)=>{try{e.d(t,{A:()=>i});var c=e(93819);const s=await c.A,i=t=>{const e=new Date(1e3*t);return[[e.getUTCFullYear()-1970,s.use("vkcom_time_y")],[e.getUTCMonth(),s.use("vkcom_time_mo")],[e.getUTCDate()-1,s.use("vkcom_time_d")],[e.getUTCHours(),s.use("vkcom_time_h")],[e.getUTCMinutes(),s.use("vkcom_time_m")],[e.getUTCSeconds(),s.use("vkcom_time_s")]].filter(s=>!!s[0]).slice(0,2).map(s=>s.join("")).join(" ")||`0${s.use("vkcom_time_s")}`};a()}catch(s){a(s)}},1)},53129:(s,t,e)=>{e.a(s,async(s,a)=>{try{e.d(t,{A:()=>k});var c=e(7618),i=e(43375),o=e(45568),n=e(26555),r=e(93819),l=e(52595),_=s([l]);l=(_.then?(await _)():_)[0];const u=await r.A,m=(s,t)=>{let e;return e=c.z.isUserId(s.peerId)&&!s.groupId?u.use("vkcom_chat_stats_title_user",{title:s.name}):c.z.isUserId(s.peerId)?u.use("vkcom_chat_stats_title_gim_user",{user:s.name,group:s.groupName}):c.z.isChatId(s.peerId)?u.use("vkcom_chat_stats_title_chat",{title:s.name}):u.use("vkcom_chat_stats_title_group",{title:s.groupName}),[e,u.use("vkcom_chat_stats_all_msg",{messagesCount:t.incoming+t.outgoing}),u.use("vkcom_chat_stats_words",{wordsCount:t.wordsCount}),u.use("vkcom_chat_stats_first_msg",{first:(0,o.A)(t.firstMessageTime)}),u.use("vkcom_chat_stats_last_msg",{last:(0,o.A)(t.lastMessageTime)}),u.use("vkcom_chat_stats_incoming_msg",{incoming:`${t.incoming} (${(100*t.incoming/(t.incoming+t.outgoing)).toFixed(2)}%)`}),u.use("vkcom_chat_stats_outgoing_msg",{outgoing:`${t.outgoing} (${(100*t.outgoing/(t.incoming+t.outgoing)).toFixed(2)}%)`}),u.use("vkcom_chat_stats_forwarded",{forwarded:t.fwd}),u.use("vkcom_chat_stats_replies",{replies:t.replies}),u.use("vkcom_chat_stats_chars",{chars:t.chars}),u.use("vkcom_chat_stats_explicit",{explicit:t.badWordsCount}),c.z.isChatId(s.peerId)&&u.use("vkcom_chat_stats_sources",{sources:t.actions}),c.z.isChatId(s.peerId)&&u.use("vkcom_chat_stats_unique_senders",{allTimeMembers:t.msgCountBySender.size})].filter(s=>s).join("\n")},h=s=>[u.use("vkcom_chat_stats_attachments",{attachments:s.attachments}),u.use("vkcom_chat_stats_photos",{photos:`${s.photos} (${s.photosGeo} ${u.use("vkcom_chat_stats_photos_geo")})`}),u.use("vkcom_chat_stats_docs",{docs:`${s.docs} (${(0,n.A)(s.docsSize)})`}),u.use("vkcom_chat_stats_audio",{audio:`${s.audio} (${(0,l.A)(s.audioDuration)})`}),u.use("vkcom_chat_stats_video",{video:`${s.video} (${(0,l.A)(s.videoDuration)})`}),u.use("vkcom_chat_stats_voices",{voices:`${s.voices} (${(0,l.A)(s.voicesDuration)})`}),u.use("vkcom_chat_stats_video_messages",{count:`${s.videoMessages} (${(0,l.A)(s.videoMessagesDuration)})`}),u.use("vkcom_chat_stats_calls",{calls:`${s.calls} (${(0,l.A)(s.callsDuration)})`}),u.use("vkcom_chat_stats_posts",{posts:s.posts}),u.use("vkcom_chat_stats_post_replies",{post_replies:s.postReplies}),u.use("vkcom_chat_stats_stories",{stories:s.stories}),u.use("vkcom_chat_stats_polls",{polls:s.polls}),u.use("vkcom_chat_stats_stickers",{stickersCount:`${s.stickersCount+s.ugcStickersCount} (${u.use("vkcom_chat_stats_ugc_stickers",{count:s.ugcStickersCount})})`}),u.use("vkcom_chat_stats_graffities",{graffities:s.graffities}),u.use("vkcom_chat_stats_audio_playlists",{count:s.audioPlaylists}),u.use("vkcom_chat_stats_gifts",{gifts:s.gifts}),u.use("vkcom_chat_stats_links",{links:s.links}),u.use("vkcom_chat_stats_mini_apps",{miniapps:s.miniApps}),u.use("vkcom_chat_stats_money_requests",{money:s.moneyRequests}),u.use("vkcom_chat_stats_money_transfers",{count:s.moneyTransfers}),u.use("vkcom_chat_stats_geo",{geo:s.geo}),u.use("vkcom_chat_stats_market",{count:s.markets}),u.use("vkcom_chat_stats_artists",{count:s.artists}),u.use("vkcom_chat_stats_app_actions",{count:s.appActions}),u.use("vkcom_chat_stats_articles",{count:s.articles}),u.use("vkcom_chat_stats_curators",{count:s.curators}),u.use("vkcom_chat_stats_donut_links",{count:s.donutLinks}),u.use("vkcom_chat_stats_events",{count:s.events}),u.use("vkcom_chat_stats_group_calls",{count:s.groupCalls}),u.use("vkcom_chat_stats_market_albums",{count:s.marketAlbums}),u.use("vkcom_chat_stats_narratives",{count:s.narratives}),u.use("vkcom_chat_stats_podcasts",{count:s.podcasts}),u.use("vkcom_chat_stats_shares",{count:s.shares}),u.use("vkcom_chat_stats_widgets",{count:s.widgets})].join("\n"),d=(s,t,e=!1)=>{const a=s?.members||new Map;return a.size?[`${u.use("vkcom_chat_stats_members")}`,...(0,i.A)(t?.msgCountBySender||new Map).slice(0,e?100:15).map((s,i)=>{const o=a.get(s[0]);return`${i+1}. ${e?o.name:`[${c.z.isUserId(s[0])?`id${s[0]}`:"club"+-s[0]}|${o.name}]`}${o.isMember?"":" [x]"} - ${t?.msgCountBySender.get(s[0])}`})].join("\n"):""},v=(s,t=!1)=>s?.messagesByDay.size?[`${u.use("vkcom_chat_stats_top_dates")}:`,...(0,i.A)(s?.messagesByDay||new Map).slice(0,t?100:15).map((s,t)=>`${t+1}. ${(0,o.A)(s[0],!1)}: ${s[1]}`)].join("\n"):"",p=(s,t=!1)=>s?.words.size?[`${u.use("vkcom_chat_stats_top_words")}:`,...(0,i.A)(s?.words||new Map).slice(0,t?100:15).map((s,t)=>`${t+1}. ${s[0]}: ${s[1]}`)].join("\n"):"",g=(s,t=!1)=>s?.emojis.size?[`${u.use("vkcom_chat_stats_top_emoji")}:`,...(0,i.A)(s?.emojis||new Map).slice(0,t?100:15).map(s=>`${s[0]}: ${s[1]}`)].join("\n"):"",k=(s,t,e=!1)=>[m(s,t),h(t),d(s,t,e),v(t,e),p(t,e),g(t,e),e?`via ${u.use("global_app_name")} (https://vknext.net)`:`via [club207165415|${u.use("global_app_name")}]`].filter(s=>!!s).join("\n\n");a()}catch(s){a(s)}},1)},54968:(s,t,e)=>{e.a(s,async(s,a)=>{try{e.d(t,{A:()=>d});var c=e(74848),i=e(43375),o=e(39107),n=e(96540),r=e(87675),l=e(48591),_=e(46949),u=e(24330),m=e(30311),h=s([r]);r=(h.then?(await h)():h)[0];const d=()=>{const s=(0,r.A)(),{stats:t}=(0,_.b)(),[e,a]=(0,n.useState)(m.u7);if(t?.words?.size)return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(o.Y9Y,{size:"m",after:t.words.size>m.u7&&(0,c.jsx)(o.N_E,{onClick:()=>a(s=>(0,m.Ay)(s,m.u7)),children:e===m.u7?s.use("vkcom_chat_stats_show_more"):s.use("vkcom_chat_stats_show_multiple")}),children:s.use("vkcom_chat_stats_top_words")}),(0,c.jsx)(o.iau,{className:(0,o.xWm)(l.A.chatStatsDiv,l.A.CounterCellContainer),children:(0,i.A)(t?.words||new Map).slice(0,e).map(s=>(0,c.jsx)(u.A,{text:s[0],value:s[1]},s[0]))})]})};a()}catch(s){a(s)}})},62206:(s,t,e)=>{e.a(s,async(s,a)=>{try{e.d(t,{A:()=>d});var c=e(74848),i=e(43375),o=e(39107),n=e(96540),r=e(87675),l=e(48591),_=e(46949),u=e(24330),m=e(30311),h=s([r]);r=(h.then?(await h)():h)[0];const d=()=>{const s=(0,r.A)(),{stats:t}=(0,_.b)(),[e,a]=(0,n.useState)(m.u7);if(t?.emojis?.size)return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(o.Y9Y,{size:"m",after:t.emojis.size>m.u7&&(0,c.jsx)(o.N_E,{onClick:()=>a(s=>(0,m.Ay)(s,m.u7)),children:e===m.u7?s.use("vkcom_chat_stats_show_more"):s.use("vkcom_chat_stats_show_multiple")}),children:s.use("vkcom_chat_stats_top_emoji")}),(0,c.jsx)(o.iau,{className:(0,o.xWm)(l.A.chatStatsDiv,l.A.CounterCellContainer),children:(0,i.A)(t?.emojis||new Map).slice(0,e).map(s=>(0,c.jsx)(u.A,{text:s[0],value:s[1],dangerouslySetInnerHTML:!0},s[0]))})]})};a()}catch(s){a(s)}})},62612:(s,t,e)=>{e.d(t,{o:()=>i});var a=e(74848),c=(e(96540),e(22185));const i=s=>(0,a.jsxs)(c.uC,{viewBox:"0 0 20 20",width:20,height:20,vkuiIconId:"ugc_chat_sticker_circle_fill_black_alpha_20",vkuiAttrs:{fill:"none"},vkuiProps:s,children:[(0,a.jsx)("rect",{width:"20",height:"20",fill:"#000",fillOpacity:.35,rx:"10"}),(0,a.jsx)("path",{fill:"#fff",d:"M9.47 4v2.286c0 2.612 2.105 4.728 4.702 4.728h1.986c-.832 1.797-3.026 3.515-5.655 3.515a6.8 6.8 0 0 1-1.703-.216 12 12 0 0 1-1.896 1.34q-.173.098-.401.21l-.159.078a.604.604 0 0 1-.802-.275.58.58 0 0 1-.017-.477 9 9 0 0 0 .225-.61q.264-.826.404-1.699C5.128 11.93 4.5 10.644 4.5 9.23 4.5 6.599 6.632 4.416 9.47 4m1.4.318v1.968a3.31 3.31 0 0 0 3.302 3.32H16.5z"})]})},63158:(s,t,e)=>{e.a(s,async(s,a)=>{try{e.d(t,{default:()=>m});var c=e(74848),i=e(39107),o=e(87675),n=e(46949),r=e(84833),l=e(92408),_=e(95582),u=s([o,l,_]);[o,l,_]=u.then?(await u)():u;const m=({value:s})=>{const t=(0,o.A)();return(0,c.jsx)(n.V,{value:s,children:(0,c.jsx)(r.A,{size:700,height:"90%",header:(0,c.jsx)(i.aO9,{after:(0,c.jsx)(l.A,{}),children:t.use("vkcom_menu_chat_stats_title")}),children:(0,c.jsx)(_.A,{})})})};a()}catch(s){a(s)}})},70828:(s,t,e)=>{e.d(t,{A:()=>r});var a=e(74848),c=e(48591),i=e(39107),o=e(3772);function n({value:s,isApproximated:t,getRootRef:e}){return(0,a.jsxs)("div",{ref:e,className:c.A.SummaryText__mainValue,children:[t&&"~","number"==typeof s?(0,o.A)(s):s]})}const r=({mainValue:s,percentValue:t,caption:e,isApproximated:o,tooltipText:r})=>{const l=(0,a.jsx)(n,{value:s,isApproximated:!!o});return(0,a.jsxs)("div",{className:c.A.SummaryText,children:[r?(0,a.jsx)(i.m_M,{description:r,appearance:"inversion",placement:"top-start",children:l}):l,!!t&&(0,a.jsxs)("div",{className:c.A.SummaryText__percentValue,children:[t.toFixed(2),"%"]}),(0,a.jsx)("div",{className:(0,i.xWm)(c.A.SummaryText__caption),children:e.trim().replace(/:$/,"")})]})}},84833:(s,t,e)=>{e.d(t,{A:()=>n});var a=e(74848),c=e(39107),i=e(96540),o=e(17100);const n=({children:s,noClose:t=!1,...e})=>{const{open:n,setOpen:r,onClose:l,onClosed:_,onOpen:u,onOpened:m}=(0,o.Fs)(),h=(0,i.useId)();return(0,a.jsx)(c.VWm,{nav:h,open:n,onClose:(s,e)=>{t||(r(!1),l?.(s,e))},onClosed:_,onOpen:u,onOpened:m,...e,children:(0,a.jsx)(i.Suspense,{fallback:(0,a.jsx)(c.qBl,{}),children:s})})}},92408:(s,t,e)=>{e.a(s,async(s,a)=>{try{e.d(t,{A:()=>k});var c=e(74848),i=e(90275),o=e(43027),n=e(99381),r=e(37746),l=e(3178),_=e(39107),u=e(17100),m=e(67078),h=e(53129),d=e(87675),v=e(10634),p=e(46949),g=s([h,d]);[h,d]=g.then?(await g)():g;const k=()=>{const s=(0,d.A)(),{closeModal:t}=(0,u.Hb)(),{stats:e,peerInfo:a,showCleanCache:g}=(0,p.b)();return(0,c.jsx)(i.Ku,{trigger:"hover",placement:"bottom-end",hideOnClick:!0,actions:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(i.vH,{disabled:g,onClick:async()=>{t(),await v.default.deleteData(a?.peerId,a?.groupId),await(0,m.A)({type:"done",text:s.use("vkcom_chat_stats_deleted_from_cache")})},children:s.use("vkcom_chat_stats_delete_from_cache")}),!!a&&(0,c.jsx)(i.vH,{onClick:async()=>{t(),await vkApi.api("messages.send",{random_id:0,peer_id:a?.peerId,group_id:a?.groupId,disable_mentions:1,message:(0,h.A)(a,e)})},children:s.use("vkcom_chat_stats_send_to_chat")}),!!a&&(0,c.jsx)(i.vH,{onClick:async s=>{(0,o.A)(s);const t=new Blob([(0,h.A)(a,e,!0)]),c=URL.createObjectURL(t);await(0,r.A)(c,`${a.name}.txt`),URL.revokeObjectURL(c)},children:s.use("vkcom_chat_stats_save_to_file")})]}),children:(0,c.jsx)(_.qAe,{onClick:n.A,hasActive:!1,"aria-label":s.use("global_close"),children:(0,c.jsx)(l.o,{})})})};a()}catch(s){a(s)}})},95582:(s,t,e)=>{e.a(s,async(s,a)=>{try{e.d(t,{A:()=>p});var c=e(74848),i=e(39107),o=e(96540),n=e(7778),r=e(12938),l=e(62206),_=e(49438),u=e(52495),m=e(37176),h=e(54968),d=s([n,r,l,_,u,m,h]);[n,r,l,_,u,m,h]=d.then?(await d)():d;const v=(0,o.lazy)(()=>Promise.all([e.e(3096),e.e(9014),e.e(6613),e.e(9304)]).then(e.bind(e,9304))),p=()=>(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(r.A,{}),(0,c.jsx)(i.wvv,{}),(0,c.jsx)(m.A,{}),(0,c.jsx)(i.wvv,{}),(0,c.jsx)(n.A,{}),(0,c.jsx)(i.wvv,{}),(0,c.jsx)(_.A,{}),(0,c.jsx)(i.wvv,{}),(0,c.jsx)(o.Suspense,{fallback:(0,c.jsx)(i.qBl,{}),children:(0,c.jsx)(v,{})}),(0,c.jsx)(i.wvv,{}),(0,c.jsx)(u.A,{}),(0,c.jsx)(i.wvv,{}),(0,c.jsx)(h.A,{}),(0,c.jsx)(i.wvv,{}),(0,c.jsx)(l.A,{})]});a()}catch(s){a(s)}})},97307:(s,t,e)=>{function a(s,t){const e=[];for(let a=0;a<s.length;a+=t){const c=s.slice(a,a+t);e.push(c)}return e}e.d(t,{A:()=>a})}}]);