"use strict";(globalThis.webpackChunkvknext=globalThis.webpackChunkvknext||[]).push([[459,3116],{2120:(t,e,o)=>{o.d(e,{A:()=>a});var n=o(53644);const r="wGnjLCZ_kHG1SsM_",c="u4jlO0w2ygIFdPcp",i="h3nvK3QpPJNPuRux",a=({leftIcon:t,onClick:e,text:o})=>{const a=document.createElement("button");if(a.className=r,t){const e=document.createElement("div");e.className=c,e.appendChild((0,n.A)(t)),a.appendChild(e)}if(o){const t=document.createElement("div");t.className=i,t.innerText=o,a.appendChild(t)}return e&&a.addEventListener("click",e),a}},13116:(t,e,o)=>{var n=o(37746),r=o(37445),c=o(2120),i=o(7417),a=o(51018),s=o(91570),l=o(38729);const d=".audio_section__artist .CatalogSection__artist .CatalogBlock .CatalogBlock__artist_header",u=new a.e,_=(0,l.NS)(),m=t=>{for(const e of u.listeners)requestIdleCallback(()=>e(t))},h=()=>{const t=document.querySelector(".audio_section__artist");if(!t)return;const e=t.closest(".audio_page_sections");if(!e)return;const o=e.querySelector(d);o?m(o):e[_]||(e[_]=new MutationObserver(()=>{const t=e.querySelector(d);t&&(e._mbs&&(e._mbs.disconnect(),delete e._mbs),m(t))}),e[_].observe(e,{childList:!0}))};let A=!1;const v=t=>{const e=u.addListener(t);return window.location.pathname.startsWith("/artist/")&&(0,i.n)(h),A||(A=!0,(0,s.R)().then(t=>{t.onLocationChange(t=>{t.startsWith("artist/")&&h()})})),e};var w=o(93819),g=o(22399),p=o(70459);v(async t=>{const e=await w.A,o=t.querySelector(".MusicAuthor_block__actions");if(!o||o.vkn_down_inj)return;o.vkn_down_inj=!0;const i=document.createElement("div");i.className=p.A.AudioArtistHeaderActions;const a=t.querySelector(".MusicAuthor_block__cover");if(a){const t=(0,c.A)({leftIcon:r.A,text:e.use("vkcom_download_cover"),onClick:()=>{const t=(0,g.A)(a.style.backgroundImage);if(!t)return;const e=nav.strLoc.split("/")[1]||"artist";(0,n.A)(t,`${e}_cover.jpg`)}});i.appendChild(t)}o.insertAdjacentElement("beforebegin",i)})},22399:(t,e,o)=>{o.d(e,{A:()=>n});const n=t=>{const e=t.match(/url\("([^"]+)"\)/);if(e)return e[1];throw new Error("url not found")}},37445:(t,e,o)=>{o.d(e,{A:()=>n});const n='<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor"><path clip-rule="evenodd" d="m4 17.75c0-.4142.33579-.75.75-.75h10.5c.4142 0 .75.3358.75.75s-.3358.75-.75.75h-10.5c-.41421 0-.75-.3358-.75-.75z" fill-rule="evenodd"/><path d="m10.7493 2.72581c0-.40086-.3355-.72581-.74931-.72581-.41385 0-.74933.32495-.74933.72581l-.00001 9.72199-3.97032-3.97029c-.29289-.29289-.76777-.29289-1.06066 0s-.29289.76777 0 1.06066l5.24532 5.24533c.2929.2929.76781.2929 1.06071 0l5.2558-5.25585c.2929-.2929.2929-.76777 0-1.06067-.2929-.29289-.7678-.29289-1.0606 0l-3.9716 3.97152z"/></g></svg>\n'},37746:(t,e,o)=>{o.d(e,{A:()=>c});const n=t=>{try{t.dispatchEvent(new MouseEvent("click"))}catch(e){const o=document.createEvent("MouseEvents");o.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(o)}},r=async(t,e="download")=>{const o=document.createElement("a");o.download=e,o.rel="noopener",(globalThis?.chrome?.runtime?.id||globalThis?.browser?.runtime?.id)&&(o.target="_blank"),"string"==typeof t?(o.href=t,o.origin!==location.origin?await(async t=>{try{const e=await globalThis.fetch(t,{method:"HEAD"});return e.status>=200&&e.status<=299}catch(t){console.error(t)}return!1})(o.href)?await(async(t,e)=>{try{const o=await globalThis.fetch(t,{method:"GET"}),n=await o.blob();await r(n,e)}catch(t){console.error(t)}})(t,e):(o.target="_blank",n(o)):n(o)):(o.href=URL.createObjectURL(t),setTimeout(()=>{URL.revokeObjectURL(o.href)},4e4),setTimeout(()=>{n(o)},0))},c=r},53644:(t,e,o)=>{o.d(e,{A:()=>r});let n=0;const r=t=>{const e=!!document.importNode;let o=(new DOMParser).parseFromString(t,"image/svg+xml").documentElement;e&&(o=document.importNode(o,!0));for(const t of o.querySelectorAll("title,desc"))t.remove();for(const t of o.querySelectorAll("[id]")){if(!t.id)continue;const e="vknext_icon-"+n++;let r=!1;for(const n of o.querySelectorAll(`[fill="url(#${t.id})"]`))n.setAttribute("fill",`url(#${e})`),r=!0;r&&(t.id=e)}return o}},70459:(t,e,o)=>{o.d(e,{A:()=>n});const n={AudioPageMainTabBtn:"XYzoAKWs2KhH02Ye",AudioArtistHeaderActions:"v8VBorduCtZgTyyi",VideoPlayerDownloadIcon:"eaSw45y_1KLlo4Gw",SecondaryAttachment__afterItem:"RZ6NWD1WvjAOxG2Y",DownloadManagerPopup:"o9vy1XhnZrkvykUb",VideoPlayerHlsWarning__tooltip:"P9MhdlrtilEQt7Am",VideoPlayerHlsWarning__text:"Xq2PVks6OK6Z74Al",AudioPlaylistSnippet__actions:"FawmW4_Zd1R1BI1E",AudioPlaylistSnippet__actionButton:"ZPr5mXzL52VUPaRe",ActionButton__icon:"_5bFyslOmNjqqP7y",ActionButton__text:"o7YAH98fI9KVToa5",AudioPlayerUserControlsContainer__userButton:"e47qq1XqMPp6oTp7",AudioPlayerPlaybackButton:"wqb5e3cgYZFgHCc1",AudioRowReact__button:"q7d6KTdMjs6HYpKm",PrimaryButton:"Ovh62QE6FZgmlVq8"}}}]);