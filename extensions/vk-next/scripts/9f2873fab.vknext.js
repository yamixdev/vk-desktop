"use strict";(globalThis.webpackChunkvknext=globalThis.webpackChunkvknext||[]).push([[8634],{5679:(e,t,n)=>{n.d(t,{A:()=>i});var o=n(51018),r=n(65879);const a=new o.e,s=new o.e,c=async()=>{(e=>{if(e._meAppHooked)return;e._meAppHooked=!0;const t=e.store.dispatch;let n=e.store.getState()?.ownerId;e.store.dispatch=function(...o){const[r]=o;n||(n=e.store.getState()?.ownerId);let c=!1;for(const e of s.listeners)try{const t=e(r);"boolean"==typeof t&&t&&(c=!0)}catch(e){console.error(e)}if(c)return;const i=Reflect.apply(t,e.store,o);for(const e of a.listeners)try{e(r)}catch(e){console.error(e)}return i}})(await(0,r.A)())},i=(e,t=!1)=>{const n=(t?a:s).addListener(e);return c(),n}},44497:(e,t,n)=>{n.d(t,{A:()=>o});const o=()=>{const e=window.location.pathname.match(/\/convo\/(-?\d+)/);if(e)return Number(e[1])||0;const t=new URLSearchParams(window.location.search),n=Number(t.get("sel"));return n||0}},75275:(e,t,n)=>{n.a(e,async(e,o)=>{try{n.r(t);var r=n(74848),a=n(57580),s=n(22707),c=n(78583),i=n(43171),l=n(3068),d=n(88833),u=n(44497),m=n(43024),f=n(80158),w=e([a]);a=(w.then?(await w)():w)[0];const p=document.createElement("div"),h=document.createElement("div");h.className=f.A.GroupConvoActions;let y=new Set,A=!1;const v=()=>{A||(A=!0,(0,i.A)(()=>{for(const e of y)e();y.clear(),A=!1}))},b=async e=>{if(e){const e=document.getElementsByClassName("im-page--header-more")[0];if(!e)return;if(null===e?.parentElement)return;if(e.parentElement.contains(h))return;e.parentElement.insertBefore(h,e.nextSibling),await(0,s.t)();const{default:t}=await Promise.all([n.e(961),n.e(7397),n.e(1649),n.e(8414),n.e(797),n.e(5224),n.e(7091),n.e(382)]).then(n.bind(n,20382)),{unmount:o}=await(0,l.A)({root:h,content:(0,r.jsx)(t,{isGroup:!0}),disableParentTransformForPositionFixedElements:!0});y.add(o),v()}const t=document.querySelector(".ConvoHeader__controls");if(!t)return;if(t.contains(p))return;t.appendChild(p);const{default:o}=await Promise.all([n.e(961),n.e(7397),n.e(1649),n.e(8414),n.e(797),n.e(5224),n.e(7091),n.e(382)]).then(n.bind(n,20382));await(0,s.t)(),await(0,l.A)({root:p,content:(0,r.jsx)(o,{}),disableParentTransformForPositionFixedElements:!0})},g=async()=>{(0,u.A)()&&await b(!1)};0,m.default.onInited(async()=>{if(m.default.getValue("enableBtnOptions")){try{await g()}catch(e){console.error(e)}(0,c.A)(()=>b(!1)),(0,d.A)(()=>b(!0))}}),o()}catch(e){o(e)}})},78583:(e,t,n)=>{n.d(t,{A:()=>u});var o=n(51018),r=n(22707),a=n(37400),s=n(7417),c=n(94169);const i=new o.e,l=async()=>{if(await(0,a.G)(),await(0,r.t)(),document.querySelector(".VKCOMMessenger__skeletonWrapper"))return void setTimeout(l,800);const e=document.querySelector(".ConvoHeader__controls");e&&(e=>{for(const t of i.listeners)t(e)})(e)};let d=!1;const u=e=>{const t=i.addListener(e);return d?(0,s.n)(l):(d=!0,(0,c.A)(l)),t}},80158:(e,t,n)=>{n.d(t,{A:()=>o});const o={GroupConvoActions:"bx8V1bd59oqCMlTT"}},88833:(e,t,n)=>{n.d(t,{A:()=>m});var o=n(22440),r=n(22707),a=n(48913),s=n(91570),c=n(51018);const i=(0,o.A)(),l=new c.e,d=async e=>{for(const t of l.listeners)try{await(0,r.t)(),t?.(e)}catch(e){console.error(e)}};let u=!1;const m=e=>{const t=l.addListener(e);return(async()=>{if(!i.location.pathname.startsWith("/gim"))return;const e=(await(0,a.e)()).peer;e&&await d(e)})().catch(console.error),u||(u=!0,(async()=>{(await(0,s.R)()).onLocationChange(async e=>{if(!e.startsWith("gim"))return;const t=i.cur.peer;t&&await d(t)})})().catch(console.error)),t}},94169:(e,t,n)=>{n.d(t,{A:()=>l});var o=n(51018),r=n(5679);const a=new o.e,s=async e=>!!document.querySelector(".ConvoMain")&&(await(async e=>{for(const t of a.listeners)try{t?.(e)}catch(e){console.error(e)}})(e),!0);let c,i;(0,r.A)(async e=>{if("UserOpenedConvo"===e.type&&(c=e.peerId,!await s(e.peerId))){i&&clearTimeout(i);const t=setTimeout(async()=>{e.peerId===c?await s(e.peerId)&&clearTimeout(t):clearTimeout(t)},800);i=t}},!0);const l=e=>a.addListener(e)}}]);