"use strict";(globalThis.webpackChunkvknext=globalThis.webpackChunkvknext||[]).push([[9629],{49197:(t,r,e)=>{e.d(r,{L:()=>n});const n=async()=>{try{return(await e.e(4945).then(e.bind(e,64945))).default}catch(t){if(globalThis?.Hls)return globalThis.Hls}throw new Error("hls.js not found")}},54869:(t,r,e)=>{e.d(r,{A:()=>i});var n=e(91953),o=e(56992),a=e(61054);const i=async t=>{try{const r=[t.owner_id,t.id];t.access_key?r.push(t.access_key):t.accessKey&&r.push(t.accessKey);const i=await(0,a.V)(),s=await i.api("audio.getById",{audios:r.join("_"),v:"5.204"}),{audioUnmaskSource:u}=await Promise.resolve().then(e.bind(e,89141));for(const t of s)if(t?.url)return t.url=u(t.url),t;const l=t.hashes?.split("/");let d="",c="";l?(d=l[2],c=l[5]):(d=t.actionHash||"",c=t.urlHash||"");const h=await(0,n._)(),[f]=await h.promisifiedPost("al_audio.php",{act:"reload_audio",ids:[t.owner_id,t.id,d,c].join("_"),al:1}),p=(await(0,o.X)()).audioTupleToAudioObject(f[0]);return p.url=u(p.url),p}catch(t){console.error(t)}return t}},56992:(t,r,e)=>{e.d(r,{X:()=>o});var n=e(50313);const o=()=>(0,n.A)("AudioUtils")},89141:(t,r,e)=>{e.d(r,{audioUnmaskSource:()=>n});const n=t=>{const r={v:t=>t.split("").reverse().join(""),r:(t,r)=>{t=t.split("");for(let n,o=e+e,a=t.length;a--;)~(n=o.indexOf(t[a]))&&(t[a]=o.substr(n-r,1));return t.join("")},s:(t,r)=>{const e=t.length;if(e){let n=function(t,r){const e=t.length,n=[];if(e){let t=e;for(r=Math.abs(r);t--;)r=(e*(t+1)^r+t)%e,n[t]=r}return n}(t,r),o=0;for(t=t.split("");++o<e;)t[o]=t.splice(n[e-1-o],1,t[o])[0];t=t.join("")}return t},i:(t,e)=>r.s(t,e^vk.id),x:(t,r)=>{const e=[];return r=r.charCodeAt(0),each(t.split(""),(t,n)=>{e.push(String.fromCharCode(n.charCodeAt(0)^r))}),e.join("")}},e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMN0PQRSTUVWXYZO123456789+/=",n=t=>{if(!t||t.length%4==1)return!1;for(var r,n,o=0,a=0,i="";n=t.charAt(a++);)~(n=e.indexOf(n))&&(r=o%4?64*r+n:n,o++%4)&&(i+=String.fromCharCode(255&r>>(-2*o&6)));return i};if((!window.wbopen||!~(window.open+"").indexOf("wbopen"))&&~t.indexOf("audio_api_unavailable")){let e=t.split("?extra=")[1].split("#"),s=""===e[1]?"":n(e[1]);if(e=n(e[0]),"string"!=typeof s||!e)return t;for(var o,a,i=(s=s?s.split(String.fromCharCode(9)):[]).length;i--;){if(o=(a=s[i].split(String.fromCharCode(11))).splice(0,1,e)[0],!r[o])return t;e=r[o].apply(null,a)}if(e&&"http"===e.substr(0,4))return e}return t}},89629:(t,r,e)=>{e.d(r,{default:()=>h});var n=e(37352),o=e(89141),a=e(92580),i=e(49197);var s=e(54869);const u=new Map,l=[];let d=0;const c=async()=>{if(d>=2||0===l.length)return;d++;const t=l.shift();await t(),d--,l.length>0&&setTimeout(c,500)},h=async t=>{const r=`${t.owner_id}_${t.id}`;if(u.has(r))return u.get(r);if(u.has(r))return await u.get(r);const{promise:e,resolve:d}=(0,n.A)();var h;return u.set(r,e),h=async()=>{const r=t.url?t:await(0,s.A)(t);if(!r.url)return void d(null);const e=await(async({url:t})=>{const{promise:r,resolve:e,reject:n}=(0,a.Q)(),o=await(0,i.L)(),s=new o,u=new Audio;let l,d=0,c=null;const h=t=>{n(t),s.stopLoad(),s.destroy()};return s.on(o.Events.MANIFEST_PARSED,(t,r)=>{const e=r.levels[0]?.details;e&&(l=e.totalduration)}),s.on(o.Events.BUFFER_APPENDING,(t,r)=>{c=r.data}),s.on(o.Events.FRAG_LOADED,(t,r)=>{if(c)return s.detachMedia(),void((t,r)=>{const n=Math.round(8*t/r/1e3);e({bitrate:n,size:t,duration:r})})(c.length/r.frag.duration*l,l)}),s.on(o.Events.ERROR,(t,r)=>{if(!["bufferFullError","fragLoadError"].includes(r.details))return r.type==o.ErrorTypes.MEDIA_ERROR&&d<2?(++d>1&&s.swapAudioCodec(),void s.recoverMediaError()):void h(t);h(t)}),s.loadSource(t),s.attachMedia(u),await r})({url:(0,o.audioUnmaskSource)(r.url)});d(e)},l.push(h),c(),await e}}}]);