"use strict";(globalThis.webpackChunkvknext=globalThis.webpackChunkvknext||[]).push([[6741],{6987:(e,t,s)=>{s.a(e,async(e,n)=>{try{s.r(t),s.d(t,{default:()=>S});var r=s(74848),o=s(52370),l=s(8015),i=s(39107),a=s(96540),u=s(74225),c=s.n(u),f=s(66556),d=s(58207),_=s(29783),g=s(81543),p=s(49747),h=s(23050),m=s(19850),w=s(57610),b=s(5211),x=s(57087),v=s(85252),y=s(11157),A=s(68741),j=e([l,d,_,p,b]);[l,d,_,p,b]=j.then?(await j)():j;const k=()=>{const e=(0,l.A)(),[t,s]=(0,a.useState)(null),[n,u]=(0,a.useState)(0),[d,j]=(0,a.useState)(0),[k,S]=(0,a.useState)(null),[C,I]=(0,a.useState)(null),[J,F]=(0,a.useState)(null),L=(0,w.F9)(),[W]=(0,v.A)(),Y=(0,y.Gz)(),{viewer:z}=(0,x.ur)();c()(async e=>{s(null),u(0),j(0),S(null),I(null),F(null);const t=[];for await(const{offset:s,count:n,items:r}of(0,m.A)(L)){if(!e())return;if(0===s&&(u(n),j(0)),0===n){u(s);break}for(const e of r)e.id!==z?.id&&t.push(e);j(t.length)}e()&&s(t)},[L]);const T=async()=>{if(J){if(!W)return Y.push(A.JZ.root.main.prime);j(0),S(J.length);for(const e of J){try{L&&await o.vkapiWrapper.groups.removeUser({group_id:L,user_id:e}),await o.vkapiWrapper.friends.deleteSubscriber({subscriber_id:e})}catch(e){console.error(e)}j(e=>e+1)}}};return null!==k?d===k?(0,r.jsx)(p.A,{}):(0,r.jsx)(i.YJl,{children:(0,r.jsx)(h.A,{label:e.use("settings_cleaner_followers_removing"),value:d,max:k})}):null===t?(0,r.jsx)(i.YJl,{children:(0,r.jsx)(h.A,{label:e.use("settings_cleaner_followers_getting"),value:d,max:n})}):null!==C&&null!==J?(0,r.jsxs)(i.YJl,{children:[(0,r.jsx)(_.A,{items:C,onChange:e=>F(e),ListItem:g.A}),(0,r.jsx)(i.eIh,{children:(0,r.jsx)(i.$nd,{mode:"primary",stretched:!0,size:"m",disabled:0===J.length,onClick:T,children:e.use("settings_cleaner_followers_clear_button",{count:J.length})})})]}):(0,r.jsx)(b.A,{friends:t,onSelectedFriends:e=>{if(!W)return void Y.push(A.JZ.root.main.prime);const t=new Set;for(const s of e)s.id&&(t.add(s.id),f.A.set(s.id,s));const s=Array.from(t);I(s),F(s)},selectCategoryLabel:e.use("settings_cleaner_followers_select_category"),warningLabel:e.use("settings_cleaner_followers_warning"),confirmButtonLabelKey:"settings_cleaner_followers_clear_button"})},S=()=>{const e=(0,l.A)();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.A,{children:e.use("settings_menu_cleaner_followers_title")}),(0,r.jsx)(k,{})]})};n()}catch(e){n(e)}})},19850:(e,t,s)=>{s.d(t,{A:()=>o});var n=s(52370);const r=async({offset:e,count:t=1e3,fields:s,groupId:r})=>r?await n.vkapiWrapper.groups.getMembers({group_id:r,offset:e,count:t,fields:s}):await n.vkapiWrapper.users.getFollowers({offset:e,count:t,fields:s});const o=async function*(e=0){const t=await r({offset:0,count:0,groupId:e}),s=t?.count??0;if(yield{count:s,offset:0,items:[]},0===s)return;let n=0;for(;n<s;){const{items:t}=await r({offset:n,count:1e3,fields:["deactivated","has_photo","last_seen","photo_100","photo_id","can_write_private_message","online_info"],groupId:e});if(0===t.length)break;yield{count:s,offset:n,items:t||[]},n+=1e3}}}}]);