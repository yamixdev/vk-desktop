"use strict";(globalThis.webpackChunkvknext=globalThis.webpackChunkvknext||[]).push([[5796],{6962:(e,l,t)=>{t.d(l,{k:()=>s});var s=(0,t(78414).mT)("Icon12Dropdown","dropdown_12","0 0 12 8",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 12 8" id="dropdown_12"><path fill="currentColor" fill-rule="evenodd" d="M2.156 2.295a.75.75 0 0 1 1.051-.137L6 4.306l2.793-2.148a.75.75 0 1 1 .914 1.189l-3.25 2.5a.75.75 0 0 1-.914 0l-3.25-2.5a.75.75 0 0 1-.137-1.052" clip-rule="evenodd" /></symbol>',12,8,!1,void 0)},11617:(e,l,t)=>{t.d(l,{$:()=>s});var s=(0,t(78414).mT)("Icon16Done","done_16","0 0 16 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16" id="done_16"><path fill="currentColor" d="M13.743 3.756a.87.87 0 0 1 0 1.237l-7.317 7.25a.88.88 0 0 1-1.242 0L2.257 9.366a.87.87 0 0 1 0-1.237.88.88 0 0 1 1.242 0l2.306 2.261L12.5 3.756a.88.88 0 0 1 1.242 0" /></symbol>',16,16,!1,void 0)},27182:(e,l,t)=>{t.d(l,{W:()=>n});var s=t(74848),r=t(96540),o=t(22185);const n=e=>{const l=r.useId();return(0,s.jsxs)(o.uC,{viewBox:"0 0 20 20",width:20,height:20,vkuiIconId:"crown_circle_fill_vk_next_20",vkuiProps:e,children:[(0,s.jsx)("rect",{width:"20",height:"20",fill:`url(#crown_circle_fill_vk_next_20${l}a)`,rx:"10"}),(0,s.jsx)("path",{fill:"#fff",fillRule:"evenodd",d:"M10.549 7.138a1.14 1.14 0 0 0 .59-.999 1.14 1.14 0 1 0-1.688 1L7.844 9.54a.2.2 0 0 1-.284.051L6.167 8.585a1.1 1.1 0 0 0 .112-.494 1.14 1.14 0 1 0-1.14 1.139l.572 1.772h8.595l.555-1.772a1.14 1.14 0 1 0-1.023-.636l-1.393 1.007a.2.2 0 0 1-.283-.051L10.55 7.138ZM6 12.202h8l-.128.622a1.72 1.72 0 0 1-1.688 1.376H7.817a1.72 1.72 0 0 1-1.687-1.374z",clipRule:"evenodd"}),(0,s.jsx)("defs",{children:(0,s.jsxs)("linearGradient",{id:`crown_circle_fill_vk_next_20${l}a`,x1:"17",x2:"3",y1:"3",y2:"17",gradientUnits:"userSpaceOnUse",children:[(0,s.jsx)("stop",{offset:"0%",style:{stopColor:"#8a13d6",stopOpacity:"1"}}),(0,s.jsx)("stop",{offset:"100%",style:{stopColor:"#7d81ff",stopOpacity:"1"}})]})})]})}},38643:(e,l,t)=>{t.d(l,{A:()=>n});var s=t(74848),r=t(39107),o=t(96540);const n=({wallYears:e,label:l,onSelected:t})=>{const[n,a]=(0,o.useState)([]),i=(0,o.useMemo)(()=>Array.from(e.values()),[e]).reduce((e,l)=>e+l.size,0),c=n.reduce((l,t)=>l+(e.get(t)?.size||0),0);return(0,o.useEffect)(()=>{const l=new Set;for(const t of n){const s=e.get(t);s&&s.forEach(l.add,l)}t(l)},[n,e]),(0,s.jsxs)(r.nD3,{children:[(0,s.jsxs)(r.nD3.Summary,{iconPosition:"before",disabled:0===i,multiline:!0,children:[l," (",0===i?0:`${c}/${i}`,")"]}),(0,s.jsx)(r.nD3.Content,{children:(0,s.jsx)(r.iau,{children:Array.from(e.entries()).map(([e,l])=>(0,s.jsxs)(r.Sc0,{checked:n.includes(e),onChange:()=>a(l=>l.includes(e)?l.filter(l=>l!==e):[...l,e]),children:[e," (",l.size,")"]},e))})})]})}},47012:(e,l,t)=>{t.a(e,async(e,s)=>{try{t.d(l,{A:()=>_});var r=t(74848),o=t(7139),n=t(8015),a=t(11157),i=t(39107),c=t(96540),d=t(57610),u=t(38643),f=e([o,n]);[o,n]=f.then?(await f)():f;const _=({ownerWallYears:e,othersWallYears:l,archivedWallYears:t,onSelected:s})=>{const f=(0,n.A)(),_=(0,a.Gz)(),[w,h]=(0,c.useState)({owner:new Set,others:new Set,archived:new Set}),v=0===(0,d.F9)(),x=(e,l)=>{h(t=>({...t,[e]:l}))},p=(0,c.useMemo)(()=>{const e=new Set;return w.owner.forEach(e.add,e),w.others.forEach(e.add,e),w.archived.forEach(e.add,e),e},[w.owner,w.others,w.archived]);return(0,r.jsxs)(i.YJl,{children:[(0,r.jsxs)(i.eIh,{top:f.use("settings_cleaner_wall_select"),children:[(0,r.jsx)(u.A,{wallYears:e,label:f.use("settings_cleaner_wall_owner"),onSelected:e=>x("owner",e)}),(v||l.size>0)&&(0,r.jsx)(u.A,{wallYears:l,label:f.use("settings_cleaner_wall_others"),onSelected:e=>x("others",e)}),(v||t.size>0)&&(0,r.jsx)(u.A,{wallYears:t,label:f.use("settings_cleaner_wall_archived"),onSelected:e=>x("archived",e)})]}),(0,r.jsx)(i.iau,{children:(0,r.jsx)(i.lZ$,{extraSubtitle:f.use("settings_cleaner_wall_warning")})}),(0,r.jsx)(i.eIh,{children:(0,r.jsx)(i.$nd,{mode:"primary",stretched:!0,size:"m",disabled:0===p.size,onClick:()=>{_.showPopout((0,r.jsx)(i.FcD,{actions:[{title:f.use("global_cancel"),mode:"cancel"},{title:f.use("global_remove"),mode:"destructive",action:()=>s(p)}],onClose:()=>_.hidePopout(),title:f.use("settings_confirm_action"),description:f.use("settings_cleaner_wall_confirm_clear",{count:p.size}),actionsLayout:"horizontal"}))},after:(0,r.jsx)(o.A.Prime,{}),children:f.use("settings_cleaner_wall_clear_button",{count:p.size})})})]})};s()}catch(e){s(e)}})},51061:(e,l,t)=>{t.d(l,{T:()=>s});var s=(0,t(78414).mT)("Icon56CheckCircleOutline","check_circle_outline_56","0 0 56 56",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 56 56" id="check_circle_outline_56"><g fill="none" fill-rule="nonzero"><path d="M0 0h56v56H0z" /><path fill="currentColor" d="M28 4c13.255 0 24 10.745 24 24S41.255 52 28 52 4 41.255 4 28 14.745 4 28 4m0 3C16.402 7 7 16.402 7 28s9.402 21 21 21 21-9.402 21-21S39.598 7 28 7m8.94 13.94a1.5 1.5 0 0 1 2.12 2.12l-14 14a1.5 1.5 0 0 1-2.12 0l-7-7a1.5 1.5 0 0 1 2.12-2.12L24 33.878Z" /></g></symbol>',56,56,!1,void 0)},65406:(e,l,t)=>{t.a(e,async(e,s)=>{try{t.r(l),t.d(l,{default:()=>y});var r=t(74848),o=t(52370),n=t(58006),a=t(85252),i=t(8015),c=t(68741),d=t(11157),u=t(39107),f=t(96540),_=t(58207),w=t(49747),h=t(23050),v=t(80580),x=t(57610),p=t(47012),g=e([i,_,w,p]);[i,_,w,p]=g.then?(await g)():g;const m=()=>{const e=(0,i.A)(),{wallYears:l,progress:t,allCount:s}=(0,v.A)("owner"),{wallYears:n,progress:_,allCount:g}=(0,v.A)("others"),{wallYears:m,progress:y,allCount:j}=(0,v.A)("archived"),b=0===(0,x.F9)(),[S,A]=(0,f.useState)(null),[C,k]=(0,f.useState)(0),[Y]=(0,a.A)(),z=(0,d.Gz)();return null===l||null===n||null===m?(0,r.jsxs)(u.YJl,{children:[(0,r.jsx)(h.A,{value:t,max:s,label:e.use("settings_cleaner_wall_getting_owner")}),(b||_>0)&&(0,r.jsx)(h.A,{value:_,max:g,label:e.use("settings_cleaner_wall_getting_others")}),(b||y>0)&&(0,r.jsx)(h.A,{value:y,max:j,label:e.use("settings_cleaner_wall_getting_archived")})]}):null!==S?C===S?(0,r.jsx)(w.A,{}):(0,r.jsx)(u.YJl,{children:(0,r.jsx)(h.A,{value:C,max:S,label:e.use("settings_cleaner_wall_clearing")})}):(0,r.jsx)(p.A,{ownerWallYears:l,othersWallYears:n,archivedWallYears:m,onSelected:async e=>{if(Y){A(e.size),k(0);for(const l of e)try{await o.vkapiWrapper.wall.delete({owner_id:l.owner_id,post_id:l.id}),k(e=>e+1)}catch(e){console.error(e)}}else z.push(c.JZ.root.main.prime)}})},y=()=>{const e=(0,i.A)(),l=(0,n.A)({isGroup:!0});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(_.A,{children:e.use("settings_menu_cleaner_wall_title")}),(0,r.jsx)(u.guY,{style:{maxHeight:l},children:(0,r.jsx)(m,{})})]})};s()}catch(e){s(e)}})},69075:(e,l,t)=>{t.d(l,{B:()=>s});var s=(0,t(78414).mT)("Icon20FavoriteCircleFillYellow","favorite_circle_fill_yellow_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="favorite_circle_fill_yellow_20"><linearGradient id="favorite_circle_fill_yellow_20_a" x1="-10" x2="10" y1="10" y2="30" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#ffb73d" /><stop offset="1" stop-color="#ffa000" /></linearGradient><path fill="url(#favorite_circle_fill_yellow_20_a)" d="M0 10C0 4.477 4.477 0 10 0s10 4.477 10 10-4.477 10-10 10S0 15.523 0 10" /><path fill="#fff" d="m11.805 7.566 2.39.235c.831.081 1.086.912.444 1.458l-1.87 1.591.694 2.592c.228.851-.48 1.366-1.189.854l-2.273-1.643-2.273 1.643c-.706.51-1.417-.003-1.188-.854l.694-2.592-1.87-1.59c-.646-.549-.392-1.377.443-1.46l2.39-.234 1.052-2.483c.33-.778 1.174-.777 1.504 0z" /></symbol>',20,20,!1,void 0)},80580:(e,l,t)=>{t.d(l,{A:()=>d});var s=t(96540),r=t(74225),o=t.n(r),n=t(52370);const a=({offset:e=0,filter:l="all",count:t=100,owner_id:s})=>{const r={offset:e,count:t,filter:l,extended:1};return s&&(r.owner_id=s),n.vkapiWrapper.wall.get(r)};const i=async function*(e,l=0){try{const{count:t}=await a({offset:0,count:0,filter:e,owner_id:l?-l:void 0});if(yield{count:t,offset:0,items:[]},0===t)return;let s=0;for(;s<t;){const r=[a({offset:s,filter:e,owner_id:l?-l:void 0})];s+100<t&&r.push(a({offset:s+100,filter:e,owner_id:l?-l:void 0}));for(const e of r){try{const{items:r}=await e;if(0===r.length)return;console.log("[vknext/cleaner/getWall]",{items:r,groupId:l,offset:s,allCount:t}),yield{count:t,offset:s,items:r||[]}}catch(e){console.error(e)}s+=100}}}catch(e){console.error(e),yield{count:0,offset:0,items:[]}}};var c=t(57610);const d=(e="")=>{const[l,t]=(0,s.useState)(null),[r,n]=(0,s.useState)(null),[a,d]=(0,s.useState)(0),[u,f]=(0,s.useState)(0),_=(0,c.F9)();return o()(async l=>{if(""===e)return;t(null),n(null),d(0),f(0);const s=new Set,r=new Map;for await(const{offset:t,count:o,items:n}of i(e,_)){if(!l())return;if(0===t&&(f(o),d(0)),0===o){f(t);break}for(const e of n)if(e.can_delete&&(s.add(e),e.owner_id,e.date)){const l=new Date(1e3*e.date).getFullYear(),t=r.get(l)||new Set;t.add(e),r.set(l,t)}d(s.size)}l()&&(t(Array.from(s)),n(r))},[e,_]),{wall:l,wallYears:r,progress:a,allCount:u}}}}]);