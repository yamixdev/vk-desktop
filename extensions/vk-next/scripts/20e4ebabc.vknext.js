"use strict";(globalThis.webpackChunkvknext=globalThis.webpackChunkvknext||[]).push([[2135],{2120:(e,t,n)=>{n.d(t,{A:()=>s});var o=n(53644);const r="wGnjLCZ_kHG1SsM_",c="u4jlO0w2ygIFdPcp",a="h3nvK3QpPJNPuRux",s=({leftIcon:e,onClick:t,text:n})=>{const s=document.createElement("button");if(s.className=r,e){const t=document.createElement("div");t.className=c,t.appendChild((0,o.A)(e)),s.appendChild(t)}if(n){const e=document.createElement("div");e.className=a,e.innerText=n,s.appendChild(e)}return t&&s.addEventListener("click",t),s}},13674:(e,t,n)=>{n.d(t,{A:()=>a});var o=n(48913),r=n(79068),c=n(51018);const a=e=>{const t=new c.e,n=n=>{let o=n[e];Object.defineProperty(n,e,{get:()=>o,set:e=>{o=e;for(const e of t.listeners)try{e(o)}catch(e){console.error(e)}return!0},configurable:!0,enumerable:!0})};let a=!1;const s=async c=>{a||(a=!0,await(async()=>{let c=await(0,o.e)();n(c),(0,r.A)(o=>{if(c[e]!==o[e])for(const n of t.listeners)try{n(o[e])}catch(e){console.error(e)}n(o),c=o})})());c((await(0,o.e)())[e])};return e=>{const n=t.addListener(e);return s(e),n}}},21850:(e,t,n)=>{n.d(t,{A:()=>h});var o=n(92046),r=n(22707),c=n(51018),a=n(48913),s=n(91570),l=n(33012);const i=new c.e,d=["group","public","profile","groups","groups_edit"],u=async(e="")=>{await(0,r.t)(),document.getElementById("public")||await(0,o.c)(1e3),d.includes(e)&&(()=>{for(const e of i.listeners)try{e()}catch(e){console.error(e)}})()};let w=!1;const h=e=>{const t=i.addListener(e);return(async e=>{const t=await(0,a.e)();if(d.includes(t?.module)&&e(),w)return;w=!0,(0,l.A)(u),(await(0,s.R)()).subscribeOnModuleEvaluated(u)})(e),t}},22399:(e,t,n)=>{n.d(t,{A:()=>o});const o=e=>{const t=e.match(/url\("([^"]+)"\)/);if(t)return t[1];throw new Error("url not found")}},33012:(e,t,n)=>{n.d(t,{A:()=>o});const o=(0,n(13674).A)("module")},37746:(e,t,n)=>{n.d(t,{A:()=>c});const o=e=>{try{e.dispatchEvent(new MouseEvent("click"))}catch(t){const n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(n)}},r=async(e,t="download")=>{const n=document.createElement("a");n.download=t,n.rel="noopener",(globalThis?.chrome?.runtime?.id||globalThis?.browser?.runtime?.id)&&(n.target="_blank"),"string"==typeof e?(n.href=e,n.origin!==location.origin?await(async e=>{try{const t=await globalThis.fetch(e,{method:"HEAD"});return t.status>=200&&t.status<=299}catch(e){console.error(e)}return!1})(n.href)?await(async(e,t)=>{try{const n=await globalThis.fetch(e,{method:"GET"}),o=await n.blob();await r(o,t)}catch(e){console.error(e)}})(e,t):(n.target="_blank",o(n)):o(n)):(n.href=URL.createObjectURL(e),setTimeout(()=>{URL.revokeObjectURL(n.href)},4e4),setTimeout(()=>{o(n)},0))},c=r},52135:(e,t,n)=>{n.r(t);var o=n(22440),r=n(37746),c=n(94229),a=n(2120),s=n(93819),l=n(21850),i=n(22399);const d=(0,o.A)();(0,l.A)(async()=>{const e=document.querySelector(".redesigned-group-cover__img,._page_cover");if(!e||!e.style.backgroundImage||e.vkn_down_inj)return;e.vkn_down_inj=!0;const t=await s.A;e.appendChild((0,a.A)({leftIcon:c.A,text:t.use("global_download"),onClick:()=>(e=>{const t=`cover${d.cur.oid||""}.jpg`,n=(0,i.A)(e.style.backgroundImage);n&&(0,r.A)(n,t)})(e)}))})},53644:(e,t,n)=>{n.d(t,{A:()=>r});let o=0;const r=e=>{const t=!!document.importNode;let n=(new DOMParser).parseFromString(e,"image/svg+xml").documentElement;t&&(n=document.importNode(n,!0));for(const e of n.querySelectorAll("title,desc"))e.remove();for(const e of n.querySelectorAll("[id]")){if(!e.id)continue;const t="vknext_icon-"+o++;let r=!1;for(const o of n.querySelectorAll(`[fill="url(#${e.id})"]`))o.setAttribute("fill",`url(#${t})`),r=!0;r&&(e.id=t)}return n}},79068:(e,t,n)=>{n.d(t,{A:()=>l});var o=n(51018),r=n(54251),c=n(48913);const a=new o.e;let s=!1;const l=e=>{const t=a.addListener(e);return(async e=>{s?await(0,c.e)():(s=!0,(0,r.A)("cur",e=>{for(const t of a.listeners)try{t(e)}catch(e){console.error(e)}})),e(window.cur)})(e),t}},94229:(e,t,n)=>{n.d(t,{A:()=>o});const o='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M12.002 2a.9.9 0 0 1 .9.9v11.002l4.562-4.631a.9.9 0 1 1 1.283 1.263l-6.104 6.195a.9.9 0 0 1-1.284-.001l-6.09-6.206a.9.9 0 1 1 1.286-1.26l4.547 4.633V2.9a.9.9 0 0 1 .9-.9Zm-8 18.1a.9.9 0 0 1 .9-.9h14.2a.9.9 0 1 1 0 1.8h-14.2a.9.9 0 0 1-.9-.9Z" clip-rule="evenodd"/></svg>\n'}}]);