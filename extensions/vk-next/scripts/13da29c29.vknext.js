"use strict";(globalThis.webpackChunkvknext=globalThis.webpackChunkvknext||[]).push([[8086],{14460:(e,t,n)=>{n.d(t,{A:()=>o});const o={deletedIcon:"q7DX20zs5iVed0ei"}},37643:(e,t,n)=>{n.d(t,{A:()=>d});var o=n(74848),s=n(43171),a=n(3068),r=n(14460);const l=new Set;let c=!1;const i=async(e,t=0)=>{if(!t)return;const{default:r}=await Promise.all([n.e(961),n.e(7397),n.e(1649),n.e(8414),n.e(2665)]).then(n.bind(n,22665)),{unmount:i}=await(0,a.A)({root:e,content:(0,o.jsx)(r,{time:t}),noStyling:!0,disableAppRoot:!0,disableAnchorTextDecoration:!0,disableParentTransformForPositionFixedElements:!0});l.add(i),c||(c=!0,(0,s.A)(()=>{for(const e of l)e();l.clear(),c=!1}))},d=(e,t)=>{if(e.getElementsByClassName(r.A.deletedIcon).length)return;const n=e.querySelector(".ConvoMessageBottomInfo,.ConvoMessage__info");if(n){const o=document.createElement("span");return requestAnimationFrame(()=>{e.getElementsByClassName(r.A.deletedIcon).length?o.remove():i(o,t).catch(console.error)}),void n.append(o)}const o=e.querySelector(".ConvoMessageInfoWithoutBubbles");if(o){const n=document.createElement("div");n.className="ConvoMessageInfoWithoutBubbles__statusIcon",requestAnimationFrame(()=>{e.getElementsByClassName(r.A.deletedIcon).length?n.remove():i(n,t).catch(console.error)}),o.prepend(n)}}},85199:(e,t,n)=>{n.a(e,async(e,o)=>{try{n.r(t);var s=n(57580),a=n(32441),r=n(43024),l=n(95728),c=n(91674),i=n(37643),d=e([s]);s=(d.then?(await d)():d)[0];let u=null;const m=()=>{u||(u=(0,a.A)(e=>{const{fiber:t}=(0,l.A)(e);if(!t)return;const n=t?.return?.memoizedProps?.message;if(!n)return void console.warn("[VK Next | showDeletedMsg]: can't find message props",{fiber:t,convoMessage:e});const o=(0,c._)(n.peerId,n.cmid);o&&(0,i.A)(e,o)}))},g=(e,t)=>{t?m():u&&(u(),u=null)};0,r.default.onInited(()=>{r.default.getValue("showDeletedMsg")&&m()}),r.default.addChangeKeyListener("showDeletedMsg",g),o()}catch(e){o(e)}})},91674:(e,t,n)=>{n.d(t,{_:()=>a,m:()=>s});const o=new Map,s=(e,t,n)=>{o.set(`${e}_${t}`,n)},a=(e,t)=>o.get(`${e}_${t}`)}}]);