"use strict";(globalThis.webpackChunkvknext=globalThis.webpackChunkvknext||[]).push([[2350,3097],{1003:(e,n,t)=>{t.d(n,{A:()=>o});const o=(e=window.location.pathname)=>{const n=e.match(/^\/?gim(\d+)/);return n&&n[1]?-parseInt(n[1]):window.vk.id}},2184:(e,n,t)=>{t.d(n,{U:()=>o});var o=(0,t(78414).mT)("Icon16Chevron","chevron_16","0 0 12 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 12 16" id="chevron_16"><path fill="currentColor" d="M7.227 8 3.864 4.636a.9.9 0 0 1 1.272-1.272l4 4a.9.9 0 0 1 0 1.272l-4 4a.9.9 0 0 1-1.272-1.272z" /></symbol>',12,16,!1,void 0)},7646:(e,n,t)=>{t.d(n,{A:()=>c});var o=t(74848),i=t(39107),s=t(42335);const c=({className:e,children:n,getRootRef:t,useScrollView:c,...r})=>c?(0,o.jsx)(i.guY,{getRootRef:t,className:(0,i.xWm)(s.A.ActionsMenu,e),children:n}):(0,o.jsx)("div",{ref:t,...r,className:(0,i.xWm)(s.A.ActionsMenu,e),children:n})},18082:(e,n,t)=>{t.a(e,async(e,o)=>{try{t.r(n),t.d(n,{getAdmins:()=>M});var i=t(57580),s=t(95728),c=t(22707),r=t(7618),a=t(37400),l=t(48913),d=t(82181),u=t(32441),A=t(93819),m=t(22350),h=t(65879),f=t(1003),g=t(44497),p=t(43024),v=e([i]);i=(v.then?(await v)():v)[0];const w="var cs=API.messages.getConversationsById({group_id:Args.gid,peer_ids:Args.peer_ids}).items[0].chat_settings;var a=cs.admin_ids;if(!a){a=[];};if(cs.owner_id){a.push(cs.owner_id);};return a;",x=new Map,_=new Map,M=e=>{if(!e)return Promise.resolve(new Set);const n=(0,f.A)(),t=r.z.isGroupId(n);if(t){if(_.has(e))return _.get(e)}else if(x.has(e))return x.get(e);const o=window.vkApi.api("execute",{gid:t?n:0,peer_ids:e,code:w}).then(e=>new Set(Array.isArray(e)?e:[]));return t?_.set(e,o):x.set(e,o),o};(0,d.A)(async(e,n)=>{if(!p.default.getValue("showAdminsChat"))return;if(await(0,c.t)(),e.__sac)return;e.__sac=!0;const o=await(0,l.e)();if(!(await M(o.peer)).has(n))return;await(0,a.G)();const{default:i}=await t.e(6264).then(t.bind(t,36264)),s=await A.A,r=(0,m.default)({allIcons:[{header:s.use("vkcom_role_admin"),icon:i}],displayedIcons:[{header:"",icon:i}]});r.style.order="1",await(0,c.t)();const d=e.querySelector(".im-mess-stack--lnk");d&&d.appendChild(r)});const y=async e=>{if(!p.default.getValue("showAdminsChat"))return;if(await(0,c.t)(),e.__sac)return;e.__sac=!0,await(0,a.G)();const{fiber:n}=(0,s.A)(e),o=Number(n?.return?.memoizedProps?.message?.authorId);if(!o)return;const i=Number(n?.return?.memoizedProps?.peer?.id)||(0,g.A)();if(!i)return;const{store:r}=await(0,h.A)();if(!r)return;const{adminIds:l}=r.getState().convos.get(i)?.members||{};if(!l)return;if(!l.has(o))return;await(0,a.G)();const{default:d}=await t.e(6264).then(t.bind(t,36264)),u=await A.A,f=(0,m.default)({allIcons:[{header:u.use("vkcom_role_admin"),icon:d}],displayedIcons:[{header:"",icon:d}]});f.style.order="1",await(0,c.t)();const v=e.querySelector(".PeerTitle");v&&v.appendChild(f)};let C=null;0,p.default.onInited(()=>{p.default.getValue("showAdminsChat")&&(C=(0,u.A)(y))}),p.default.addChangeKeyListener("showAdminsChat",(e,n)=>{C&&(C(),C=null),n&&(C=(0,u.A)(y))}),o()}catch(e){o(e)}})},22350:(e,n,t)=>{t.r(n),t.d(n,{default:()=>m});var o=t(74848),i=t(91570),s=t(3068),c=t(90275),r=t(43027),a=t(2184),l=t(50563),d=t(27795);const u=({hideLeftIcon:e=!1,chevron:n=!1,icon:t,color:i,header:s,text:r,onClick:u,...A})=>(0,o.jsx)(c.vH,{className:l.A.VerifiedItem,type:"primary",size:"mini",subtitle:r,multiline:!0,leftIcon:!e&&(0,o.jsx)(d.A,{icon:t,color:i}),rightIcon:n&&(0,o.jsx)(a.U,{color:"var(--vkui--color_icon_secondary)"}),hasHover:!!u,onClick:u,...A,children:s}),A=({displayedIcons:e,allIcons:n})=>{const t=1===n.length;return(0,o.jsx)(c.Ku,{restoreFocus:!1,autoFocus:!1,hideOnClick:!1,trigger:"hover",placement:"bottom",actions:n.map(({items:e,...n},i)=>n.header?e&&e?.length>0?(0,o.jsx)(c.Ku,{trigger:"hover",placement:"right-start",offsetByMainAxis:0,offsetByCrossAxis:-4,hideOnClick:!1,actions:e.map((e,n)=>(0,o.jsx)(u,{...e},`item-${n}`)),children:(0,o.jsx)(u,{chevron:!0,hideLeftIcon:t,...n})},`all-icon-popover-${i}`):(0,o.jsx)(u,{hideLeftIcon:t,...n},`all-icon-${i}`):(0,o.jsx)(c.AS,{},`separator-${i}`)),children:(0,o.jsx)("div",{children:e.map(({icon:e,color:n,onClick:t},i)=>(0,o.jsx)(d.A,{icon:e,color:n,onClick:e=>{t&&((0,r.A)(e),t())}},`displayed-icon-${i}`))})})},m=e=>{const n=document.createElement("span");n.classList.add(l.A.Verified,"vknextInternalCasper__icons");return requestAnimationFrame(async()=>{const{unmount:t}=await(0,s.A)({content:(0,o.jsx)(A,{...e}),root:n,noStyling:!0}),c=await(0,i.R)();let r=(c.objLoc[0]||location.pathname).split("/")[0];c.onLocationChange(e=>{const n=(c.objLoc[0]||e).split("/")[0];r!==n&&(r=n,t())})}),n}},22860:(e,n,t)=>{t.d(n,{A:()=>r});var o=t(74848),i=t(75623),s=t(39107),c=t(7646);const r=({children:e,actions:n,actionsMenuClassName:t,hideOnClick:r=!0,disabled:a=!1,useScrollView:l=!1,...d})=>a?e:(0,o.jsx)(i.A,{content:(0,o.jsx)(c.A,{useScrollView:l,className:(0,s.xWm)(t),children:n}),noBackground:!0,hideOnClick:r,...d,children:e})},27795:(e,n,t)=>{t.d(n,{A:()=>a});var o=t(74848),i=t(53644),s=t(39107),c=t(96540),r=t(50563);const a=({icon:e,color:n,onClick:t})=>{const a=(0,c.useRef)(null);return(0,c.useEffect)(()=>{if(!a.current)return;const t="string"==typeof e?(0,i.A)(e):e.cloneNode(!0);n&&(t.style.color=n),a.current.appendChild(t)},[e,n]),(0,o.jsx)("div",{ref:a,className:(0,s.xWm)(r.A.VerifiedIcon,t&&r.A["VerifiedIcon--clickable"]),onClick:t})}},42335:(e,n,t)=>{t.d(n,{A:()=>o});const o={ActionsMenu:"oXPVlZtlcjoi6d8e"}},44497:(e,n,t)=>{t.d(n,{A:()=>o});const o=()=>{const e=window.location.pathname.match(/\/convo\/(-?\d+)/);if(e)return Number(e[1])||0;const n=new URLSearchParams(window.location.search),t=Number(n.get("sel"));return t||0}},44511:(e,n,t)=>{t.d(n,{A:()=>o});const o={ActionsMenuActionSeparator:"JUUAV9aJuLWPapUx"}},50563:(e,n,t)=>{t.d(n,{A:()=>o});const o={Verified:"tQvzgvyFY9assl4B",VerifiedIcon:"_w5ehg8cRWcTVQRI","VerifiedIcon--clickable":"r1j7W_LVPhoqBbsr",VerifiedItem:"JBy2mpzrrQ9eBxGL",VerifiedItem__icon:"M11IzXepm32bQjgH",VerifiedItem__label:"JRbSCzbBIBdqNzut"}},53339:(e,n,t)=>{t.d(n,{A:()=>o});const o={ActionsMenuAction:"Qz12flm1ckhwWMRi","ActionsMenuAction--clickable":"zqSAHhp0mZkpJyJv","ActionsMenuAction--loading":"maWKomPpZn38CGdY",ActionsMenuAction__title:"f5DiFbY0HMzfonGH","ActionsMenuAction--hover":"eArigbMXC9scSDcE","ActionsMenuAction--active":"dKO8yhdsvq5OQaLB","ActionsMenuAction--size-mini":"_RpwxXrwB9cHW9y9","ActionsMenuAction--size-regular":"JSPJNQnfc0rmrUKc","ActionsMenuAction--size-large":"Kz6XOr7wirTW6rZ_","ActionsMenuAction--size-max":"I5pyzjxjokMaCjf_",ActionsMenuAction__icon:"CIshpRBaU1ScuMSN","ActionsMenuAction--primary":"shY5I45XLLb2peEz","ActionsMenuAction--secondary":"CHnF5e3RJGJOddfX","ActionsMenuAction--danger":"bdbcNwBFv_xx4hSf","ActionsMenuAction--warning":"dIPqyT74MfEGnvhg",ActionsMenuAction__subtitle:"Z9G_cg7qHFwNychh","ActionsMenuAction--multiline":"rdni9aRD2DN3OfDv"}},53644:(e,n,t)=>{t.d(n,{A:()=>i});let o=0;const i=e=>{const n=!!document.importNode;let t=(new DOMParser).parseFromString(e,"image/svg+xml").documentElement;n&&(t=document.importNode(t,!0));for(const e of t.querySelectorAll("title,desc"))e.remove();for(const e of t.querySelectorAll("[id]")){if(!e.id)continue;const n="vknext_icon-"+o++;let i=!1;for(const o of t.querySelectorAll(`[fill="url(#${e.id})"]`))o.setAttribute("fill",`url(#${n})`),i=!0;i&&(e.id=n)}return t}},61166:(e,n,t)=>{t.d(n,{A:()=>o});const o={PopoverReforged:"V5vFILKwsuTAoDXp","reforged-anim-fade-in":"aKnVnnmt_OsWj600","reforged-anim-fade-out":"uvPWUxQQgpV6cgFC","PopoverReforged--noBackground":"h4DVtB6f3FyJCExI"}},62882:(e,n,t)=>{t.d(n,{A:()=>a});var o=t(74848),i=t(39107),s=t(53339);const c={mini:s.A["ActionsMenuAction--size-mini"],large:s.A["ActionsMenuAction--size-large"],regular:s.A["ActionsMenuAction--size-regular"],max:s.A["ActionsMenuAction--size-max"]},r={primary:s.A["ActionsMenuAction--primary"],secondary:s.A["ActionsMenuAction--secondary"],danger:s.A["ActionsMenuAction--danger"],warning:s.A["ActionsMenuAction--warning"]},a=({leftIcon:e,rightIcon:n,title:t,subtitle:a,type:l="secondary",size:d="regular",isActive:u=!1,hasHover:A=!0,isLoading:m,className:h,onClick:f,titleClassName:g,getRootRef:p,href:v,Component:w=(v?"a":"button"),children:x,multiline:_=!1,...M})=>(0,o.jsxs)(w,{className:(0,i.xWm)(s.A.ActionsMenuAction,A&&s.A["ActionsMenuAction--hover"],(f||A||v)&&s.A["ActionsMenuAction--clickable"],r[l],m&&s.A["ActionsMenuAction--loading"],u&&s.A["ActionsMenuAction--active"],_&&s.A["ActionsMenuAction--multiline"],c[d],h),onClick:m?void 0:f,ref:p,href:v,...M,children:[e&&(0,o.jsx)("i",{className:s.A.ActionsMenuAction__icon,children:e}),(0,o.jsxs)("span",{title:t,className:(0,i.xWm)(s.A.ActionsMenuAction__title,g),children:[x,a&&(0,o.jsx)("span",{className:s.A.ActionsMenuAction__subtitle,children:a})]}),n&&(0,o.jsx)("i",{className:s.A.ActionsMenuAction__icon,children:n})]})},75623:(e,n,t)=>{t.d(n,{A:()=>r});var o=t(74848),i=t(39107),s=t(96540),c=t(61166);const r=({hideOnClick:e=!1,noBackground:n=!1,mode:t,onClick:r,onShownChange:a,className:l,contentWrapperClassName:d,shown:u,content:A,...m})=>{const[h,f]=(0,s.useState)(!1),g=(0,s.useRef)(null),p=(0,s.useRef)(null),v=(0,s.useCallback)(e=>{e?f(!0):g.current=setTimeout(()=>{f(!1)},100),a?.(e)},[t,a,f]);return(0,s.useEffect)(()=>{"boolean"==typeof u&&v(u)},[u,v]),(0,o.jsx)(i.AMh,{shown:h,className:(0,i.xWm)(c.A.PopoverReforged,n&&c.A["PopoverReforged--noBackground"],l),onShownChange:v,onClick:e=>{if("side"===t&&g.current)clearTimeout(g.current);else try{r?.(e)}catch(e){console.error(e)}},content:(0,o.jsx)("div",{ref:p,className:(0,i.xWm)(d),onClick:n=>{e&&p.current?.contains(n.target)&&f(!1)},children:A}),...m})}},82181:(e,n,t)=>{t.d(n,{A:()=>f});var o=t(7417),i=t(22707),s=t(37400),c=t(51018),r=t(38729),a=t(91570),l=t(45939);const d=new c.e,u=(0,r.NS)(),A=async e=>{await(0,s.G)(),await(0,i.t)();const n=Number(e?.dataset?.peer);if(n)for(const t of d.listeners)t(e,n)},m=()=>{const e=document.querySelector("._im_peer_history");if(e){for(const n of e.getElementsByClassName("im-mess-stack"))A(n);e[u]||(e[u]=new MutationObserver(e=>{for(const n of e)for(const e of n.addedNodes){const n=e;n.parentElement&&A(n)}}),e[u].observe(e,{childList:!0}),l.A.add(e))}};let h=!1;const f=e=>{const n=d.addListener(e);return(0,o.n)(()=>{for(const e of document.getElementsByClassName("im-mess-stack"))A(e)}),h||(h=!0,(0,a.R)().then(e=>{m(),e.onLocationChange(e=>{e.includes("sel=")&&m()})})),n}},83558:(e,n,t)=>{t.d(n,{A:()=>c});var o=t(74848),i=t(39107),s=t(44511);const c=({getRootRef:e,className:n,...t})=>(0,o.jsx)("div",{role:"separator",className:(0,i.xWm)(s.A.ActionsMenuActionSeparator,n),ref:e,...t})},90275:(e,n,t)=>{t.d(n,{AS:()=>i.A,Ku:()=>s.A,vH:()=>o.A});t(7646);var o=t(62882),i=t(83558),s=t(22860)}}]);