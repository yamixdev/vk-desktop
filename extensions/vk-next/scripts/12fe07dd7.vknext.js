(globalThis.webpackChunkvknext=globalThis.webpackChunkvknext||[]).push([[6189],{422:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var r=s(74848),i=s(39107);const n="kEOK11qd0k9Jv15F",a="E5_YQoaWDka1Aaai",o=({isOut:e,children:t})=>{const s=(0,i.xWm)(n,e&&a);return(0,r.jsx)("div",{className:s,children:t})}},21230:(e,t,s)=>{var r={"./Belarusian":[51300,1300],"./Belarusian.ts":[51300,1300],"./English":[78426,8426],"./English.ts":[78426,8426],"./German":[45394,5394],"./German.ts":[45394,5394],"./Kazakh":[41210,1210],"./Kazakh.ts":[41210,1210],"./Polish":[17877,7877],"./Polish.ts":[17877,7877],"./Portuguese, Brazilian":[55147,5147],"./Portuguese, Brazilian.ts":[55147,5147],"./Soviet":[22462,2462],"./Soviet.ts":[22462,2462],"./Ukrainian":[77692,7692],"./Ukrainian.ts":[77692,7692],"./default":[34079,4079],"./default.ts":[34079,4079]};function i(e){if(!s.o(r,e))return Promise.resolve().then(()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=r[e],i=t[0];return s.e(t[1]).then(()=>s(i))}i.keys=()=>Object.keys(r),i.id=21230,e.exports=i},24474:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var r=s(81621);const i=window,n=(0,r.vt)(()=>({messages:i.messages}))},26690:(e,t,s)=>{"use strict";s.d(t,{LangReact:()=>c});var r=s(96540);const i=[2,0,1,1,1,2],n=(e,t,s=!0,r=!0)=>{const n=4<e%100&&e%100<20?2:i[Math.min(e%10,5)];return`${s?e:""} ${r&&void 0!==n?t[n]:""}`.trim()};class a{isDebug=!1;decodedKeys;constructor(e){this.decodedKeys=e}use(e,t={},s="decode"){if(!e)return"...";if(this.isDebug)return e;if(!(e in this.decodedKeys))return"";let r=this.decodedKeys[e];if("raw"===s)return r;if(Array.isArray(r)&&"number"==typeof t)return n(t,r);if("string"==typeof r&&t&&"object"==typeof t)for(const[e,s]of r.matchAll(/\{(.*?)\}/g)){const i=t[s]||"";r=String(r).replace(e,i)}return r}toggleDebug(){this.isDebug=!this.isDebug}}const o=/(\{[\d|\w]+\})/;class c extends a{constructor(e){super(e)}use(e,t={},s="decode"){if(!e)return"...";if(this.isDebug)return e;if(!(e in this.decodedKeys))return"";let i=this.decodedKeys[e];if("raw"===s)return i;if(Array.isArray(i)&&"number"==typeof t)return n(t,i);if("string"==typeof i&&t&&"object"==typeof t){let e=!1;const s=(i||"").split(o).filter(e=>!!e).map((s,i)=>{if(s.match(o)){const n=s.slice(1,-1);let a=t[n];return(0,r.isValidElement)(a)?(e=!0,r.Children.toArray(a).map(e=>({...e,key:i.toString()}))):a}return s});return e?s:s.join("")}return i}}},41442:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var r=s(81621);const i=()=>{const e=document.getElementById("data");return JSON.parse(decodeURIComponent(e?.dataset.curpage))},n=()=>{const e=document.getElementById("data");return JSON.parse(decodeURIComponent(e?.dataset.pagescount))},a=(0,r.vt)(()=>({currentPage:i(),pagesCount:n()}))},48104:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});const r={Action:"D_4wYHYXuZcDW4os",Action__Text:"mA_NmgrZkTg7SH8h",Action__Link:"yQGtydVCLxRLnMW2"}},49032:(e,t,s)=>{"use strict";s.d(t,{Fl:()=>r});const r=1e3,i=globalThis.navigator.hardwareConcurrency||1;Math.max(1,Math.floor(i/2))},51603:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});const r={0:"default",1:"Ukrainian",3:"English",6:"German",15:"Polish",97:"Kazakh",114:"Belarusian",777:"Soviet",73:"Portuguese, Brazilian"},i=async e=>{try{const{default:t}=await s(21230)(`./${r[e]}`);return t}catch(e){console.error(e)}return{}},n=async()=>{try{const{default:e}=await s(21230)(`./${r[0]}`);return e}catch(e){console.error(e)}return{}},a=async e=>{try{const{default:t}=await s(66811)(`./${e}/${r[0]}`);return t}catch(e){console.error(e)}return{}},o=async(e,t)=>{try{const{default:i}=await s(66811)(`./${e}/${r[t]}`);return i}catch(e){console.error(e)}return{}},c=async(e,t)=>{const[s,r,c,l]=await Promise.all([i(t),n(),a(e),o(e,t)]);return{...s,...r,...c,...l}}},59154:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});const r={Avatar:"PEp_NqZqPfV0LaC0",MessagesViewer:"MKTeBw1zWt74LWe3",Pagination:"flLL09U_9hB92qFm",HistoryWrapper:"yTDwqDxH37eOLfx8"}},59813:(e,t,s)=>{"use strict";s.d(t,{A:()=>h});var r=s(74848),i=s(87528);const n="xnJHUfyRoE7A8th_",a="PC7hnSXPn0hZ9PoL",o="rh0ztpNt0Osj6ueC";var c=s(39107),l=s(85692);const u={width:"100%",height:1,marginBottom:-1,visibility:"hidden"};const h=({dateMs:e,children:t})=>{const{sentinel:s,isSticky:h}=function(){const[e,t]=(0,l.Wx)({threshold:0});return{sentinel:(0,r.jsx)("div",{ref:e,style:u}),isSticky:!t}}(),d=(0,c.xWm)(a,h&&o);return(0,r.jsxs)("div",{children:[s,(0,r.jsx)("div",{className:n,children:(0,r.jsx)("span",{className:d,children:(0,i.H)(e)})}),t]})}},66811:(e,t,s)=>{var r={"./chatHistory/Belarusian":[70141,141],"./chatHistory/Belarusian.ts":[70141,141],"./chatHistory/English":[31297,1297],"./chatHistory/English.ts":[31297,1297],"./chatHistory/German":[52739,2739],"./chatHistory/German.ts":[52739,2739],"./chatHistory/Kazakh":[91351,1351],"./chatHistory/Kazakh.ts":[91351,1351],"./chatHistory/Polish":[11332,1332],"./chatHistory/Polish.ts":[11332,1332],"./chatHistory/Portuguese, Brazilian":[76628,6628],"./chatHistory/Portuguese, Brazilian.ts":[76628,6628],"./chatHistory/Soviet":[56631,6631],"./chatHistory/Soviet.ts":[56631,6631],"./chatHistory/Ukrainian":[4211,4211],"./chatHistory/Ukrainian.ts":[4211,4211],"./chatHistory/default":[66852,6852],"./chatHistory/default.ts":[66852,6852],"./global/Belarusian":[51300,1300],"./global/Belarusian.ts":[51300,1300],"./global/English":[78426,8426],"./global/English.ts":[78426,8426],"./global/German":[45394,5394],"./global/German.ts":[45394,5394],"./global/Kazakh":[41210,1210],"./global/Kazakh.ts":[41210,1210],"./global/Polish":[17877,7877],"./global/Polish.ts":[17877,7877],"./global/Portuguese, Brazilian":[55147,5147],"./global/Portuguese, Brazilian.ts":[55147,5147],"./global/Soviet":[22462,2462],"./global/Soviet.ts":[22462,2462],"./global/Ukrainian":[77692,7692],"./global/Ukrainian.ts":[77692,7692],"./global/default":[34079,4079],"./global/default.ts":[34079,4079],"./serviceWorker/Belarusian":[52068,2068],"./serviceWorker/Belarusian.ts":[52068,2068],"./serviceWorker/English":[53018,3018],"./serviceWorker/English.ts":[53018,3018],"./serviceWorker/German":[11570,1570],"./serviceWorker/German.ts":[11570,1570],"./serviceWorker/Kazakh":[7386,7386],"./serviceWorker/Kazakh.ts":[7386,7386],"./serviceWorker/Polish":[84053,4053],"./serviceWorker/Polish.ts":[84053,4053],"./serviceWorker/Portuguese, Brazilian":[83339,3339],"./serviceWorker/Portuguese, Brazilian.ts":[83339,3339],"./serviceWorker/Soviet":[88638,8638],"./serviceWorker/Soviet.ts":[88638,8638],"./serviceWorker/Ukrainian":[86652,6652],"./serviceWorker/Ukrainian.ts":[86652,6652],"./serviceWorker/default":[92319,2319],"./serviceWorker/default.ts":[92319,2319],"./settings/Belarusian":[17714,7714],"./settings/Belarusian.ts":[17714,7714],"./settings/English":[66192,6192],"./settings/English.ts":[66192,6192],"./settings/German":[70964,964],"./settings/German.ts":[70964,964],"./settings/Kazakh":[62220,2220],"./settings/Kazakh.ts":[62220,2220],"./settings/Polish":[68643,8643],"./settings/Polish.ts":[68643,8643],"./settings/Portuguese, Brazilian":[80045,45],"./settings/Portuguese, Brazilian.ts":[80045,45],"./settings/Soviet":[3464,3464],"./settings/Soviet.ts":[3464,3464],"./settings/Ukrainian":[89486,9486],"./settings/Ukrainian.ts":[89486,9486],"./settings/default":[97085,7085],"./settings/default.ts":[97085,7085],"./vkcom/Belarusian":[63975,3975],"./vkcom/Belarusian.ts":[63975,3975],"./vkcom/English":[83739,3739],"./vkcom/English.ts":[83739,3739],"./vkcom/German":[92081,2081],"./vkcom/German.ts":[92081,2081],"./vkcom/Kazakh":[32965,2965],"./vkcom/Kazakh.ts":[32965,2965],"./vkcom/Polish":[53790,3790],"./vkcom/Polish.ts":[53790,3790],"./vkcom/Portuguese, Brazilian":[57114,7114],"./vkcom/Portuguese, Brazilian.ts":[57114,7114],"./vkcom/Soviet":[66709,6709],"./vkcom/Soviet.ts":[66709,6709],"./vkcom/Ukrainian":[80777,777],"./vkcom/Ukrainian.ts":[80777,777],"./vkcom/default":[51974,1974],"./vkcom/default.ts":[51974,1974]};function i(e){if(!s.o(r,e))return Promise.resolve().then(()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=r[e],i=t[0];return s.e(t[1]).then(()=>s(i))}i.keys=()=>Object.keys(r),i.id=66811,e.exports=i},69986:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.d(t,{A:()=>o});var i=s(51603),n=s(26690),a=s(81621);const e=new n.LangReact(await(0,i.A)("chatHistory",0)),o=(0,a.vt)()(()=>({lang:e,code:-1}));r()}catch(e){r(e)}},1)},85692:(e,t,s)=>{"use strict";s.d(t,{Wx:()=>d});var r=s(96540),i=Object.defineProperty,n=(e,t,s)=>((e,t,s)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s),a=new Map,o=new WeakMap,c=0,l=void 0;function u(e){return Object.keys(e).sort().filter(t=>void 0!==e[t]).map(t=>{return`${t}_${"root"===t?(s=e.root,s?(o.has(s)||(c+=1,o.set(s,c.toString())),o.get(s)):"0"):e[t]}`;var s}).toString()}function h(e,t,s={},r=l){if(void 0===window.IntersectionObserver&&void 0!==r){const i=e.getBoundingClientRect();return t(r,{isIntersecting:r,target:e,intersectionRatio:"number"==typeof s.threshold?s.threshold:0,time:0,boundingClientRect:i,intersectionRect:i,rootBounds:i}),()=>{}}const{id:i,observer:n,elements:o}=function(e){const t=u(e);let s=a.get(t);if(!s){const r=new Map;let i;const n=new IntersectionObserver(t=>{t.forEach(t=>{var s;const n=t.isIntersecting&&i.some(e=>t.intersectionRatio>=e);e.trackVisibility&&void 0===t.isVisible&&(t.isVisible=n),null==(s=r.get(t.target))||s.forEach(e=>{e(n,t)})})},e);i=n.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),s={id:t,observer:n,elements:r},a.set(t,s)}return s}(s),c=o.get(e)||[];return o.has(e)||o.set(e,c),c.push(t),n.observe(e),function(){c.splice(c.indexOf(t),1),0===c.length&&(o.delete(e),n.unobserve(e)),0===o.size&&(n.disconnect(),a.delete(i))}}r.Component;function d({threshold:e,delay:t,trackVisibility:s,rootMargin:i,root:n,triggerOnce:a,skip:o,initialInView:c,fallbackInView:l,onChange:u}={}){var d;const[m,g]=r.useState(null),_=r.useRef(u),[y,v]=r.useState({inView:!!c,entry:void 0});_.current=u,r.useEffect(()=>{if(o||!m)return;let r;return r=h(m,(e,t)=>{v({inView:e,entry:t}),_.current&&_.current(e,t),t.isIntersecting&&a&&r&&(r(),r=void 0)},{root:n,rootMargin:i,threshold:e,trackVisibility:s,delay:t},l),()=>{r&&r()}},[Array.isArray(e)?e.toString():e,m,n,i,a,o,s,l,t]);const k=null==(d=y.entry)?void 0:d.target,p=r.useRef(void 0);m||!k||a||o||p.current===k||(p.current=k,v({inView:!!c,entry:void 0}));const f=[g,y.inView,y.entry];return f.ref=f[0],f.inView=f[1],f.entry=f[2],f}},88496:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var r=s(74848),i=s(39107);const n="mZ8HhZVyKRXwp3ds",a="KYP7yyNNCooJeOGi",o=({isOut:e,children:t})=>{const s=(0,i.xWm)(n,e&&a);return(0,r.jsx)("div",{className:s,children:t})}},89749:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.d(t,{A:()=>_});var i=s(74848),n=s(98235),a=s(69986),o=s(51466),c=s(7618),l=s(39107),u=s(48104),h=e([a]);a=(h.then?(await h)():h)[0];const d=({peerName:e,peerUrl:t})=>(0,i.jsx)(l.N_E,{className:u.A.Action__Link,href:t,target:"_blank",children:(0,i.jsx)(m,{text:e})}),m=({text:e,onClick:t})=>(0,i.jsx)(l.EYj,{inline:!0,weight:"1",className:(0,l.xWm)(u.A.Action__Text,t&&u.A.Action__Link),onClick:t,useAccentWeight:!0,children:e}),g=(e,t,s=!1)=>{const r=e[t];let i="",n="",a=!1;return c.z.isUserId(t)?(i=s?r?.acc:r?.ins||`@id${t}`,n=`https://vk.ru/id${t}`):c.z.isGroupId(t)&&(i=r?.name||"@club"+-t,n="https://vk.ru/club"+-t,a=!0),{name:i,link:n,isCommunity:a}},_=({message:e})=>{const t=(0,o.A)(e=>e.peerNames),s=(0,a.A)(e=>e.lang),r=(0,n.A)({cmId:e.action?.conversation_message_id||0}),c=(e,t)=>{const r=s.use(e,t);return(0,i.jsx)("div",{className:u.A.Action,children:(0,i.jsx)(l.EYj,{inline:!0,className:u.A.Action__Text,children:r})})};if(!e.action)return null;switch(e.action.type){case"chat_photo_remove":case"chat_photo_update":case"chat_group_call_started":case"chat_invite_user_by_link":case"chat_screenshot":case"conversation_style_update":case"conversation_style_update_action":{const{name:s,link:r,isCommunity:n}=g(t,e.from_id);let a=`chathistory_action_${e.action.type}`;return n&&(a+="_community"),c(a,{user:(0,i.jsx)(d,{peerName:s,peerUrl:r})})}case"chat_unpin_message":case"chat_pin_message":{const{name:s,link:n,isCommunity:a}=g(t,e.from_id);let o=`chathistory_action_${e.action.type}`;e.action.message||(o+="_custom_text"),a&&(o+="_community");const l=e.action.message?(0,i.jsx)(m,{text:e.action.message,onClick:r}):(0,i.jsx)(m,{text:"сообщение",onClick:r});return c(o,{user:(0,i.jsx)(d,{peerName:s,peerUrl:n}),message:l})}case"chat_create":case"chat_title_update":{const{name:s,link:r,isCommunity:n}=g(t,e.from_id);let a=`chathistory_action_${e.action.type}`;return n&&(a+="_community"),c(a,{user:(0,i.jsx)(d,{peerName:s,peerUrl:r}),title:(0,i.jsx)(m,{text:e.action.text}),old_title:(0,i.jsx)(m,{text:e.action.old_text})})}case"chat_invite_user":case"chat_kick_user":{const{name:s,link:r,isCommunity:n}=g(t,e.from_id),{name:a,link:o}=g(t,e.action.member_id,!0);let l=`chathistory_action_${e.action.type}`;return e.action.member_id===e.from_id&&(l+="_self"),n&&(l+="_community"),c(l,{user:(0,i.jsx)(d,{peerName:s,peerUrl:r}),target:(0,i.jsx)(d,{peerName:a,peerUrl:o})})}case"chat_invite_user_by_message_request":case"chat_invite_user_by_call":case"chat_invite_user_by_call_join_link":case"chat_kick_user_call_block":case"accepted_message_request":{const{name:s,link:r,isCommunity:n}=g(t,e.from_id),{name:a,link:o}=g(t,e.action.member_id,!0);let l=`chathistory_action_${e.action.type}`;return n&&(l+="_community"),c(l,{user:(0,i.jsx)(d,{peerName:s,peerUrl:r}),target:(0,i.jsx)(d,{peerName:a,peerUrl:o})})}case"sent_message_requests_count":return c(`chathistory_action_${e.action.type}`,{num:e.action.count.toString()});case"chat_kick_don":case"call_transcription_failed":case"rejected_message_request":return c(`chathistory_action_${e.action.type}`,{});case"sent_message_request":{const{name:s,link:r}=g(t,e.from_id),{name:n,link:a}=g(t,e.action.member_id);return c(`chathistory_action_${e.action.type}`,{user:(0,i.jsx)(d,{peerName:s,peerUrl:r}),viewer:(0,i.jsx)(d,{peerName:n,peerUrl:a})})}case"custom":return(0,i.jsx)("span",{children:Array.isArray(e.action.chunks)?e.action.chunks.join(" "):JSON.stringify(e.action)});default:return c("me_unsupported_message",{})}};r()}catch(e){r(e)}})},96189:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.r(t),s.d(t,{default:()=>p});var i=s(74848),n=s(83506),a=s(88496),o=s(39107),c=s(59154),l=s(422),u=s(59813),h=s(24474),d=s(41442),m=s(49032),g=s(89749),_=e([g]);g=(_.then?(await _)():_)[0];const y="historyItem_",v="message_",k=(e,t,s,r)=>(0,i.jsxs)(a.A,{isOut:s,children:[!s&&(0,i.jsx)(o.euF,{className:c.A.Avatar,src:`./avatars/${t}.jpg`,size:32}),(0,i.jsx)(l.A,{isOut:s,children:r})]},y+e),p=()=>{const e=(0,h.A)(e=>e.messages),t=(0,d.A)(e=>e.pagesCount),s=(0,d.A)(e=>e.currentPage),r=[];let a=[],l=[],_=e[0].from_id,y=!!e[0].out,p=null,f=0;const b=()=>{l.length&&(a.push(k(f++,_,y,l)),l=[])};for(let t=0;t<e.length;t++){const s=e[t],o=new Date(1e3*s.date),c=new Date(o.getFullYear(),o.getMonth(),o.getDate()).getTime();if(p&&p!==c&&(b(),r.push((0,i.jsx)(u.A,{dateMs:p,children:a},p)),a=[]),p=c,s.action){b(),a.push((0,i.jsx)(g.A,{message:s},v+s.conversation_message_id));continue}0!=t&&s.from_id!==_&&(b(),_=s.from_id,y=!!s.out);const h=!l.length;l.push((0,i.jsx)(n.A,{firstInStack:h,message:s},v+s.conversation_message_id))}return(l.length||a.length)&&(b(),r.push((0,i.jsx)(u.A,{dateMs:p,children:a},p))),(0,i.jsxs)("div",{className:c.A.MessagesViewer,children:[(0,i.jsx)("div",{className:c.A.HistoryWrapper,children:r}),(0,i.jsx)(o.dKS,{className:c.A.Pagination,currentPage:s,siblingCount:4,boundaryCount:1,totalPages:t,onChange:e=>{const t=window.location.href,s=t.lastIndexOf("/"),r=t.substring(0,s),i=document.createElement("a");i.href=r+`/index${(e-1)*m.Fl}.html`,document.body.appendChild(i),i.click()}})]})};r()}catch(e){r(e)}})}}]);