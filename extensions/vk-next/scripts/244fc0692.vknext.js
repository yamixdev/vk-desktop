"use strict";(globalThis.webpackChunkvknext=globalThis.webpackChunkvknext||[]).push([[122,8451],{7618:(e,_,t)=>{t.d(_,{z:()=>n});const r=Object.freeze({MIN_CHAT_ID:2e9,MAX_CHAT_ID:21e8,UNAUTH_LONG_ID_SUBRANGE_WITH_DEVICE_ID_SIZE:5e16,UNAUTH_LONG_ID_SUBRANGE_WITHOUT_DEVICE_ID_SIZE:2**56-1,UNAUTH_LONG_ID_MIN:9e18,UNAUTH_LONG_ID_MAX:0x7e980f0d11490000,MARUSYA_UPLOAD_OWNER_MIN:593139650,MARUSYA_UPLOAD_OWNER_MAX:593139654,UNAUTH_LONG_ID_MIN_OLD:10000000001,UNAUTH_LONG_ID_MAX_OLD:11e10,FAKE_DOC_OWNER_MIN:2e9,FAKE_DOC_OWNER_MAX:2000063999,ADS_VIDEO_OWNER_MIN:16e6,ADS_VIDEO_OWNER_MAX:16000599,ADS_PHOTO_OWNER_MIN:1698e4,ADS_PHOTO_OWNER_MAX:16999999,AUDIO_FAKE_UMA_RELEASE_OWNER_MIN:-2002e6,AUDIO_FAKE_UMA_RELEASE_OWNER_MAX:-2001e6,AUDIO_FAKE_UMA_ALBUM_OWNER_MIN:-2000999999,AUDIO_FAKE_UMA_ALBUM_OWNER_MAX:-2e9,AUDIO_FAKE_UMA_OWNERS_COUNT:1e6,AUDIO_FAKE_WALL_OWNER_MIN:2e9,AUDIO_FAKE_WALL_OWNER_MAX:2000512e3,USERS_LOWER_BOUND:1,USERS_UPPER_BOUND:19e8,USERS_LOWER_BOUND_LONG:2e11,USERS_UPPER_BOUND_LONG:1e12,EMAIL_UPPER_BOUND:-2e9,CONTACTS_LOWER_BOUND:1900000001,CONTACTS_UPPER_BOUND:2e9,CALLS_PEER_LOWER_BOUND:-1899999999,CALLS_PEER_UPPER_BOUND:-189e7,ANONYMOUS_USER_PEER_ID_LOWER_BOUND:10000000001,ANONYMOUS_USER_PEER_ID_UPPER_BOUND:11e10,CHAT_OR_CHANNEL_LOWER_BOUND:2000000001,CHAT_OR_CHANNEL_UPPER_BOUND:21e8,GROUPS_LOWER_BOUND:-1e9,GROUPS_UPPER_BOUND:-1,APP_LOWER_BOUND:-1999999999,APP_UPPER_BOUND:-1e9,ALIEXPRESS_USER_ID_RANGE_START:2e9,ALIEXPRESS_USER_ID_RANGE_LENGTH:150,AD_BOT_ID_RANGE_START:2e9,AD_BOT_ID_RANGE_END:2000064e3,MARUSIA_AUDIO_FAKE_ID_MIN:2000512001,MARUSIA_AUDIO_FAKE_ID_MAX:2000512051,AUTOTEST_GROUP_ID_MIN:216720807,AUTOTEST_GROUP_ID_MAX:216820807,EXTERNAL_USER_ID_OFFSET:-19e8,APP_DOMAIN_ID_OFFSET:-1e9}),s=(e,_,t)=>_<e&&e<t,a=(e,_,t)=>_<=e&&e<=t,A=(e,_)=>e+Math.floor(Math.random()*(_-e)),n=Object.freeze({getAutotestGroupIdRand:()=>A(r.AUTOTEST_GROUP_ID_MIN,r.AUTOTEST_GROUP_ID_MAX),isAutotestGroup:e=>a(e,r.AUTOTEST_GROUP_ID_MIN,r.AUTOTEST_GROUP_ID_MAX),isGroupId:e=>e<=r.GROUPS_UPPER_BOUND&&e>r.GROUPS_LOWER_BOUND,isUserId:e=>e>=r.USERS_LOWER_BOUND&&e<r.USERS_UPPER_BOUND||e>=r.USERS_LOWER_BOUND_LONG&&e<r.USERS_UPPER_BOUND_LONG,isUserIdTransitional:e=>s(e,0,r.CONTACTS_UPPER_BOUND),isRealOwner:e=>n.isGroupId(e)||n.isUserId(e),isAudioOwner:e=>n.isRealOwner(e)||n.isUMA(e)||n.isFakeWallAudioOwner(e),isPlaylistOwner:e=>n.isRealOwner(e)||n.isUMA(e)||n.isChatOrChannelPeer(e),isOfficialPlaylist:e=>n.isUMAReleaseOwner(e)||n.isUMAAlbumOwner(e),isFakeWallAudioOwner:e=>a(e,r.AUDIO_FAKE_WALL_OWNER_MIN,r.AUDIO_FAKE_WALL_OWNER_MAX),isUMA:e=>n.isUMAReleaseOwner(e)||n.isUMAAlbumOwner(e),isUMAAlbumOwner:e=>a(e,r.AUDIO_FAKE_UMA_ALBUM_OWNER_MIN,r.AUDIO_FAKE_UMA_ALBUM_OWNER_MAX),getUMAAlbumOwnerByShift:e=>r.AUDIO_FAKE_UMA_ALBUM_OWNER_MAX-Math.abs(e%r.AUDIO_FAKE_UMA_OWNERS_COUNT),isUMAReleaseOwner:e=>a(e,r.AUDIO_FAKE_UMA_RELEASE_OWNER_MIN,r.AUDIO_FAKE_UMA_RELEASE_OWNER_MAX),getUMAReleaseOwnerByShift:e=>r.AUDIO_FAKE_UMA_RELEASE_OWNER_MAX-Math.abs(e%r.AUDIO_FAKE_UMA_OWNERS_COUNT),isEmailId:e=>e<r.EMAIL_UPPER_BOUND,isOwnerId:e=>e>=r.USERS_LOWER_BOUND?n.isUserId(e):n.isGroupId(e),isContactId:e=>s(e,r.CONTACTS_LOWER_BOUND,r.CONTACTS_UPPER_BOUND),convertContactIdToPeerId:e=>e+r.USERS_UPPER_BOUND,convertPeerIdToContactId:e=>e-r.USERS_UPPER_BOUND,isChatOrChannelPeer:e=>a(e,r.CHAT_OR_CHANNEL_LOWER_BOUND,r.CHAT_OR_CHANNEL_UPPER_BOUND),isChatId:e=>e>r.MIN_CHAT_ID&&e<=r.MAX_CHAT_ID,convertChatPeerIdToChatId:e=>e-r.CONTACTS_UPPER_BOUND,convertChatIdToChatPeerId:e=>e+r.CONTACTS_UPPER_BOUND,isAppDomain:e=>s(e,r.APP_LOWER_BOUND,r.APP_UPPER_BOUND),convertPeerIdToAppId:e=>-e+r.APP_UPPER_BOUND,convertAppIdToPeerId:e=>r.APP_UPPER_BOUND-e,isUnauthLongId:e=>a(e,r.UNAUTH_LONG_ID_MIN,r.UNAUTH_LONG_ID_MAX),isUnauthLongIdOld:e=>a(e,r.UNAUTH_LONG_ID_MIN_OLD,r.UNAUTH_LONG_ID_MAX_OLD),isMarusyaUploadOwner:e=>a(e,r.MARUSYA_UPLOAD_OWNER_MIN,r.MARUSYA_UPLOAD_OWNER_MAX),getRandomMarusyaUploadOwnerId:()=>A(r.MARUSYA_UPLOAD_OWNER_MIN,r.MARUSYA_UPLOAD_OWNER_MAX),isFakeDocOwner:e=>a(e,r.FAKE_DOC_OWNER_MIN,r.FAKE_DOC_OWNER_MAX),getFirstFakeOwnerId:()=>r.FAKE_DOC_OWNER_MIN,getRandomFirstFakeOwnerId:()=>A(r.FAKE_DOC_OWNER_MIN,r.FAKE_DOC_OWNER_MIN+64e3),getRandomFakeOwnerId:()=>r.FAKE_DOC_OWNER_MIN+(Math.floor(Date.now()/1e3)/173+A(0,999))%64e3,isAdsVideoOwner:e=>a(e,r.ADS_VIDEO_OWNER_MIN,r.ADS_VIDEO_OWNER_MAX),getRandomAdsVideoOwner:()=>A(r.ADS_VIDEO_OWNER_MIN,r.ADS_VIDEO_OWNER_MAX),isAdsPhotoOwner:e=>a(e,r.ADS_PHOTO_OWNER_MIN,r.ADS_PHOTO_OWNER_MAX),getRandomAdsPhotoOwner:()=>A(r.ADS_PHOTO_OWNER_MIN,r.ADS_PHOTO_OWNER_MAX),isZeroOwner:e=>0===e,convertEmailIdToEmailPeerId:e=>n.isEmailId(e)?-e+r.EMAIL_UPPER_BOUND:0,isZeroOwnerDeprecated:e=>!!e||n.isZeroOwner(e),isExternalUser:e=>s(e,r.EMAIL_UPPER_BOUND,r.EXTERNAL_USER_ID_OFFSET),isExternalUserDeprecated:e=>s(e,r.EMAIL_UPPER_BOUND,r.APP_DOMAIN_ID_OFFSET),isAnonymousCallPeerId:e=>s(e,r.CALLS_PEER_LOWER_BOUND,r.CALLS_PEER_UPPER_BOUND),isAnonymousUserPeerId:e=>s(e,r.ANONYMOUS_USER_PEER_ID_LOWER_BOUND,r.ANONYMOUS_USER_PEER_ID_UPPER_BOUND),getAnonymousCallUserByShift(e){const _=r.CALLS_PEER_UPPER_BOUND-r.CALLS_PEER_LOWER_BOUND,t=(e%_+_)%_;return r.CALLS_PEER_UPPER_BOUND-1-t},isValidAliExpressOrderUserId:e=>e>=r.ALIEXPRESS_USER_ID_RANGE_START&&e<=r.ALIEXPRESS_USER_ID_RANGE_START+r.ALIEXPRESS_USER_ID_RANGE_LENGTH,generateAliexpressOrderUserId:()=>A(r.ALIEXPRESS_USER_ID_RANGE_START,r.ALIEXPRESS_USER_ID_RANGE_START+r.ALIEXPRESS_USER_ID_RANGE_LENGTH),isADBot:e=>a(e,r.AD_BOT_ID_RANGE_START,r.AD_BOT_ID_RANGE_END),getMarusiaAudioFakeId(e){const _=r.MARUSIA_AUDIO_FAKE_ID_MAX-r.MARUSIA_AUDIO_FAKE_ID_MIN;return r.MARUSIA_AUDIO_FAKE_ID_MIN+e%_},isMarusiaAudioFakeId:e=>s(e,r.MARUSIA_AUDIO_FAKE_ID_MIN,r.MARUSIA_AUDIO_FAKE_ID_MAX),isOwnerIdTransitional:e=>e>r.USERS_LOWER_BOUND?n.isUserIdTransitional(e):n.isGroupId(e),convertGroupIdToOwnerId:e=>-e,convertGroupIdToOwnerIdStrict:e=>-Math.abs(e),convertOwnerIdToGroupId:e=>Math.abs(e)})},14694:(e,_,t)=>{t.d(_,{A:()=>r});const r=()=>"https://api.vknext.net"},24370:(e,_,t)=>{t.d(_,{Q:()=>i});var r=t(92046),s=t(14694),a=t(88400),A=t(46140),n=t(47961);class i{vkapi;vkAgents;userId;constructor({api:e}){this.vkapi=e,this.userId=0,this.vkAgents=new Map}async call(e,_,t){const A=await this.getVkAgent(),n={..._,"vknext-agent":await this.gvkna()};let i=0;const o=`${(0,s.A)()}/${e}`,O=JSON.stringify(n),E={Accept:"application/json","Content-Type":"application/json","VK-Agent":A,"VK-User-ID":`${this.userId||0}`,"9603a224b40d7b67210b78f2e390d00f":"ba05681e16c97c31e1be20e84f250d55","Api-Version":"3",...t};let U=new Response(JSON.stringify({error_code:408}),{status:408});for(;i<3;){const e=new AbortController,_=setTimeout(()=>e.abort(),15e3);try{if(U=await fetch(o,{body:O,method:"POST",headers:E,signal:e.signal}),502!==U.status)return(0,a.A)(U);{await(0,r.c)(2e3);const e=await U.text();if(!e.toLowerCase().includes("cloudflare"))return(0,a.A)(U);await(0,r.c)(i)}}catch(e){console.error(e),await(0,r.c)(2e3)}clearTimeout(_),i++}return(0,a.A)(U)}async getVkAgent(){if(0===this.userId&&(this.userId=await this.getUserId()),this.vkAgents.has(this.userId))return this.vkAgents.get(this.userId);return(0,A.A)(this.userId,this.vkapi)}async gvkna(){return await(0,n.A)(this.userId,"ba05681e16c97c31e1be20e84f250d55",this)}resetUserId(){this.userId=0}async getUserId(){return 0}async getRuntimeId(){return""}async getVersion(){return""}}},27182:(e,_,t)=>{t.d(_,{W:()=>A});var r=t(74848),s=t(96540),a=t(22185);const A=e=>{const _=s.useId();return(0,r.jsxs)(a.uC,{viewBox:"0 0 20 20",width:20,height:20,vkuiIconId:"crown_circle_fill_vk_next_20",vkuiProps:e,children:[(0,r.jsx)("rect",{width:"20",height:"20",fill:`url(#crown_circle_fill_vk_next_20${_}a)`,rx:"10"}),(0,r.jsx)("path",{fill:"#fff",fillRule:"evenodd",d:"M10.549 7.138a1.14 1.14 0 0 0 .59-.999 1.14 1.14 0 1 0-1.688 1L7.844 9.54a.2.2 0 0 1-.284.051L6.167 8.585a1.1 1.1 0 0 0 .112-.494 1.14 1.14 0 1 0-1.14 1.139l.572 1.772h8.595l.555-1.772a1.14 1.14 0 1 0-1.023-.636l-1.393 1.007a.2.2 0 0 1-.283-.051L10.55 7.138ZM6 12.202h8l-.128.622a1.72 1.72 0 0 1-1.688 1.376H7.817a1.72 1.72 0 0 1-1.687-1.374z",clipRule:"evenodd"}),(0,r.jsx)("defs",{children:(0,r.jsxs)("linearGradient",{id:`crown_circle_fill_vk_next_20${_}a`,x1:"17",x2:"3",y1:"3",y2:"17",gradientUnits:"userSpaceOnUse",children:[(0,r.jsx)("stop",{offset:"0%",style:{stopColor:"#8a13d6",stopOpacity:"1"}}),(0,r.jsx)("stop",{offset:"100%",style:{stopColor:"#7d81ff",stopOpacity:"1"}})]})})]})}},46140:(e,_,t)=>{t.d(_,{A:()=>E});var r=t(22440),s=t(92046),a=t(98570),A=t(75412);const n=(0,r.A)(),i=async e=>{const _=(0,a.A)().browserApi;if(_){return(await _.storage.local.get(e))[e]}if(n?.localStorage)return n.localStorage.getItem(e);const{storage:r}=await t.e(6815).then(t.t.bind(t,96815,23));return(await r.local.get(e))[e]},o=async(e,_)=>{const r=(0,a.A)().browserApi;if(r)return void await r.storage.local.set({[e]:_});if(n?.localStorage)return void n.localStorage.setItem(e,_);const{storage:s}=await t.e(6815).then(t.t.bind(t,96815,23));await s.local.set({[e]:_})},O=async(e,_)=>{const t=`vknLP${e}`,r=`vknLPD${e}`,a=await i(t),n=await i(r);if(a&&Date.now()-(parseInt(n||"")||0)<216e5)return a?.response||a;try{const a=await _.apps.getAppLaunchParams({mini_app_id:await(0,A.A)(),referer:"other",v:"5.123"}),n=new URLSearchParams(Object.entries(a)).toString();return n?(await o(t,n),await o(r,Date.now().toString()),n):(await(0,s.c)(5e3),O(e,_))}catch(t){return console.error(t),await(0,s.c)(1500),O(e,_)}},E=O},47961:(e,_,t)=>{t.d(_,{A:()=>s});var r=t(387);const s=async(e,_,t)=>{try{delete Uint8Array.prototype.toJSON}catch(e){console.error(e)}const s=(0,r.A)(),a=((e,_)=>{const t=e.toString().length,r=new Uint8Array(16);for(let s=0;s<_.length;s++){const a=_.charCodeAt(s)*e/t;r[s%16]^=255&a}return r})(e,_),A=await(e=>crypto.subtle.importKey("raw",e,{name:"AES-CBC"},!1,["encrypt"]))(a),n={version:await t.getVersion(),udGltZS5p:await t.getRuntimeId(),cGlkb3I:e,fdhjiD:"ba05681e16c97c31e1be20e84f250d55",v9Cdi3sD:s},i=JSON.stringify(n),o=(new TextEncoder).encode(i),O={name:"AES-CBC",iv:crypto.getRandomValues(new Uint8Array(16))},E=await crypto.subtle.encrypt(O,A,o),U=new Uint8Array(O.iv.length+E.byteLength);return U.set(new Uint8Array(O.iv),0),U.set(new Uint8Array(E),O.iv.length),U}},48797:(e,_,t)=>{t.d(_,{A:()=>A});var r=t(74848),s=t(39107),a=t(58006);const A=({children:e,isTabs:_=!1,style:t={},...A})=>{const n=(0,a.A)({isTabs:_});return t.maxHeight||(t.maxHeight=n),(0,r.jsx)(s.guY,{style:t,...A,children:e})}},69075:(e,_,t)=>{t.d(_,{B:()=>r});var r=(0,t(78414).mT)("Icon20FavoriteCircleFillYellow","favorite_circle_fill_yellow_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="favorite_circle_fill_yellow_20"><linearGradient id="favorite_circle_fill_yellow_20_a" x1="-10" x2="10" y1="10" y2="30" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#ffb73d" /><stop offset="1" stop-color="#ffa000" /></linearGradient><path fill="url(#favorite_circle_fill_yellow_20_a)" d="M0 10C0 4.477 4.477 0 10 0s10 4.477 10 10-4.477 10-10 10S0 15.523 0 10" /><path fill="#fff" d="m11.805 7.566 2.39.235c.831.081 1.086.912.444 1.458l-1.87 1.591.694 2.592c.228.851-.48 1.366-1.189.854l-2.273-1.643-2.273 1.643c-.706.51-1.417-.003-1.188-.854l.694-2.592-1.87-1.59c-.646-.549-.392-1.377.443-1.46l2.39-.234 1.052-2.483c.33-.778 1.174-.777 1.504 0z" /></symbol>',20,20,!1,void 0)},70122:(e,_,t)=>{t.r(_),t.d(_,{default:()=>i});var r=t(98570),s=t(24370),a=t(87251);const A=new s.Q({api:a.default});let n=!1;A.getUserId=async()=>"number"==typeof window.vk?.id?window.vk.id:n?await new Promise(e=>{const _=setInterval(()=>{n||(e(a.default.user_id),clearInterval(_))},200)}):(a.default.user_id||(n=!0,await a.default.forceUpdateToken(),n=!1),a.default.user_id),A.getRuntimeId=async()=>{const{getManifest:e}=(0,r.A)().browserApi;return e().id},A.getVersion=async()=>{const{getManifest:e}=(0,r.A)().browserApi;return e().version};const i=A},75412:(e,_,t)=>{t.d(_,{A:()=>s});var r=t(14694);const s=async()=>{try{const e=await fetch(`${(0,r.A)()}/internal.getAuthAppId`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json","Api-Version":"3"}});if(e.ok)return parseInt(await e.text())}catch(e){console.error("[VK Next/getAuthAppId] Error:",e)}return 8194076}},88400:(e,_,t)=>{t.d(_,{A:()=>r});const r=async e=>{const _=await e.json(),r=e.headers.get("Content-Type");if(r&&r.startsWith("application/x-vknextpack")&&_)try{const e=new Uint8Array(Object.values(_)),{decode:r}=await t.e(7802).then(t.bind(t,77802));return r(e)}catch(e){console.error(e)}return _}},93750:(e,_,t)=>{t.d(_,{A:()=>R});var r=t(97992),s=t(7618),a=t(96540),A=t(74225),n=t.n(A);const i=["first_name_gen","last_name_gen","is_nft","image_status","sex","photo_50"],o=["photo_50"];var O=t(52370),E=t(70122),U=t(57087);const I=async()=>await E.default.call("profile.getGifts",{}),R=()=>{const{gifts:e,setGifts:_}=(0,U.eg)(),[t,A]=(0,a.useState)(null===e),{usersCache:E,addUserToCache:R}=(0,U.y$)(),{groupsCache:c,addGroupToCache:N}=(0,U.Qm)(),l=(0,a.useCallback)(async()=>{A(!0);const e=await I();_(e?.gifts||[]),A(!1)},[]);return n()(async t=>{if(null!==e)return;A(!0);const a=await I();if(!t())return;if(!a.gifts)return void A(!1);_(a.gifts),A(!1);const n=[],U=[];for(const{from_id:e}of a.gifts){if(!e)continue;s.z.isUserId(e)&&!E.has(e)&&n.push(e);const _=Math.abs(e);s.z.isGroupId(e)&&!c.has(_)&&U.push(_)}for(const e of(0,r.A)(n,20)){const _=await O.vkapiWrapper.users.get({user_ids:e,fields:i});if(!t())return;for(const e of _)R(e)}for(const e of(0,r.A)(U,20)){const{groups:_}=await O.vkapiWrapper.groups.getById({group_ids:e,fields:o});if(!t())return;for(const e of _)N(e)}},[e]),{gifts:e||[],forceUpdate:l,isLoading:t}}},97992:(e,_,t)=>{t.d(_,{A:()=>r});const r=(e,_=100)=>{const t=[...e],r=[];for(;t.length;)r.push(t.splice(0,_||t.length));return r}}}]);