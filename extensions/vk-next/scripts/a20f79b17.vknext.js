"use strict";(globalThis.webpackChunkvknext=globalThis.webpackChunkvknext||[]).push([[122,2268,9038],{17:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.d(t,{A:()=>j});var n=s(74848),r=s(96540),o=s(3314),i=s(61969),l=s(50767),c=s(39107),d=s(1576),h=s(89038),u=s(92046),m=s(9111),_=s(31172),g=s(8015),p=s(22549),v=s(65715),w=s(57087),x=s(92425),A=s(70122),b=s(11157),y=e([m,g,p,v]);[m,g,p,v]=y.then?(await y)():y;const j=({theme:e,status:t})=>{const s=(0,g.A)(),{currentTheme:a,updateValue:y}=(0,p.A)("currentTheme"),{themeEditor:j}=(0,p.A)("themeEditor"),[,f]=(0,m.d)(),{showSnackbar:k,hideSnackbar:C}=(0,w.Qs)(),T=(0,b.Gz)(),{background:I,accent:S,secondary:B}=(0,d.A)(e),M=a===e.themeId,H=async()=>{if(!e.themeId)return;if(j===e.themeId)return void k((0,n.jsx)(c.qb_,{onClose:C,children:s.use("settings_themes_editor_change_theme_error")}));delete e.isEditing;let t=!1;await x.default.getTheme(e.themeId)&&(t=!0),await x.default.setTheme(e.themeId,e),k((0,n.jsx)(c.qb_,{onClose:C,children:s.use(t?"settings_themes_editor_update_theme_done":"settings_themes_editor_custom_theme_import_done",{name:e.name})})),y(e.themeId)},N=async({theme:e,lang:t})=>{T.showPopout((0,n.jsx)(c.WHT,{state:"loading"})),delete e.isEditing;const s=await(0,h.encryptString)(JSON.stringify(e)),a=await A.default.call("themes.deleteFromCatalog",{theme:s});if(a.error_code||a.error){let e=a.error;22===a.error_code&&(e=t.use("settings_themes_editor_review_blocked")),23===a.error_code&&(e=t.use("settings_themes_editor_only_author_remove_theme")),k((0,n.jsx)(c.qb_,{onClose:C,children:e})),T.showPopout((0,n.jsx)(c.WHT,{state:"error"}))}else k((0,n.jsx)(c.qb_,{onClose:C,children:t.use("settings_themes_editor_theme_deleted_from_catalog")})),T.showPopout((0,n.jsx)(c.WHT,{state:"done"}));await(0,u.c)(1e3),T.hidePopout()},P=(0,r.useCallback)(()=>"published"===t?[{title:s.use("settings_add_theme_to_custom_themes"),before:(0,n.jsx)(o.d,{}),onClick:H},{title:s.use("global_update"),autoHide:!0,before:(0,n.jsx)(i.T,{}),onClick:async()=>{if(!e.themeId)return void k((0,n.jsx)(c.qb_,{onClose:C,duration:6e3,children:s.use("settings_update_theme_requirement")}));const t=await x.default.getTheme(e.themeId);t?(await(async({theme:e,lang:t})=>{T.showPopout((0,n.jsx)(c.WHT,{state:"loading"})),delete e.isEditing;const s=await(0,h.encryptString)(JSON.stringify(e)),a=await A.default.call("themes.submitForReview",{theme:s});if(a.error_code||a.error){let e=a.error;21===a.error_code&&(e=t.use("settings_themes_editor_only_author_update_theme")),22===a.error_code&&(e=t.use("settings_themes_editor_review_blocked")),k((0,n.jsx)(c.qb_,{onClose:C,children:e})),T.showPopout((0,n.jsx)(c.WHT,{state:"error"}))}else k((0,n.jsx)(c.qb_,{onClose:C,children:t.use("settings_themes_editor_sent_for_review")})),T.showPopout((0,n.jsx)(c.WHT,{state:"done"}));await(0,u.c)(1e3),T.hidePopout()})({lang:s,theme:t}),f()):k((0,n.jsx)(c.qb_,{onClose:C,duration:6e3,children:s.use("settings_update_theme_requirement")}))}},{title:s.use("settings_delete_theme_from_catalog"),before:(0,n.jsx)(l.P,{style:{color:"var(--vkui--color_icon_negative)"}}),autoHide:!0,onClick:async()=>{await N({lang:s,theme:e}),f()}}]:"rejected"===t?[{title:s.use("settings_add_theme_to_custom_themes"),before:(0,n.jsx)(o.d,{}),onClick:H},{title:s.use("settings_delete_theme_from_rejected_list"),before:(0,n.jsx)(l.P,{style:{color:"var(--vkui--color_icon_negative)"}}),autoHide:!0,onClick:async()=>{await N({lang:s,theme:e}),f()}}]:void 0,[t])();return(0,n.jsx)(v.A,{active:M,header:e.name,subheader:e.author,backgroundStyle:{backgroundColor:I},headerColor:S,subheaderColor:B,asigeMenu:P,className:(0,c.xWm)(P&&_.A.CatalogBlock__disabledClick),onClick:()=>{if(!P)return H()}})};a()}catch(e){a(e)}})},1576:(e,t,s)=>{s.d(t,{A:()=>a});const a=({variables:e,style:t,accentColor:s,themeColor:a})=>{let n,r,o;if(e)n=e["--vkui--color_background"],r=e["--vkui--color_icon_accent"],o=e["--vkui--color_text_secondary"];else if(t&&t[":root,body"]){const e=t[":root,body"];n=e["--background_page"],r=e["--accent"],o=e["--text_secondary"]}return{background:a||n,accent:s||r,secondary:o}}},3314:(e,t,s)=>{s.d(t,{d:()=>a});var a=(0,s(78414).mT)("Icon24ArrowDownToSquareOutline","arrow_down_to_square_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="arrow_down_to_square_outline_24"><path d="M12.897 2.9a.9.9 0 1 0-1.8 0v11.027l-1.66-1.663a.9.9 0 1 0-1.274 1.272l3.197 3.202a.9.9 0 0 0 1.274 0l3.202-3.201a.9.9 0 0 0-1.273-1.274l-1.666 1.666zM16.14 7c.45 0 .606.001.728.014a2.6 2.6 0 0 1 2.318 2.318c.013.122.014.278.014.728v5.44c0 .995 0 1.687-.044 2.226-.044.527-.124.828-.24 1.054a2.6 2.6 0 0 1-1.135 1.137c-.227.115-.527.195-1.055.238-.539.044-1.23.045-2.226.045H9.502c-.995 0-1.687 0-2.225-.045-.528-.043-.829-.123-1.055-.238a2.6 2.6 0 0 1-1.136-1.137c-.116-.226-.196-.527-.239-1.055-.044-.538-.045-1.23-.045-2.225V9.549A2.6 2.6 0 0 1 7.493 7h.604a.9.9 0 0 0 0-1.8h-.781a4.4 4.4 0 0 0-4.312 4.312v6.026c0 .948 0 1.714.05 2.334.052.64.163 1.203.429 1.726a4.4 4.4 0 0 0 1.923 1.922c.522.267 1.086.377 1.725.43.62.05 1.386.05 2.334.05h5.075c.947 0 1.713 0 2.333-.05.64-.053 1.203-.163 1.726-.43a4.4 4.4 0 0 0 1.923-1.922c.266-.523.376-1.087.428-1.726.051-.62.051-1.386.051-2.334v-5.532c0-.375 0-.633-.023-.86a4.4 4.4 0 0 0-3.923-3.923c-.227-.023-.485-.023-.86-.023h-.3a.9.9 0 1 0 0 1.8z" /></symbol>',24,24,!1,void 0)},9111:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.d(t,{A:()=>p,d:()=>_});var n=s(74848),r=s(8015),o=s(99381),i=s(89038),l=s(96540),c=s(74225),d=s.n(c),h=e([r]);r=(h.then?(await h)():h)[0];const u={all_themes:[],user_themes_in_moderation:[],user_themes_published:[],user_themes_rejected:[],is_loading:!0},m=(0,l.createContext)([u,o.A]),_=()=>(0,l.useContext)(m),g=async e=>e.dataId?JSON.parse(await(0,i.decryptString)(e.themeId,e.dataId)):e,p=({children:e})=>{const t=(0,r.A)(),[a,o]=(0,l.useState)([]),[i,c]=(0,l.useState)([]),[h,u]=(0,l.useState)([]),[_,p]=(0,l.useState)([]),[v,w]=(0,l.useState)(""),[x,A]=(0,l.useState)(!0);d()(async e=>{if(x){try{const t=(await Promise.resolve().then(s.bind(s,70122))).default,a=await t.call("themes.getCatalog");if(a.error)return void w(a.error);const n=await Promise.all(a.user_themes_in_moderation.map(g)),r=await Promise.all(a.user_themes_published.map(g)),i=await Promise.all(a.user_themes_rejected.map(g)),l=[];for(const e of a.all_themes){const t=await g(e);l.push(t)}if(!e())return;o(l),c(n),u(r),p(i)}catch(s){if(console.error(s),!e())return;w(t.use("settings_error_connecting_to_server"))}A(!1)}},[x]);const b={is_loading:x,all_themes:a,user_themes_in_moderation:i,user_themes_published:h,user_themes_rejected:_,error:v};return(0,n.jsx)(m.Provider,{value:[b,()=>{A(!1),A(!0)}],children:e})};a()}catch(e){a(e)}})},9436:(e,t,s)=>{s.d(t,{A:()=>a});const a={ThemesGroup:"A3r1DLD3NxOkWsbe",ThemesGroup__resetTheme:"cJBIuqanskqYJXG1",ThemesGroup__editorBlock:"jFSay4AGWtTdItrf",ThemesGroup__editorBlockOptions:"ywCE_c8dFW0EhHo9"}},11285:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.d(t,{A:()=>M});var n=s(74848),r=s(61969),o=s(92286),i=s(48269),l=s(25087),c=s(34019),d=s(11157),h=s(39107),u=s(96540),m=s(74225),_=s.n(m),g=s(58048),p=s(8015),v=s(22549),w=s(92425),x=s(57087),A=s(1576),b=s(92046),y=s(89038),j=s(9436),f=s(70122),k=s(61699),C=s(23274),T=s(65715),I=s(88564),S=e([p,v,T,I]);[p,v,T,I]=S.then?(await S)():S;const B=({customThemes:e,onChangeTheme:t,showEditorBlock:s})=>{const a=(0,p.A)(),{currentTheme:u}=(0,v.A)("currentTheme"),{themeEditor:m,updateValue:_}=(0,v.A)("themeEditor"),{showSnackbar:g,hideSnackbar:C}=(0,x.Qs)(),S=(0,d.Gz)(),{downloadFile:B}=(0,k.A)();return(0,n.jsxs)("div",{className:j.A.ThemesGroup,children:[e.map(e=>{const{background:s,accent:d,secondary:p}=(0,A.A)(e),v=e.themeId;if(!v)return null;const x=m===v;return(0,n.jsx)(T.A,{active:u===v,header:e.lang?a.use(e.lang):e.name,subheader:e.author,backgroundStyle:{backgroundColor:s},subheaderColor:p,headerColor:d,onClick:()=>t(v),asigeMenu:[{title:a.use("settings_themes_editor_send_to_catalog"),deluxe:!0,autoHide:!0,before:(0,n.jsx)(r.T,{}),onClick:async()=>{e.themeId&&await(async e=>{S.showPopout((0,n.jsx)(h.WHT,{state:"loading"}));const t=await(0,y.encryptString)(JSON.stringify(e)),s=await f.default.call("themes.submitForReview",{theme:t});if(s.error_code||s.error){let e=s.error;21===s.error_code&&(e=a.use("settings_themes_editor_only_author_update_theme")),22===s.error_code&&(e=a.use("settings_themes_editor_review_blocked")),g((0,n.jsx)(h.qb_,{onClose:C,children:e})),S.showPopout((0,n.jsx)(h.WHT,{state:"error"}))}else g((0,n.jsx)(h.qb_,{onClose:C,children:a.use("settings_themes_editor_sent_for_review")})),S.showPopout((0,n.jsx)(h.WHT,{state:"done"}));await(0,b.c)(1e3),S.hidePopout()})(e)}},x?{title:a.use("global_save"),before:(0,n.jsx)(o._,{}),onClick:()=>{e.themeId&&(_(!1),w.default.setTheme(e.themeId,e))}}:{title:a.use("settings_theme_edit"),before:(0,n.jsx)(c.n,{width:24,height:24}),onClick:()=>{e.themeId&&(t(e.themeId),_(e.themeId),w.default.setTheme(e.themeId,e))}},{isHidden:x,title:a.use("settings_theme_share"),autoHide:!0,before:(0,n.jsx)(i.T,{}),onClick:()=>{(async e=>{const t=await(0,y.encryptString)(JSON.stringify(e)),s=new Blob([JSON.stringify(t)],{type:"application/vknext-theme"}),a=URL.createObjectURL(s);await B({url:a,filename:`${e.name||e.themeId||"theme"}.vnt`}),URL.revokeObjectURL(a)})(e)}},{title:a.use("settings_theme_delete"),autoHide:!0,onClick:()=>{e.themeId&&(u===e.themeId&&t("light"===e.nativeTheme?"light":"vknext_gray"),w.default.removeTheme(e.themeId))},before:(0,n.jsx)(l.p,{fill:"var(--vkui--color_accent_red)",width:24,height:24})}]},v)}),s?(0,n.jsx)(I.A,{}):null]})},M=({themes:e,customThemes:t,showEditorBlock:s})=>{const a=(0,p.A)(),{currentTheme:r,updateValue:o}=(0,v.A)("currentTheme"),{themeEditor:i}=(0,v.A)("themeEditor"),[l,c]=(0,u.useState)([]),{showSnackbar:d,hideSnackbar:m}=(0,x.Qs)(),w=(0,C.A)();_()(async t=>{if(!e)return;const s=await Promise.all(e.map(g.default));t()&&c(s)},[e]);const b=async e=>{i!==r?o(e):d((0,n.jsx)(h.qb_,{onClose:m,children:a.use("settings_themes_editor_change_theme_error")}))};return void 0!==t?(0,n.jsx)(B,{customThemes:t,onChangeTheme:b,showEditorBlock:s}):e?l.length!==e.length?(0,n.jsx)("div",{className:j.A.ThemesGroup,children:e.map(e=>(0,n.jsx)(T.A.Skeleton,{},e))}):(0,n.jsxs)("div",{className:j.A.ThemesGroup,children:[l.map((t,s)=>{if("auto"===e[s])return(0,n.jsx)(T.A,{active:"auto"===r,header:a.use("global_theme_system"),backgroundStyle:{backgroundImage:"radial-gradient(circle at 10% 20%, rgb(0, 0, 0) 0%, rgb(64, 64, 64) 90.2%)"},headerColor:w?"#529EF4":"#5181b8",onClick:()=>b("auto")},"auto");if(!t)return null;const{background:o,accent:i}=(0,A.A)(t),l=t.themeId||e[s];return(0,n.jsx)(T.A,{active:r===l,header:t.lang?a.use(t.lang):t.name,backgroundStyle:{backgroundColor:o},headerColor:i,onClick:()=>b(l)},l)}),s?(0,n.jsx)(I.A,{}):null]}):null};a()}catch(e){a(e)}})},14694:(e,t,s)=>{s.d(t,{A:()=>a});const a=()=>"https://api.vknext.net"},15033:(e,t,s)=>{s.d(t,{l:()=>n});var a=s(96540);const n=()=>{const[e,t]=(0,a.useState)({width:window.innerWidth,height:window.innerHeight,lastWidth:void 0,lastHeight:void 0}),s=()=>{t({lastWidth:e.width,lastHeight:e.height,width:window.innerWidth,height:window.innerHeight})};return(0,a.useEffect)(()=>{s()},[]),(0,a.useEffect)(()=>(window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)),[e]),e}},22555:(e,t,s)=>{s.d(t,{z:()=>a});var a=(0,s(78414).mT)("Icon20PalleteOutline","pallete_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="pallete_outline_20"><g fill="currentColor"><path d="M10.8 6.05a1.25 1.25 0 1 1 2.5 0 1.25 1.25 0 0 1-2.5 0M14.45 8.2a1.25 1.25 0 1 0 0 2.5 1.25 1.25 0 0 0 0-2.5M4.3 9.45a1.25 1.25 0 1 1 2.5 0 1.25 1.25 0 0 1-2.5 0M7.85 4.8a1.25 1.25 0 1 0 0 2.5 1.25 1.25 0 0 0 0-2.5" /><path fill-rule="evenodd" d="M14.177 14.037c2.142.23 4.323-.743 4.323-4.037 0-2.347-.951-4.472-2.49-6.01S12.347 1.5 10 1.5s-4.472.951-6.01 2.49S1.5 7.653 1.5 10s.951 4.472 2.49 6.01S7.653 18.5 10 18.5c1.13 0 2.255-1.007 1.977-2.425-.047-.24-.11-.472-.168-.688-.254-.94-.43-1.59 1.076-1.487.036.002.455.047 1.292.137m.16-1.491-.246-.027c-.653-.07-1.037-.11-1.103-.116-.525-.036-1.172-.024-1.74.264a2 2 0 0 0-1.102 1.687c-.033.476.089.944.154 1.197l.072.27c.054.197.097.357.133.542a.6.6 0 0 1-.003.277.44.44 0 0 1-.098.173A.57.57 0 0 1 10 17a6.97 6.97 0 0 1-4.95-2.05A6.97 6.97 0 0 1 3 10c0-1.933.782-3.681 2.05-4.95A6.97 6.97 0 0 1 10 3c1.933 0 3.681.782 4.95 2.05A6.97 6.97 0 0 1 17 10c0 1.297-.412 1.873-.774 2.152-.412.317-1.065.482-1.889.394" clip-rule="evenodd" /></g></symbol>',20,20,!1,void 0)},24370:(e,t,s)=>{s.d(t,{Q:()=>l});var a=s(92046),n=s(14694),r=s(88400),o=s(46140),i=s(47961);class l{vkapi;vkAgents;userId;constructor({api:e}){this.vkapi=e,this.userId=0,this.vkAgents=new Map}async call(e,t,s){const o=await this.getVkAgent(),i={...t,"vknext-agent":await this.gvkna()};let l=0;const c=`${(0,n.A)()}/${e}`,d=JSON.stringify(i),h={Accept:"application/json","Content-Type":"application/json","VK-Agent":o,"VK-User-ID":`${this.userId||0}`,"9603a224b40d7b67210b78f2e390d00f":"ba05681e16c97c31e1be20e84f250d55","Api-Version":"3",...s};let u=new Response(JSON.stringify({error_code:408}),{status:408});for(;l<3;){const e=new AbortController,t=setTimeout(()=>e.abort(),15e3);try{if(u=await fetch(c,{body:d,method:"POST",headers:h,signal:e.signal}),502!==u.status)return(0,r.A)(u);{await(0,a.c)(2e3);const e=await u.text();if(!e.toLowerCase().includes("cloudflare"))return(0,r.A)(u);await(0,a.c)(l)}}catch(e){console.error(e),await(0,a.c)(2e3)}clearTimeout(t),l++}return(0,r.A)(u)}async getVkAgent(){if(0===this.userId&&(this.userId=await this.getUserId()),this.vkAgents.has(this.userId))return this.vkAgents.get(this.userId);return(0,o.A)(this.userId,this.vkapi)}async gvkna(){return await(0,i.A)(this.userId,"ba05681e16c97c31e1be20e84f250d55",this)}resetUserId(){this.userId=0}async getUserId(){return 0}async getRuntimeId(){return""}async getVersion(){return""}}},25087:(e,t,s)=>{s.d(t,{p:()=>a});var a=(0,s(78414).mT)("Icon28DeleteOutline","delete_outline_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 28 28" id="delete_outline_28"><path fill-rule="evenodd" d="M10.944 9.502a1 1 0 0 0-.943 1.053l.5 9a1 1 0 0 0 1.998-.11l-.5-9a1 1 0 0 0-1.055-.943m6.111 0A1 1 0 0 1 18 10.555l-.5 9a1 1 0 0 1-1.997-.11l.5-9a1 1 0 0 1 1.053-.943Z" clip-rule="evenodd" /><path fill-rule="evenodd" d="M3.5 5a1 1 0 0 0 0 2h1.096l1.298 12.823c.073.73.135 1.334.224 1.826.092.513.227.98.488 1.414a4 4 0 0 0 1.72 1.554c.458.216.936.303 1.456.344.498.039 1.106.039 1.84.039h4.757c.733 0 1.34 0 1.84-.039.519-.04.997-.128 1.455-.344a4 4 0 0 0 1.72-1.554c.261-.434.396-.901.489-1.414.088-.492.15-1.097.223-1.826L23.404 7H24.5a1 1 0 1 0 0-2h-6.111a4.502 4.502 0 0 0-8.777 0zm4.38 14.583c.078.778.132 1.304.206 1.71.07.394.148.596.234.738a2 2 0 0 0 .86.778c.15.07.359.127.758.158.41.032.94.033 1.722.033h4.68c.782 0 1.311 0 1.723-.033.399-.031.607-.087.758-.158.356-.169.656-.44.86-.778.085-.142.162-.344.233-.738.074-.406.128-.932.206-1.71L21.395 7H6.606zM14 3.5A2.5 2.5 0 0 0 11.708 5h4.584A2.5 2.5 0 0 0 14 3.5" clip-rule="evenodd" /></symbol>',28,28,!1,void 0)},27262:(e,t,s)=>{s.d(t,{A:()=>a});const a={themeBlock:"edprhdm9RJi45Wle",themeBlock__active:"tedQ02o8Y4sxa01A",themeBlock__in:"l5dIzLbWspTRMFXu",themeBlock__disabled:"Nb_UZKq1bSUneKOK",themeBlock__skeleton:"DpViTR3BUoH0LGIy",themeBlock__bg:"RDrJXqVSAv4Pzx_b",themeBlock__content:"FfZ9hvrG1PjM5dzi",themeBlock__children:"dnJ5V_Gj2YSDTsGR",themeBlock__header:"U9vFdrx5AMdlbcFv",themeBlock__subheader:"raDvS1hJLYiLyxIH",themeBlock__aside:"s0n9CmJSC73kq108",themeBlock__more:"uZH5_SwQFLuTeiwO",themeBlock__cellDisabled:"J1xypwMsofBL9ocS"}},27514:(e,t,s)=>{s.d(t,{A:()=>a});const a=e=>void 0!==e&&!1!==e&&null!==e&&""!==e},31172:(e,t,s)=>{s.d(t,{A:()=>a});const a={CatalogBlock__disabledClick:"IPleWnCb8lqtjRaK"}},34019:(e,t,s)=>{s.d(t,{n:()=>a});var a=(0,s(78414).mT)("Icon28SyncOutline","sync_outline_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 28 28" id="sync_outline_28"><g fill="currentColor"><path d="M21.509 4.5a1 1 0 0 1 1 1V9a1 1 0 0 1-1 1h-3.502a1 1 0 1 1 0-2h1.292a7.98 7.98 0 0 0-5.294-2 8.004 8.004 0 0 0-7.955 7.11 1 1 0 0 1-1.989-.22A10.004 10.004 0 0 1 14.005 4a9.97 9.97 0 0 1 6.503 2.4v-.9a1 1 0 0 1 1-1M23.064 14.006a1 1 0 0 1 .885 1.104A10.004 10.004 0 0 1 14.005 24a9.97 9.97 0 0 1-6.503-2.4v.9a1 1 0 0 1-2.001 0V19a1 1 0 0 1 1-1h3.502a1 1 0 1 1 0 2H8.71a7.97 7.97 0 0 0 5.295 2 8.004 8.004 0 0 0 7.955-7.11 1 1 0 0 1 1.104-.884" /></g></symbol>',28,28,!1,void 0)},37476:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.d(t,{A:()=>j});var n=s(74848),r=s(34447),o=s(48797),i=s(95671),l=s(61699),c=s(8015),d=s(22549),h=s(92425),u=s(39107),m=s(96540),_=s(74225),g=s.n(_),p=s(72615),v=s(87421),w=e([i,c,d]);[i,c,d]=w.then?(await w)():w;const x=({option:e,themes:t,disabled:s})=>{const a=(0,c.A)(),r=(0,d.A)(e),o=r[e],i=r.updateValue;return(0,n.jsx)(u.l6P,{disabled:s,placeholder:a.use("settings_option_not_selected"),options:t,value:o,onChange:({target:e})=>{i(e.value)},renderOption:({option:e,...t})=>(0,n.jsx)(u.PS3,{...t,description:e.subtitle})})},A=async({lang:e})=>{const t=await h.default.getThemes(),s=[];for(const[a,n]of Object.entries({...r.A,...t})){const t=n.lang?e.use(n.lang):n.name;s.push({label:t,value:a,subtitle:n.author})}return s},b=p.A.VK_MINI_APPS.filter(e=>!e.includes(".vk.com")&&!e.includes(".vk.ru")),y=()=>{const{paintingMiniApps:e,updateValue:t}=(0,d.A)("paintingMiniApps"),[s,a]=(0,m.useState)(!1),r=(0,c.A)(),{permissions:o}=(0,l.A)();g()(async e=>{if(!o)return;const t=await o.contains({origins:b});e()&&a(t)},[e,o]);return o?(0,n.jsx)(i.A,{option:"paintingMiniApps",title:r.use("settings_sett_painting_mini_apps"),subtitle:r.use("settings_sett_painting_mini_apps_desc"),onClick:()=>{if(!o)return;const a=!e;return a?s?void t(a):o.request({origins:b}).then(e=>{e&&t(a)}):t(a)},confirmChecked:async()=>!1,isBeta:!0,isReload:!0}):null},j=()=>{const e=(0,c.A)(),[t,s]=(0,m.useState)([]);return g()(async t=>{const a=await A({lang:e});t()&&s(a)},[e]),(0,n.jsxs)(o.A,{children:[(0,n.jsxs)(u.YJl,{children:[(0,n.jsx)(u.iau,{className:v.A.SettingsTab__systemTheme,children:(0,n.jsx)(u.lZ$,{extraSubtitle:e.use("settings_system_theme_info")})}),(0,n.jsxs)(u.gb$,{mode:"horizontal",children:[(0,n.jsx)(u.eIh,{top:e.use("settings_theme_light_form_name_label"),children:(0,n.jsx)(x,{option:"firstTheme",themes:t})}),(0,n.jsx)(u.eIh,{top:e.use("settings_theme_dark_form_name_label"),children:(0,n.jsx)(x,{option:"secondTheme",themes:t})})]})]}),(0,n.jsxs)(u.YJl,{separator:"hide",children:[(0,n.jsx)(y,{}),(0,n.jsx)(i.A,{option:"headerMoon",title:e.use("settings_sett_header_moon")})]})]})};a()}catch(e){a(e)}})},37851:(e,t,s)=>{s.d(t,{b:()=>r});var a=s(74848),n=(s(96540),s(22185));const r=e=>(0,a.jsx)(n.uC,{viewBox:"0 0 24 24",width:20,height:20,vkuiIconId:"external_link_outline_24",vkuiAttrs:{fill:"none"},vkuiProps:e,children:(0,a.jsxs)("g",{fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd",children:[(0,a.jsx)("path",{d:"M5.146 3.634c.762-.407 1.512-.534 3.082-.534H10.1a.9.9 0 1 1 0 1.8H8.228c-1.487 0-1.87.128-2.233.322q-.504.27-.773.773c-.194.362-.322.746-.322 2.233v7.544c0 1.487.128 1.87.322 2.233q.27.504.773.774c.362.193.746.321 2.233.321h7.544c1.487 0 1.87-.128 2.233-.321q.504-.27.774-.774c.193-.362.321-.746.321-2.233V13.9a.9.9 0 1 1 1.8 0v1.872c0 1.57-.127 2.32-.534 3.082a3.65 3.65 0 0 1-1.512 1.512c-.763.407-1.512.534-3.082.534H8.228c-1.57 0-2.32-.127-3.082-.534a3.65 3.65 0 0 1-1.512-1.512c-.407-.762-.534-1.512-.534-3.082V8.228c0-1.57.127-2.32.534-3.082a3.65 3.65 0 0 1 1.512-1.512"}),(0,a.jsx)("path",{d:"M14 4a.9.9 0 0 1 .9-.9H20a.9.9 0 0 1 .9.9v5.1a.9.9 0 1 1-1.8 0V6.173l-6.564 6.563a.9.9 0 1 1-1.272-1.272L17.827 4.9H14.9A.9.9 0 0 1 14 4"})]})})},40411:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.d(t,{A:()=>g});var n=s(74848),r=s(56287),o=s(8015),i=s(90275),l=s(27514),c=s(99381),d=s(37851),h=s(73615),u=s(52509),m=s(39107),_=e([o]);o=(_.then?(await _)():_)[0];const g=({helpLink:e,actions:t})=>{const s=(0,o.A)(),a=(0,r.A)(),_=()=>{window.open(window.location.href),window.close()};return e||(0,l.A)(t)?(0,n.jsx)(i.Ku,{placement:"bottom-end",actions:(0,n.jsxs)(n.Fragment,{children:[(0,l.A)(t)&&(0,n.jsxs)(n.Fragment,{children:[t,(a||e)&&(0,n.jsx)(i.AS,{})]}),a&&(0,n.jsx)(i.vH,{onClick:_,leftIcon:(0,n.jsx)(d.b,{width:20,height:20}),children:s.use("settings_open_settings")}),e&&(0,n.jsx)(i.vH,{href:e,target:"_blank",leftIcon:(0,n.jsx)(h.V,{}),children:s.use("settings_menu_help_section")})]}),children:(0,n.jsx)(m.qAe,{onClick:c.A,children:(0,n.jsx)(u.z,{})})}):a?(0,n.jsx)(m.m_M,{description:s.use("settings_open_settings"),placement:"bottom",usePortal:!0,children:(0,n.jsx)(m.qAe,{onClick:_,children:(0,n.jsx)(d.b,{})})}):null};a()}catch(e){a(e)}})},43208:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.d(t,{A:()=>p});var n=s(74848),r=s(64074),o=s(11157),i=s(39107),l=s(96540),c=s(7139),d=s(48276),h=s(68741),u=s(90275),m=s(43027),_=s(27262),g=e([c]);c=(g.then?(await g)():g)[0];const p=({items:e})=>{const[t,s]=(0,l.useState)(!1),a=(0,o.Gz)(),[g]=(0,d.A)();return(0,n.jsx)("div",{className:_.A.themeBlock__aside,children:(0,n.jsx)(u.Ku,{trigger:"hover",placement:"right",shown:t,onShownChange:s,actions:(0,n.jsx)(n.Fragment,{children:e.map((e,t)=>{const{isHidden:r,title:o,subtitle:d,before:p,after:v,onClick:w,disabled:x,deluxe:A,autoHide:b}=e;return r?(0,n.jsx)(l.Fragment,{},t):(0,n.jsx)(u.vH,{leftIcon:p,subtitle:d,onClick:e=>{(0,m.A)(e),b&&s(!1),!A||g?w&&w(e):a.push(h.JZ.root.main.deluxe)},disabled:x,className:(0,i.xWm)(x&&_.A.themeBlock__cellDisabled),rightIcon:(0,n.jsxs)(n.Fragment,{children:[v,A&&(0,n.jsx)(c.A.PrimeDeluxe,{offsetByMainAxis:-2})]}),children:o},t)})}),children:(0,n.jsx)(i.K0,{className:_.A.themeBlock__more,children:(0,n.jsx)(r.M,{})})})})};a()}catch(e){a(e)}})},44298:(e,t,s)=>{s.d(t,{A:()=>o});var a=s(74848),n=s(39107),r=s(27262);const o=({getRootRef:e})=>(0,a.jsx)("div",{ref:e,className:`${r.A.themeBlock} ${r.A.themeBlock__skeleton}`,children:(0,a.jsxs)("div",{className:r.A.themeBlock__in,children:[(0,a.jsx)("div",{className:r.A.themeBlock__bg}),(0,a.jsxs)("div",{className:r.A.themeBlock__content,children:[(0,a.jsx)("span",{className:r.A.themeBlock__header,children:(0,a.jsx)(n.EAD,{width:110})}),(0,a.jsx)("span",{className:r.A.themeBlock__subheader,children:(0,a.jsx)(n.EAD,{width:50})})]})]})})},46140:(e,t,s)=>{s.d(t,{A:()=>h});var a=s(22440),n=s(92046),r=s(98570),o=s(75412);const i=(0,a.A)(),l=async e=>{const t=(0,r.A)().browserApi;if(t){return(await t.storage.local.get(e))[e]}if(i?.localStorage)return i.localStorage.getItem(e);const{storage:a}=await s.e(6815).then(s.t.bind(s,96815,23));return(await a.local.get(e))[e]},c=async(e,t)=>{const a=(0,r.A)().browserApi;if(a)return void await a.storage.local.set({[e]:t});if(i?.localStorage)return void i.localStorage.setItem(e,t);const{storage:n}=await s.e(6815).then(s.t.bind(s,96815,23));await n.local.set({[e]:t})},d=async(e,t)=>{const s=`vknLP${e}`,a=`vknLPD${e}`,r=await l(s),i=await l(a);if(r&&Date.now()-(parseInt(i||"")||0)<216e5)return r?.response||r;try{const r=await t.apps.getAppLaunchParams({mini_app_id:await(0,o.A)(),referer:"other",v:"5.123"}),i=new URLSearchParams(Object.entries(r)).toString();return i?(await c(s,i),await c(a,Date.now().toString()),i):(await(0,n.c)(5e3),d(e,t))}catch(s){return console.error(s),await(0,n.c)(1500),d(e,t)}},h=d},46215:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.d(t,{A:()=>w});var n=s(74848),r=s(39107),o=s(96540),i=s(74225),l=s.n(i),c=s(8015),d=s(34447),h=s(58048),u=s(48797),m=s(22549),_=s(11285),g=e([c,m,_]);[c,m,_]=g.then?(await g)():g;const p=()=>{const e=(0,c.A)(),[t,s]=(0,o.useState)("123"),{currentTheme:a}=(0,m.A)("currentTheme"),{themeEditor:i,updateValue:d}=(0,m.A)("themeEditor");return l()(async e=>{if(null===a)return s("");const t=await(0,h.default)(a);if(!e())return;let n=t.name;t.author&&(n+=` (${t.author})`),s(n)},[a]),t?!1===i||i!==a?null:(0,n.jsx)(r.YJl,{children:(0,n.jsx)(r.iau,{children:(0,n.jsx)(r.lZ$,{extraSubtitle:e.use("settings_themes_editor_opened_warning",{themeName:t}),actions:(0,n.jsx)(r.$nd,{onClick:()=>d(!1),children:e.use("settings_themes_editor_close")})})})}):null},v=()=>{const{currentTheme:e}=(0,m.A)("currentTheme"),{themeEditor:t}=(0,m.A)("themeEditor");return t===e?(0,n.jsx)(p,{}):null},w=()=>{const[e,t]=(0,o.useState)([]),a=(0,c.A)(),i=(0,o.useRef)();return l()(async e=>{const a=(await Promise.resolve().then(s.bind(s,92425))).default,n=await a.getThemes();if(!e())return;t(Object.values(n));const r=a.addListener((e,s)=>{t(Object.values(s))});i.current=()=>r()},()=>{i.current?.()},[]),(0,n.jsxs)(u.A,{children:[(0,n.jsx)(v,{}),(0,n.jsx)(r.YJl,{header:(0,n.jsx)(r.Y9Y,{size:"s",children:a.use("settings_themes_group_default")}),children:(0,n.jsx)(_.A,{themes:d.vkThemes})}),(0,n.jsx)(r.YJl,{header:(0,n.jsx)(r.Y9Y,{size:"s",children:a.use("settings_themes_group_vknext")}),children:(0,n.jsx)(_.A,{themes:d.V})}),(0,n.jsx)(r.YJl,{separator:"hide",header:(0,n.jsx)(r.Y9Y,{size:"s",children:a.use("settings_themes_group_custom")}),children:(0,n.jsx)(_.A,{customThemes:e,showEditorBlock:!0})})]})};a()}catch(e){a(e)}})},47961:(e,t,s)=>{s.d(t,{A:()=>n});var a=s(387);const n=async(e,t,s)=>{try{delete Uint8Array.prototype.toJSON}catch(e){console.error(e)}const n=(0,a.A)(),r=((e,t)=>{const s=e.toString().length,a=new Uint8Array(16);for(let n=0;n<t.length;n++){const r=t.charCodeAt(n)*e/s;a[n%16]^=255&r}return a})(e,t),o=await(e=>crypto.subtle.importKey("raw",e,{name:"AES-CBC"},!1,["encrypt"]))(r),i={version:await s.getVersion(),udGltZS5p:await s.getRuntimeId(),cGlkb3I:e,fdhjiD:"ba05681e16c97c31e1be20e84f250d55",v9Cdi3sD:n},l=JSON.stringify(i),c=(new TextEncoder).encode(l),d={name:"AES-CBC",iv:crypto.getRandomValues(new Uint8Array(16))},h=await crypto.subtle.encrypt(d,o,c),u=new Uint8Array(d.iv.length+h.byteLength);return u.set(new Uint8Array(d.iv),0),u.set(new Uint8Array(h),d.iv.length),u}},48269:(e,t,s)=>{s.d(t,{T:()=>a});var a=(0,s(78414).mT)("Icon24ShareOutline","share_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="share_outline_24"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z" /><path fill="currentColor" fill-rule="nonzero" d="M11.996 3.725A2.15 2.15 0 0 0 10 5.87l-.001 2.117-.02.005a9.904 9.904 0 0 0-7.827 10.721c.083.811 1.116 1.103 1.611.455l.187-.237a9.08 9.08 0 0 1 5.836-3.265l.213-.026.001 2.494a2.15 2.15 0 0 0 3.476 1.692l7.824-6.132a2.15 2.15 0 0 0 0-3.384l-7.824-6.132a2.15 2.15 0 0 0-1.326-.458zm.154 1.795a.35.35 0 0 1 .216.075l7.824 6.132a.35.35 0 0 1 0 .55l-7.824 6.133a.35.35 0 0 1-.566-.276l-.001-3.447a.9.9 0 0 0-.915-.9l-.233.004-.342.017a10.9 10.9 0 0 0-6.119 2.365l-.174.144.024-.135a8.1 8.1 0 0 1 6.968-6.537.9.9 0 0 0 .791-.893L11.8 5.87a.35.35 0 0 1 .35-.35" /></g></symbol>',24,24,!1,void 0)},48797:(e,t,s)=>{s.d(t,{A:()=>o});var a=s(74848),n=s(39107),r=s(58006);const o=({children:e,isTabs:t=!1,style:s={},...o})=>{const i=(0,r.A)({isTabs:t});return s.maxHeight||(s.maxHeight=i),(0,a.jsx)(n.guY,{style:s,...o,children:e})}},50767:(e,t,s)=>{s.d(t,{P:()=>a});var a=(0,s(78414).mT)("Icon24DeleteOutline","delete_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="delete_outline_24"><path fill-rule="evenodd" d="M14.556 8.102a.9.9 0 0 1 .842.954l-.5 8a.9.9 0 0 1-1.796-.112l.5-8a.9.9 0 0 1 .954-.842m-5.112 0a.9.9 0 0 0-.842.954l.5 8a.9.9 0 1 0 1.796-.112l-.5-8a.9.9 0 0 0-.954-.842" clip-rule="evenodd" /><path fill-rule="evenodd" d="M3 4.1a.9.9 0 1 0 0 1.8h1.18l1.155 12.316c.045.484.084.898.143 1.237.062.359.157.704.351 1.03a2.9 2.9 0 0 0 1.249 1.137c.342.162.695.225 1.057.253.344.027.76.027 1.246.027h5.238c.486 0 .902 0 1.246-.027.362-.028.715-.09 1.057-.253a2.9 2.9 0 0 0 1.249-1.137c.194-.326.289-.671.35-1.03.06-.34.099-.753.144-1.237L19.82 5.9H21a.9.9 0 1 0 0-1.8h-5.204a3.901 3.901 0 0 0-7.592 0zm4.124 13.915c.05.526.082.869.128 1.13.043.252.087.356.124.417a1.1 1.1 0 0 0 .474.432c.064.03.172.065.426.085.265.02.61.021 1.138.021h5.172c.528 0 .873 0 1.138-.021.254-.02.362-.055.426-.085a1.1 1.1 0 0 0 .474-.432c.037-.06.08-.166.124-.416.046-.262.079-.605.128-1.131L18.012 5.9H5.988zM12 2.9a2.1 2.1 0 0 0-1.898 1.2h3.796A2.1 2.1 0 0 0 12 2.9" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},52509:(e,t,s)=>{s.d(t,{z:()=>a});var a=(0,s(78414).mT)("Icon24MoreHorizontal","more_horizontal_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="more_horizontal_24"><path d="M18 10c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2m-6 4c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m-6 0c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2" /></symbol>',24,24,!1,void 0)},56287:(e,t,s)=>{s.d(t,{A:()=>r});var a=s(91691),n=s(15033);const r=()=>{const e=(0,n.l)();return((e.width||0)<=800||(e.height||0)<=600)&&!(0,a.A)()}},61969:(e,t,s)=>{s.d(t,{T:()=>a});var a=(0,s(78414).mT)("Icon24CloudArrowUpOutline","cloud_arrow_up_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="cloud_arrow_up_outline_24"><path fill-rule="evenodd" d="M6.446 10.013c0-2.297 1.934-4.21 4.383-4.21 2.107 0 3.841 1.422 4.276 3.282a.9.9 0 0 0 .85.695c2.385.07 4.246 1.953 4.246 4.208 0 2.298-1.933 4.21-4.382 4.21h-.221a.9.9 0 0 0 0 1.8h.22c3.387 0 6.184-2.662 6.184-6.01 0-3.062-2.342-5.552-5.333-5.954-.846-2.36-3.154-4.031-5.84-4.031-3.386 0-6.183 2.663-6.183 6.01q0 .18.011.358c-1.575.886-2.652 2.547-2.652 4.469 0 2.877 2.402 5.159 5.302 5.159h1.091a.9.9 0 1 0 0-1.8h-1.09c-1.963 0-3.503-1.532-3.503-3.36 0-1.38.875-2.588 2.155-3.1a.9.9 0 0 0 .552-.997 4 4 0 0 1-.066-.729m4.654 11.09a.9.9 0 0 0 1.8 0v-7.981l1.553 1.605a.9.9 0 1 0 1.293-1.252l-3.1-3.203a.9.9 0 0 0-1.292 0L8.25 13.474a.9.9 0 0 0 1.292 1.252L11.1 13.12z" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},64074:(e,t,s)=>{s.d(t,{M:()=>a});var a=(0,s(78414).mT)("Icon20SlidersOutline","sliders_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="sliders_outline_20"><path fill="currentColor" fill-rule="evenodd" d="M7.5 7.75a1 1 0 1 1 0-2 1 1 0 0 1 0 2M5.114 6a2.501 2.501 0 0 1 4.772 0h6.364a.75.75 0 0 1 0 1.5H9.886a2.501 2.501 0 0 1-4.772 0H3.75a.75.75 0 0 1 0-1.5zm7.386 8.25a1 1 0 1 0 0-2 1 1 0 0 0 0 2m2.386-1.75a2.501 2.501 0 0 0-4.771 0H3.75a.75.75 0 0 0 0 1.5h6.365a2.501 2.501 0 0 0 4.77 0h1.365a.75.75 0 0 0 0-1.5z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},64808:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.r(t),s.d(t,{default:()=>p});var n=s(74848),r=s(11157),o=s(39107),i=s(7708),l=s(40411),c=s(8015),d=s(68741),h=s(77361),u=s(85796),m=s(37476),_=s(46215),g=e([l,c,h,u,m,_]);[l,c,h,u,m,_]=g.then?(await g)():g;const p=()=>{const e=(0,c.A)(),t=(0,r.Gz)(),{tab:s="themes"}=(0,r.Gu)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.A,{backPage:d.JZ.root.main.appearance,after:(0,n.jsx)(l.A,{helpLink:"https://vk.ru/@vknext-themes"}),children:(0,n.jsx)(o.tUM,{mode:"default",children:(0,n.jsxs)(o.ox2,{arrowSize:"m",children:[(0,n.jsx)(o.ORv,{onClick:()=>t.replace(d.JZ.root.main_0.themes.themes),selected:"themes"===s,children:e.use("settings_tab_themes")}),(0,n.jsx)(o.ORv,{onClick:()=>t.replace(d.JZ.root.main_0.themes.catalog),selected:"catalog"===s,children:e.use("settings_tab_catalog")}),!1,(0,n.jsx)(o.ORv,{onClick:()=>t.replace(d.JZ.root.main_0.themes.settings),selected:"settings"===s,children:e.use("settings_tab_settings")})]})})}),"themes"===s&&(0,n.jsx)(_.A,{}),"catalog"===s&&(0,n.jsx)(h.A,{}),!1,"settings"===s&&(0,n.jsx)(m.A,{})]})};a()}catch(e){a(e)}})},65715:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.d(t,{A:()=>h});var n=s(74848),r=s(39107),o=s(43208),i=s(27262),l=s(44298),c=e([o]);o=(c.then?(await c)():c)[0];const d=({header:e,subheader:t,headerColor:s,subheaderColor:a,active:l,disabled:c,onClick:d,asigeMenu:h,children:u,backgroundStyle:m,getRootRef:_,className:g,...p})=>(0,n.jsx)("div",{ref:_,className:(0,r.xWm)(i.A.themeBlock,l&&i.A.themeBlock__active,c&&i.A.themeBlock__disabled,g),onClick:d,...p,children:(0,n.jsxs)("div",{className:i.A.themeBlock__in,children:[(0,n.jsx)("div",{className:i.A.themeBlock__bg,children:(0,n.jsx)("div",{style:m})}),u?(0,n.jsx)("div",{className:i.A.themeBlock__children,children:u}):(0,n.jsxs)("div",{className:i.A.themeBlock__content,children:[e&&(0,n.jsx)("span",{title:e,className:i.A.themeBlock__header,style:{color:s},children:e}),t&&(0,n.jsx)("span",{title:t,className:i.A.themeBlock__subheader,style:{color:a},children:t})]}),h&&(0,n.jsx)(o.A,{items:h})]})});d.Skeleton=l.A;const h=d;a()}catch(e){a(e)}})},70122:(e,t,s)=>{s.r(t),s.d(t,{default:()=>l});var a=s(98570),n=s(24370),r=s(87251);const o=new n.Q({api:r.default});let i=!1;o.getUserId=async()=>"number"==typeof window.vk?.id?window.vk.id:i?await new Promise(e=>{const t=setInterval(()=>{i||(e(r.default.user_id),clearInterval(t))},200)}):(r.default.user_id||(i=!0,await r.default.forceUpdateToken(),i=!1),r.default.user_id),o.getRuntimeId=async()=>{const{getManifest:e}=(0,a.A)().browserApi;return e().id},o.getVersion=async()=>{const{getManifest:e}=(0,a.A)().browserApi;return e().version};const l=o},71020:(e,t,s)=>{s.d(t,{_:()=>a});var a=(0,s(78414).mT)("Icon28BrushOutline","brush_outline_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 28 28" id="brush_outline_28"><path fill="currentColor" fill-rule="evenodd" d="M23.651 4.099a2.107 2.107 0 0 0-2.895.102l-8.031 7.93a1 1 0 1 0 1.405 1.423l8.037-7.936.015-.015a.107.107 0 0 1 .145-.005.08.08 0 0 1 .01.115l-.014.018-7.132 8.941a1 1 0 1 0 1.563 1.247l7.126-8.934a2.08 2.08 0 0 0-.229-2.886M8.128 18.89c.049-1.066.88-1.891 1.936-1.891 1.1 0 1.936.855 1.936 1.845 0 .973-.847 2.28-2.982 2.927-.936.283-1.68.267-2.24.142.635-.6 1.281-1.54 1.35-3.023M10.064 15a4.01 4.01 0 0 0-4.07 4c-.046.979-.353 1.28-.769 1.617-.112.09-.223.17-.338.25l-.051.036c-.093.064-.21.145-.304.22-.06.047-.141.115-.219.202-.073.08-.191.23-.26.444-.079.247-.075.53.046.794.106.234.268.38.376.46.842.634 2.593 1.429 5.122.663 2.634-.797 4.403-2.183 4.403-4.69C14 17.141 12.52 15 10.064 15" clip-rule="evenodd" /></symbol>',28,28,!1,void 0)},72615:(e,t,s)=>{s.d(t,{A:()=>a});const a={VKCOM:["https://vk.com/*","https://vk.ru/*","https://vkvideo.ru/*","https://vksport.vkvideo.ru/*"],VK_OAUTH:["https://oauth.vk.com/*","https://login.vk.com/*","https://oauth.vk.ru/*","https://login.vk.ru/*"],VK_MINI_APPS:["https://static.vk.com/*","https://static.vk.ru/*","https://connect.vk.com/*","https://id.vk.com/*","https://platform.vk.com/*","https://connect.vk.ru/*","https://id.vk.ru/*","https://platform.vk.ru/*","https://*.pages.vk-apps.com/*"]}},73427:(e,t,s)=>{s.a(e,async(e,t)=>{try{s(74848),s(70122);var a=s(8015),n=s(99381),r=(s(89038),s(96540)),o=(s(74225),e([a]));a=(o.then?(await o)():o)[0];const i={all_themes:[],is_loading:!0};(0,r.createContext)([i,n.A]);t()}catch(e){t(e)}})},73615:(e,t,s)=>{s.d(t,{V:()=>a});var a=(0,s(78414).mT)("Icon20HelpOutline","help_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="help_outline_20"><g fill="currentColor"><path d="M10 6.25a1.25 1.25 0 0 0-1.21.937.75.75 0 0 1-1.453-.374 2.75 2.75 0 0 1 5.413.687c0 1.211-.654 1.84-1.144 2.298l-.009.008c-.478.446-.772.72-.855 1.3a.75.75 0 0 1-1.484-.212c.158-1.11.803-1.709 1.256-2.13l.068-.062c.447-.417.668-.663.668-1.202 0-.69-.56-1.25-1.25-1.25M10 15a1 1 0 1 0 0-2 1 1 0 0 0 0 2" /><path fill-rule="evenodd" d="M10 1.5a8.5 8.5 0 1 0 0 17 8.5 8.5 0 0 0 0-17M3 10a7 7 0 1 0 14 0 7 7 0 0 0-14 0" clip-rule="evenodd" /></g></symbol>',20,20,!1,void 0)},75412:(e,t,s)=>{s.d(t,{A:()=>n});var a=s(14694);const n=async()=>{try{const e=await fetch(`${(0,a.A)()}/internal.getAuthAppId`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json","Api-Version":"3"}});if(e.ok)return parseInt(await e.text())}catch(e){console.error("[VK Next/getAuthAppId] Error:",e)}return 8194076}},77361:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.d(t,{A:()=>_});var n=s(74848),r=s(39107),o=s(8015),i=s(17),l=s(9111),c=s(48797),d=s(65715),h=s(9436),u=e([o,i,l,d]);[o,i,l,d]=u.then?(await u)():u;const m=()=>{const e=(0,o.A)(),[{is_loading:t,all_themes:s,user_themes_in_moderation:a,user_themes_published:c,user_themes_rejected:u,error:m}]=(0,l.d)(),_=a.length>0,g=c.length>0,p=u.length>0,v=_||g||p;if(m)return(0,n.jsx)(r.YJl,{separator:"hide",children:(0,n.jsx)(r.OrA,{title:e.use("settings_error_getting_data"),children:m})});if(t){const e=new Array(18).fill(0).map((e,t)=>(0,n.jsx)(d.A.Skeleton,{},e+t));return(0,n.jsxs)(r.YJl,{children:[(0,n.jsx)(r.iau,{children:(0,n.jsx)(r.lZ$,{subtitle:(0,n.jsx)(r.EAD,{width:422})})}),(0,n.jsx)("div",{className:h.A.ThemesGroup,children:e})]})}return(0,n.jsxs)(n.Fragment,{children:[g&&(0,n.jsx)(r.YJl,{header:(0,n.jsx)(r.Y9Y,{children:e.use("settings_my_published_themes")}),children:(0,n.jsx)("div",{className:h.A.ThemesGroup,children:c.map(e=>(0,n.jsx)(i.A,{status:"published",theme:e},e.themeId))})}),_&&(0,n.jsx)(r.YJl,{header:(0,n.jsx)(r.Y9Y,{children:e.use("settings_my_review_themes")}),children:(0,n.jsx)("div",{className:h.A.ThemesGroup,children:a.map(e=>(0,n.jsx)(i.A,{status:"in_moderation",theme:e},e.themeId))})}),p&&(0,n.jsx)(r.YJl,{header:(0,n.jsx)(r.Y9Y,{children:e.use("settings_my_rejected_themes")}),children:(0,n.jsx)("div",{className:h.A.ThemesGroup,children:u.map(e=>(0,n.jsx)(i.A,{status:"rejected",theme:e},e.themeId))})}),(0,n.jsxs)(r.YJl,{separator:"hide",header:v&&(0,n.jsx)(r.Y9Y,{children:e.use("settings_catalog_all_themes")}),children:[(0,n.jsx)(r.iau,{children:(0,n.jsx)(r.lZ$,{subtitle:e.use("settings_themes_catalog_info")})}),(0,n.jsx)("div",{className:h.A.ThemesGroup,children:s.map(e=>(0,n.jsx)(i.A,{theme:e},e.themeId))})]})]})},_=()=>(0,n.jsx)(l.A,{children:(0,n.jsx)(c.A,{children:(0,n.jsx)(m,{})})});a()}catch(e){a(e)}})},85796:(e,t,s)=>{s.a(e,async(e,t)=>{try{s(74848),s(48797);var a=s(8015),n=(s(39107),s(65715)),r=(s(9436),s(90832)),o=s(73427),i=e([a,n,r,o]);[a,n,r,o]=i.then?(await i)():i;t()}catch(e){t(e)}})},87421:(e,t,s)=>{s.d(t,{A:()=>a});const a={SettingsTab__systemTheme:"cwKOmxDuuPdmuUT5"}},88400:(e,t,s)=>{s.d(t,{A:()=>a});const a=async e=>{const t=await e.json(),a=e.headers.get("Content-Type");if(a&&a.startsWith("application/x-vknextpack")&&t)try{const e=new Uint8Array(Object.values(t)),{decode:a}=await s.e(7802).then(s.bind(s,77802));return a(e)}catch(e){console.error(e)}return t}},88564:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.d(t,{A:()=>b});var n=s(74848),r=s(2184),o=s(98001),i=s(22555),l=s(71020),c=s(39107),d=s(89038),h=s(8015),u=s(22549),m=s(57087),_=s(58048),g=s(92425),p=s(90275),v=s(43027),w=s(65715),x=s(9436),A=e([h,u,w]);[h,u,w]=A.then?(await A)():A;const b=()=>{const e=(0,h.A)(),{currentTheme:t,updateValue:a}=(0,u.A)("currentTheme"),{themeEditor:A,updateValue:b}=(0,u.A)("themeEditor"),{showSnackbar:y,hideSnackbar:j}=(0,m.Qs)(),f=async r=>{const o=r||t;if(!o)return;if(A===o)return void y((0,n.jsx)(c.qb_,{onClose:j,children:e.use("settings_themes_editor_create_theme_error")}));const i=(await s.e(7248).then(s.bind(s,87248))).default,l=(await Promise.resolve().then(s.bind(s,87251))).default,d=await l.users.get({fields:["domain"]}).then(e=>e[0]),h={...await(0,_.default)(o)};h.name=h.stickersOutline?e.use("settings_themes_editor_new_gray_theme"):e.use("settings_themes_editor_new_light_theme"),h.author=`@${d.domain||`id${d.id}`}`,h.type="custom",h.themeId=`vknext_${i(10)}`,delete h.accentColor,delete h.lang,delete h.themeColor,await g.default.setTheme(h.themeId,h),a(h.themeId),b(h.themeId)},k=!t;return(0,n.jsx)(p.Ku,{className:x.A.ThemesGroup__editorBlock,trigger:"hover",actions:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(p.Ku,{disabled:!k,className:x.A.ThemesGroup__editorBlock,trigger:"hover",placement:"right-start",offsetByMainAxis:0,offsetByCrossAxis:-4,actions:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(p.vH,{subtitle:"@vk",onClick:()=>f("light"),children:e.use("global_theme_light")}),(0,n.jsx)(p.vH,{subtitle:"@vk",onClick:()=>f("vkcom_dark"),children:e.use("global_theme_dark")})]}),children:(0,n.jsx)(p.vH,{onClick:e=>{if(k)return(0,v.A)(e);f()},leftIcon:(0,n.jsx)(i.z,{}),rightIcon:k?(0,n.jsx)(r.U,{}):void 0,children:e.use("settings_themes_editor_create_new_theme")})}),(0,n.jsx)(p.vH,{onClick:()=>{const s=document.createElement("input");s.type="file",s.accept=[".vnt",!1].filter(Boolean).join(","),s.style.opacity="0",s.style.position="absolute",s.style.left="0",s.style.top="0",s.style.width="1",s.style.height="1",s.onchange=async()=>{if(!s.files)return;const r=s.files[0];s.remove();try{const s=await new Promise(e=>{const t=new FileReader;t.onload=function(){e(t.result)},t.readAsText(r)}),o=JSON.parse(s);let i=null;if(i=JSON.parse(await(0,d.decryptString)(o.themeId,o.dataId)),!i?.themeId)return;let l=!1;await g.default.getTheme(i.themeId)&&(l=!0),await g.default.setTheme(i.themeId,i),y((0,n.jsx)(c.qb_,{onClose:j,children:e.use(l?"settings_themes_editor_update_theme_done":"settings_themes_editor_custom_theme_import_done",{name:i.name})})),t&&a(i.themeId)}catch(t){console.error(t),y((0,n.jsx)(c.qb_,{onClose:j,children:e.use("settings_themes_editor_custom_theme_import_error")}))}},document.body.append(s),s.click()},leftIcon:(0,n.jsx)(o.R,{}),children:e.use("settings_themes_editor_import_theme")})]}),children:(0,n.jsx)(w.A,{backgroundStyle:{backgroundColor:"#21D4FD",backgroundImage:"linear-gradient(19deg, #21D4FD 0%, #B721FF 100%)"},children:(0,n.jsx)(l._,{style:{color:"var(--vkui--color_icon_contrast)"}})})},"createTheme")};a()}catch(e){a(e)}})},89038:(e,t,s)=>{s.d(t,{decryptString:()=>d,encryptString:()=>c});const a={alg:"A256GCM",ext:!0,k:"aPrR7gLLeLawtQX4u1gp7FzXNMjfSbDVs9LwP-n9ux0",key_ops:["encrypt","decrypt"],kty:"oct"},n=async()=>await crypto.subtle.importKey("jwk",a,{name:"AES-GCM"},!1,["encrypt","decrypt"]),r=async(e,t)=>{const s=(e=>(new TextEncoder).encode(e))(e),a=globalThis.crypto.getRandomValues(new Uint8Array(16));return{cipher:await globalThis.crypto.subtle.encrypt({name:"AES-GCM",iv:a},t,s),iv:a}},o=e=>{const t=new Uint8Array(e);return globalThis.btoa(String.fromCharCode.apply(null,t))},i=e=>{const t=globalThis.atob(e),s=new ArrayBuffer(t.length),a=new Uint8Array(s);for(let e=0;e<t.length;e++)a[e]=t.charCodeAt(e);return s},l=async(e,t,s)=>{const a=await globalThis.crypto.subtle.decrypt({name:"AES-GCM",iv:s},t,e);return n=a,(new TextDecoder).decode(n);var n},c=async e=>{const t=await n(),{cipher:s,iv:a}=await r(e,t);return{themeId:o(s),dataId:o(a)}},d=async(e,t)=>await l(i(e),await n(),i(t))},90832:(e,t,s)=>{s.a(e,async(e,t)=>{try{s(74848),s(39107),s(11157);var a=s(73427),n=s(8015),r=s(22549),o=(s(92425),s(57087),s(70122),s(65715)),i=e([a,n,r,o]);[a,n,r,o]=i.then?(await i)():i;t()}catch(e){t(e)}})},92286:(e,t,s)=>{s.d(t,{_:()=>a});var a=(0,s(78414).mT)("Icon24DoneOutline","done_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="done_outline_24"><path fill-rule="evenodd" d="M20.736 5.664a.9.9 0 0 1 0 1.272l-11.1 11.1a.9.9 0 0 1-1.272 0l-5.1-5.1a.9.9 0 0 1 1.272-1.272L9 16.127 19.464 5.664a.9.9 0 0 1 1.272 0" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},98001:(e,t,s)=>{s.d(t,{R:()=>a});var a=(0,s(78414).mT)("Icon20DocumentOutline","document_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="document_outline_20"><path fill-rule="evenodd" d="M10.175 1.5H9c-.806 0-1.465.006-2.01.05-.63.052-1.172.16-1.67.413a4.25 4.25 0 0 0-1.857 1.858c-.253.497-.361 1.04-.413 1.67C3 6.103 3 6.864 3 7.816v4.366c0 .952 0 1.713.05 2.327.052.63.16 1.172.413 1.67a4.25 4.25 0 0 0 1.858 1.857c.497.253 1.04.361 1.67.413.613.05 1.374.05 2.326.05h1.366c.952 0 1.713 0 2.327-.05.63-.052 1.172-.16 1.67-.413a4.25 4.25 0 0 0 1.857-1.857c.253-.498.361-1.04.413-1.67.05-.614.05-1.375.05-2.327V8.325c0-.489 0-.733-.055-.963q-.075-.309-.24-.579c-.123-.201-.296-.374-.642-.72l-3.626-3.626c-.346-.346-.519-.519-.72-.642a2 2 0 0 0-.579-.24c-.23-.055-.474-.055-.963-.055M15.5 12.15c0 .992 0 1.692-.045 2.238-.044.537-.127.86-.255 1.11A2.75 2.75 0 0 1 14 16.7c-.252.128-.574.21-1.111.255-.546.044-1.245.045-2.238.045h-1.3c-.992 0-1.692 0-2.238-.045-.537-.044-.86-.127-1.11-.255A2.75 2.75 0 0 1 4.8 15.5c-.128-.252-.21-.574-.255-1.111-.044-.546-.045-1.245-.045-2.238v-4.3c0-.992 0-1.692.045-2.238.044-.537.127-.86.255-1.11A2.75 2.75 0 0 1 6.002 3.3c.25-.128.573-.21 1.11-.255C7.658 3.001 8.358 3 9.35 3H10v2.35c0 .409 0 .761.024 1.051.026.306.083.61.238.902.21.398.537.724.935.935.291.155.596.212.902.238.29.024.642.024 1.051.024h2.35zM14.879 7 11.5 3.621V5.32c0 .447 0 .736.02.955.017.21.047.288.067.326a.75.75 0 0 0 .312.312c.038.02.116.05.326.068.22.018.508.019.955.019z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)}}]);