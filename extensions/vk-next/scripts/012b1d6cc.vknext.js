"use strict";(globalThis.webpackChunkvknext=globalThis.webpackChunkvknext||[]).push([[2893,6289],{12893:(t,e,a)=>{a.r(e),a.d(e,{default:()=>c});var n=a(80894),o=a(3916),s=a(36008),r=a(96289);const i=2685278;let l=null;const c=new n.API({appId:i,getToken:async()=>await(l||(l=new Promise(async t=>{const e=(await(0,o.P)()).id,a=(await r.default.getTokens(e))?.[i]?.token;if(a)return l=null,t(a);const n=r.default.addListener((a,o)=>{const s=o[e]?.[i]?.token;s&&s!==a?.[e]?.[i]?.token&&(l=null,t(s),n.remove())});await s.default.sendMessage("vkn-b-gvt",{vk_id:e})}),l)),onErrorValidToken:async()=>{await(async()=>{const t=(await Promise.resolve().then(a.bind(a,96289))).default,e=(await(0,o.P)()).id,n=await t.getStorage();return delete n[e]?.[i],await t.saveStorage(n),!0})()},onError:t=>{console.error("[VK ADMIN ERROR]",t)}})},63898:(t,e,a)=>{a.d(e,{A:()=>n});const n=async(t,e)=>await fetch(t,e)},64556:(t,e,a)=>{a.d(e,{A:()=>r});var n=a(99381),o=a(63898);const s=["getMe","getFile","getStickerSet"];const r=class{token;constructor(t){this.token=t;for(const t of s)this[t]=new Proxy(n.A,{get:(e,a)=>e=>this.call(`${t}.${a}`,e),apply:(e,a,n)=>a.call(t,n[0])})}isValidToken(){if(!this.token)return!1;const t=this.token.split(":");return!(2!==t.length||t[0].length<4||35!==t[1].length)}async call(t,e){const a=await(0,o.A)(`https://api.telegram.org/bot${this.token}/${t}`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(e)}),n=await a.json();return n.ok,n}getFileUrl(t){return`https://api.telegram.org/file/bot${this.token}/${t}`}}},80894:(t,e,a)=>{a.d(e,{API:()=>n.n,TelegramAPI:()=>o.A});var n=a(19575),o=a(64556)},96289:(t,e,a)=>{a.r(e),a.d(e,{default:()=>s});var n=a(53778);class o extends n.default{constructor(){super("tokens")}async getTokens(t){const e=await this.getStorage();return 0===t?e[0]||{}:e[t]||{}}async setTokens(t,e){const a=await this.getStorage();a[t]=e,await this.saveStorage(a)}}const s=new o}}]);