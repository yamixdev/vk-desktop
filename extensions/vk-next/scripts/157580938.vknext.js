"use strict";(globalThis.webpackChunkvknext=globalThis.webpackChunkvknext||[]).push([[1142],{8596:(e,t,r)=>{function n(e){return String(e).split("").map(e=>e.charCodeAt(0))}function a(e){return new Uint8Array(n(e))}function s(e){const t=new ArrayBuffer(2*e.length),r=new Uint8Array(t);return new Uint16Array(t).set(n(e)),r}function i(e){const t=255;return[e>>>24&t,e>>>16&t,e>>>8&t,e&t]}function o(e){return 11+e}function c(e,t,r,n){return 11+t+1+1+(n?2+2*(r+1):r+1)+e}function u(e){let t=0;return e.forEach(e=>{t+=2+2*e[0].length+2+2+2*e[1].length+2}),11+t}function l(e,t){const r=2*t;let n=0;return e.forEach(e=>{n+=2+2*e[0].length+2+4}),18+r+2+n}r.d(t,{Q:()=>h});class h{_setIntegerFrame(e,t){const r=parseInt(t,10);this.frames.push({name:e,value:r,size:o(r.toString().length)})}_setStringFrame(e,t){const r=t.toString();let n=13+2*r.length;"TDAT"===e&&(n=o(r.length)),this.frames.push({name:e,value:r,size:n})}_setPictureFrame(e,t,r,n){const a=function(e){if(!e||!e.length)return null;if(255===e[0]&&216===e[1]&&255===e[2])return"image/jpeg";if(137===e[0]&&80===e[1]&&78===e[2]&&71===e[3])return"image/png";if(71===e[0]&&73===e[1]&&70===e[2])return"image/gif";if(87===e[8]&&69===e[9]&&66===e[10]&&80===e[11])return"image/webp";const t=73===e[0]&&73===e[1]&&42===e[2]&&0===e[3],r=77===e[0]&&77===e[1]&&0===e[2]&&42===e[3];return t||r?"image/tiff":66===e[0]&&77===e[1]?"image/bmp":0===e[0]&&0===e[1]&&1===e[2]&&0===e[3]?"image/x-icon":null}(new Uint8Array(t)),s=r.toString();if(!a)throw new Error("Unknown picture MIME type");r||(n=!1),this.frames.push({name:"APIC",value:t,pictureType:e,mimeType:a,useUnicodeEncoding:n,description:s,size:c(t.byteLength,a.length,s.length,n)})}_setLyricsFrame(e,t,r){const n=e.split("").map(e=>e.charCodeAt(0)),a=t.toString(),s=r.toString();var i,o;this.frames.push({name:"USLT",value:s,language:n,description:a,size:(i=a.length,o=s.length,16+2*i+2+2+2*o)})}_setCommentFrame(e,t,r){const n=e.split("").map(e=>e.charCodeAt(0)),a=t.toString(),s=r.toString();var i,o;this.frames.push({name:"COMM",value:s,language:n,description:a,size:(i=a.length,o=s.length,16+2*i+2+2+2*o)})}_setPrivateFrame(e,t){const r=e.toString();var n,a;this.frames.push({name:"PRIV",value:t,id:r,size:(n=r.length,a=t.byteLength,10+n+1+a)})}_setUserStringFrame(e,t){const r=e.toString(),n=t.toString();var a,s;this.frames.push({name:"TXXX",description:r,value:n,size:(a=r.length,s=n.length,13+2*a+2+2+2*s)})}_setUrlLinkFrame(e,t){const r=t.toString();var n;this.frames.push({name:e,value:r,size:(n=r.length,10+n)})}_setPairedTextFrame(e,t){this.frames.push({name:e,value:t,size:u(t)})}_setSynchronisedLyricsFrame(e,t,r,n,a){const s=a.toString(),i=n.split("").map(e=>e.charCodeAt(0));this.frames.push({name:"SYLT",value:t,language:i,description:s,type:e,timestampFormat:r,size:l(t,s.length)})}constructor(e){if(!e||"object"!=typeof e||!("byteLength"in e))throw new Error("First argument should be an instance of ArrayBuffer or Buffer");this.arrayBuffer=e,this.padding=4096,this.frames=[],this.url=""}setFrame(e,t){switch(e){case"TPE1":case"TCOM":case"TCON":{if(!Array.isArray(t))throw new Error(`${e} frame value should be an array of strings`);const r="TCON"===e?";":"/",n=t.join(r);this._setStringFrame(e,n);break}case"TLAN":case"TIT1":case"TIT2":case"TIT3":case"TALB":case"TPE2":case"TPE3":case"TPE4":case"TRCK":case"TPOS":case"TMED":case"TPUB":case"TCOP":case"TKEY":case"TEXT":case"TDAT":case"TCMP":case"TSSE":case"TSRC":this._setStringFrame(e,t);break;case"TBPM":case"TLEN":case"TYER":this._setIntegerFrame(e,t);break;case"USLT":if(t.language=t.language||"eng","object"!=typeof t||!("description"in t)||!("lyrics"in t))throw new Error("USLT frame value should be an object with keys description and lyrics");if(t.language&&!t.language.match(/[a-z]{3}/i))throw new Error("Language must be coded following the ISO 639-2 standards");this._setLyricsFrame(t.language,t.description,t.lyrics);break;case"APIC":if("object"!=typeof t||!("type"in t)||!("data"in t)||!("description"in t))throw new Error("APIC frame value should be an object with keys type, data and description");if(t.type<0||t.type>20)throw new Error("Incorrect APIC frame picture type");this._setPictureFrame(t.type,t.data,t.description,!!t.useUnicodeEncoding);break;case"TXXX":if("object"!=typeof t||!("description"in t)||!("value"in t))throw new Error("TXXX frame value should be an object with keys description and value");this._setUserStringFrame(t.description,t.value);break;case"WCOM":case"WCOP":case"WOAF":case"WOAR":case"WOAS":case"WORS":case"WPAY":case"WPUB":this._setUrlLinkFrame(e,t);break;case"COMM":if(t.language=t.language||"eng","object"!=typeof t||!("description"in t)||!("text"in t))throw new Error("COMM frame value should be an object with keys description and text");if(t.language&&!t.language.match(/[a-z]{3}/i))throw new Error("Language must be coded following the ISO 639-2 standards");this._setCommentFrame(t.language,t.description,t.text);break;case"PRIV":if("object"!=typeof t||!("id"in t)||!("data"in t))throw new Error("PRIV frame value should be an object with keys id and data");this._setPrivateFrame(t.id,t.data);break;case"IPLS":if(!Array.isArray(t)||!Array.isArray(t[0]))throw new Error("IPLS frame value should be an array of pairs");this._setPairedTextFrame(e,t);break;case"SYLT":if("object"!=typeof t||!("type"in t)||!("text"in t)||!("timestampFormat"in t))throw new Error("SYLT frame value should be an object with keys type, text and timestampFormat");if(!Array.isArray(t.text)||!Array.isArray(t.text[0]))throw new Error("SYLT frame text value should be an array of pairs");if(t.type<0||t.type>6)throw new Error("Incorrect SYLT frame content type");if(t.timestampFormat<1||t.timestampFormat>2)throw new Error("Incorrect SYLT frame time stamp format");t.language=t.language||"eng",t.description=t.description||"",this._setSynchronisedLyricsFrame(t.type,t.text,t.timestampFormat,t.language,t.description);break;default:throw new Error(`Unsupported frame ${e}`)}return this}removeTag(){if(this.arrayBuffer.byteLength<10)return;const e=new Uint8Array(this.arrayBuffer),t=e[3],r=((n=[e[6],e[7],e[8],e[9]])[0]<<21)+(n[1]<<14)+(n[2]<<7)+n[3]+10;var n,a;73!==(a=e)[0]||68!==a[1]||51!==a[2]||t<2||t>4||(this.arrayBuffer=new Uint8Array(e.subarray(r)).buffer)}addTag(){this.removeTag();const e=[255,254],t=10+this.frames.reduce((e,t)=>e+t.size,0)+this.padding,r=new ArrayBuffer(this.arrayBuffer.byteLength+t),n=new Uint8Array(r);let o=0,c=[];return c=[73,68,51,3],n.set(c,o),o+=c.length,o++,o++,c=function(e){const t=127;return[e>>>21&t,e>>>14&t,e>>>7&t,e&t]}(t-10),n.set(c,o),o+=c.length,this.frames.forEach(t=>{switch(c=a(t.name),n.set(c,o),o+=c.length,c=i(t.size-10),n.set(c,o),o+=c.length,o+=2,t.name){case"WCOM":case"WCOP":case"WOAF":case"WOAR":case"WOAS":case"WORS":case"WPAY":case"WPUB":c=a(t.value),n.set(c,o),o+=c.length;break;case"TPE1":case"TCOM":case"TCON":case"TLAN":case"TIT1":case"TIT2":case"TIT3":case"TALB":case"TPE2":case"TPE3":case"TPE4":case"TRCK":case"TPOS":case"TKEY":case"TMED":case"TPUB":case"TCOP":case"TEXT":case"TSSE":case"TSRC":c=[1].concat(e),n.set(c,o),o+=c.length,c=s(t.value),n.set(c,o),o+=c.length;break;case"TXXX":case"USLT":case"COMM":c=[1],"USLT"!==t.name&&"COMM"!==t.name||(c=c.concat(t.language)),c=c.concat(e),n.set(c,o),o+=c.length,c=s(t.description),n.set(c,o),o+=c.length,c=[0,0].concat(e),n.set(c,o),o+=c.length,c=s(t.value),n.set(c,o),o+=c.length;break;case"TBPM":case"TLEN":case"TDAT":case"TYER":o++,c=a(t.value),n.set(c,o),o+=c.length;break;case"PRIV":c=a(t.id),n.set(c,o),o+=c.length,o++,n.set(new Uint8Array(t.value),o),o+=t.value.byteLength;break;case"APIC":c=[t.useUnicodeEncoding?1:0],n.set(c,o),o+=c.length,c=a(t.mimeType),n.set(c,o),o+=c.length,c=[0,t.pictureType],n.set(c,o),o+=c.length,t.useUnicodeEncoding?(c=[].concat(e),n.set(c,o),o+=c.length,c=s(t.description),n.set(c,o),o+=c.length,o+=2):(c=a(t.description),n.set(c,o),o+=c.length,o++),n.set(new Uint8Array(t.value),o),o+=t.value.byteLength;break;case"IPLS":c=[1],n.set(c,o),o+=c.length,t.value.forEach(t=>{c=[].concat(e),n.set(c,o),o+=c.length,c=s(t[0].toString()),n.set(c,o),o+=c.length,c=[0,0].concat(e),n.set(c,o),o+=c.length,c=s(t[1].toString()),n.set(c,o),o+=c.length,c=[0,0],n.set(c,o),o+=c.length});break;case"SYLT":c=[1].concat(t.language).concat(t.timestampFormat).concat(t.type),n.set(c,o),o+=c.length,c=[].concat(e),n.set(c,o),o+=c.length,c=s(t.description),n.set(c,o),o+=c.length,o+=2,t.value.forEach(t=>{c=[].concat(e),n.set(c,o),o+=c.length,c=s(t[0].toString()),n.set(c,o),o+=c.length,c=[0,0],n.set(c,o),o+=c.length,c=i(t[1]),n.set(c,o),o+=c.length})}}),o+=this.padding,n.set(new Uint8Array(this.arrayBuffer),o),this.arrayBuffer=r,r}getBlob(){return new Blob([this.arrayBuffer],{type:"audio/mpeg"})}getURL(){return this.url||(this.url=URL.createObjectURL(this.getBlob())),this.url}revokeURL(){URL.revokeObjectURL(this.url)}}},32106:(e,t,r)=>{r.d(t,{_:()=>u});var n=r(92580),a=r(92046);let s,i=null,o=0;const c=async()=>{s||(s=(async()=>{if(await(0,a.c)(6e4),!i)return;const e=await i;e&&(0===o&&await(0,a.c)(1e4),0===o&&(i=null,e.remove()))})(),s.finally(()=>{s=null}))},u=async({onProgress:e,type:t,iframeURL:a="https://vknext.net/ffmpeg",...s})=>{const{promise:u,reject:l,resolve:h}=(0,n.Q)(),f="request-"+Math.random().toString(36).substr(2,9),g=await(e=>{if(i)return i;const{promise:t,resolve:r,reject:a}=(0,n.Q)();i=t;const s=document.querySelector(`iframe[src="${e}"]`);if(s)return r(s),t;const o=document.createElement("iframe");return o.src=e,o.style.setProperty("display","none","important"),o.onload=()=>r(o),o.onerror=a,(document.body||document.documentElement).appendChild(o),t})(a),{Bridge:d}=await r.e(2692).then(r.bind(r,42692)),p=new d(g.contentWindow,{prefix:"vknext-net-bridge"});return o++,p.on("progress",t=>{const r=t;r?.requestId===f&&e?.(r.progress,r.total)}),p.on("error",e=>{const t=e;t?.requestId===f&&(l(t?.error||"unknown error"),p.destroy(),o--,c())}),p.on("response",e=>{const t=e;t?.requestId===f&&(h(t.response),p.destroy(),o--,c())}),p.on("getBlob",e=>{const t=e;if(t?.requestId===f)return fetch(t.url).then(e=>e.blob())}),p.post(t,{...s,requestId:f}),u}},49197:(e,t,r)=>{r.d(t,{L:()=>n});const n=async()=>{try{return(await r.e(4945).then(r.bind(r,64945))).default}catch(e){if(globalThis?.Hls)return globalThis.Hls}throw new Error("hls.js not found")}},52079:(e,t,r)=>{e.exports=r(97273)},68909:(e,t,r)=>{r.d(t,{H:()=>i});var n=r(92580),a=r(49197),s=r(32106);const i=async({url:e,filename:t,onProgress:r,forceHls:i})=>{if(!i)try{return await(0,s._)({url:e,filename:t,type:"convertHlsToMp3",onProgress:r})}catch(e){console.error(e)}const{promise:o,resolve:c,reject:u}=(0,n.Q)(),l=await(0,a.L)(),h=new l,f=new Audio;let g=null;const d=[];let p,m,y=0;const b=e=>{u(e),h.stopLoad(),h.destroy()};return h.on(l.Events.MANIFEST_PARSED,(e,t)=>{const r=t.levels[0]?.details;r&&(m=r.fragments.length)}),h.on(l.Events.BUFFER_CODECS,(e,t)=>{t.audio&&"audio/mp4"!==t.audio.container||(p=t.audio)}),h.on(l.Events.BUFFER_APPENDING,(e,t)=>{g=t.data}),h.on(l.Events.ERROR,(e,t)=>{if(!["bufferFullError","fragLoadError"].includes(t.details))return t.type==l.ErrorTypes.MEDIA_ERROR&&y<2?(++y>1&&h.swapAudioCodec(),void h.recoverMediaError()):void b(e);b(e)}),h.on(l.Events.FRAG_BUFFERED,async(e,t)=>{g&&d.push(p?g.slice(8,g.length):g),f.currentTime=t.frag.start+t.frag.duration;try{r&&r(d.length/m)}catch(e){console.error(e)}if(d.length>=m){h.stopLoad(),h.destroy();const e=d.map(e=>new Uint8Array(e)),t=new Blob(e,{type:"audio/mp3"});c(t)}}),h.loadSource(e),h.attachMedia(f),await o}},72257:(e,t,r)=>{e.exports=r(72518)},72518:(e,t,r)=>{
/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var n=r(96540);var a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},s=n.useState,i=n.useEffect,o=n.useLayoutEffect,c=n.useDebugValue;function u(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!a(e,r)}catch(e){return!0}}var l="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),n=s({inst:{value:r,getSnapshot:t}}),a=n[0].inst,l=n[1];return o(function(){a.value=r,a.getSnapshot=t,u(a)&&l({inst:a})},[e,r,t]),i(function(){return u(a)&&l({inst:a}),e(function(){u(a)&&l({inst:a})})},[e]),c(r),r};t.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:l},81621:(e,t,r)=>{r.d(t,{vt:()=>f});const n=e=>{let t;const r=new Set,n=(e,n)=>{const a="function"==typeof e?e(t):e;if(!Object.is(a,t)){const e=t;t=(null!=n?n:"object"!=typeof a||null===a)?a:Object.assign({},t,a),r.forEach(r=>r(t,e))}},a=()=>t,s={setState:n,getState:a,getInitialState:()=>i,subscribe:e=>(r.add(e),()=>r.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},i=t=e(n,a,s);return s},a=e=>e?n(e):n;var s=r(96540),i=r(52079);const{useDebugValue:o}=s,{useSyncExternalStoreWithSelector:c}=i;let u=!1;const l=e=>e;const h=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t="function"==typeof e?a(e):e,r=(e,r)=>function(e,t=l,r){r&&!u&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),u=!0);const n=c(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return o(n),n}(t,e,r);return Object.assign(r,t),r},f=e=>e?h(e):h},89141:(e,t,r)=>{r.d(t,{audioUnmaskSource:()=>n});const n=e=>{const t={v:e=>e.split("").reverse().join(""),r:(e,t)=>{e=e.split("");for(let n,a=r+r,s=e.length;s--;)~(n=a.indexOf(e[s]))&&(e[s]=a.substr(n-t,1));return e.join("")},s:(e,t)=>{const r=e.length;if(r){let n=function(e,t){const r=e.length,n=[];if(r){let e=r;for(t=Math.abs(t);e--;)t=(r*(e+1)^t+e)%r,n[e]=t}return n}(e,t),a=0;for(e=e.split("");++a<r;)e[a]=e.splice(n[r-1-a],1,e[a])[0];e=e.join("")}return e},i:(e,r)=>t.s(e,r^vk.id),x:(e,t)=>{const r=[];return t=t.charCodeAt(0),each(e.split(""),(e,n)=>{r.push(String.fromCharCode(n.charCodeAt(0)^t))}),r.join("")}},r="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMN0PQRSTUVWXYZO123456789+/=",n=e=>{if(!e||e.length%4==1)return!1;for(var t,n,a=0,s=0,i="";n=e.charAt(s++);)~(n=r.indexOf(n))&&(t=a%4?64*t+n:n,a++%4)&&(i+=String.fromCharCode(255&t>>(-2*a&6)));return i};if((!window.wbopen||!~(window.open+"").indexOf("wbopen"))&&~e.indexOf("audio_api_unavailable")){let r=e.split("?extra=")[1].split("#"),o=""===r[1]?"":n(r[1]);if(r=n(r[0]),"string"!=typeof o||!r)return e;for(var a,s,i=(o=o?o.split(String.fromCharCode(9)):[]).length;i--;){if(a=(s=o[i].split(String.fromCharCode(11))).splice(0,1,r)[0],!t[a])return e;r=t[a].apply(null,s)}if(r&&"http"===r.substr(0,4))return r}return e}},97273:(e,t,r)=>{
/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var n=r(96540),a=r(72257);var s="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=a.useSyncExternalStore,o=n.useRef,c=n.useEffect,u=n.useMemo,l=n.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,r,n,a){var h=o(null);if(null===h.current){var f={hasValue:!1,value:null};h.current=f}else f=h.current;h=u(function(){function e(e){if(!c){if(c=!0,i=e,e=n(e),void 0!==a&&f.hasValue){var t=f.value;if(a(t,e))return o=t}return o=e}if(t=o,s(i,e))return t;var r=n(e);return void 0!==a&&a(t,r)?(i=e,t):(i=e,o=r)}var i,o,c=!1,u=void 0===r?null:r;return[function(){return e(t())},null===u?void 0:function(){return e(u())}]},[t,r,n,a]);var g=i(e,h[0],h[1]);return c(function(){f.hasValue=!0,f.value=g},[g]),l(g),g}}}]);