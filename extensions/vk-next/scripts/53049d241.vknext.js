"use strict";(globalThis.webpackChunkvknext=globalThis.webpackChunkvknext||[]).push([[33],{7139:(e,t,o)=>{o.a(e,async(e,r)=>{try{o.d(t,{A:()=>h});var i=o(74848),s=o(31958),a=o(62135),n=o(68566),l=o(86598),c=e([s,a,n]);[s,a,n]=c.then?(await c)():c;const d=({children:e})=>(0,i.jsx)("div",{className:l.A.Badges__wrapper,children:e});d.Beta=s.A,d.Prime=a.A,d.PrimeDeluxe=n.A;const h=d;r()}catch(e){r(e)}})},7708:(e,t,o)=>{o.d(t,{A:()=>h});var r=o(74848),i=o(11157),s=o(39107),a=o(13742),n=o(68741),l=o(91691);const c="zRIhm_rzeRaOj2Bs",d="m8aAYX3glAEj5Q3G",h=({beforeClassname:e,backPage:t,hideButtonIsFirstPage:o,hideBackButtonInTablet:h,children:_,...u})=>{const p=(0,i.XC)(),w=(0,i.Gz)(),{width:g}=(0,a.A)();let f=o&&p&&(0,l.A)();return h&&(g||800)>768&&(f=!0),(0,r.jsx)(s.aOn,{before:!f&&(0,r.jsx)(s.Hy0,{onClick:async()=>{p?t?await w.replace(t):await w.push(n.JZ.root.main.home):await w.back()},className:(0,s.xWm)(c,e),hideLabelOnIOS:!0}),...u,children:(0,r.jsx)("div",{className:d,children:_})})}},10046:(e,t,o)=>{o.d(t,{A:()=>r});const r={MainGroup:"m2eWiTZd6RDRv0Vx",MainGroup__profile:"ZSXMzYDv1CZBkwto",ProfileCoverGifWarning__subtitle:"d_ka3Ja6bPijDDoq"}},15033:(e,t,o)=>{o.d(t,{l:()=>i});var r=o(96540);const i=()=>{const[e,t]=(0,r.useState)({width:window.innerWidth,height:window.innerHeight,lastWidth:void 0,lastHeight:void 0}),o=()=>{t({lastWidth:e.width,lastHeight:e.height,width:window.innerWidth,height:window.innerHeight})};return(0,r.useEffect)(()=>{o()},[]),(0,r.useEffect)(()=>(window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)),[e]),e}},17615:(e,t,o)=>{o.d(t,{A:()=>r});const r=e=>new Promise(t=>{const o=new FileReader;o.onload=function(e){e.target&&t(e.target.result)},o.readAsArrayBuffer(e)})},20465:(e,t,o)=>{o.d(t,{A:()=>d,f:()=>c});var r=o(74848),i=o(99381),s=o(96540),a=o(74225),n=o.n(a);const l=(0,s.createContext)({isLoading:!0,curCover:null,errorCode:null,forceUpdate:i.A}),c=()=>(0,s.useContext)(l),d=({children:e})=>{const[t,i]=(0,s.useState)(!0),[a,c]=(0,s.useState)(null),[d,h]=(0,s.useState)(null);n()(async e=>{if(!0!==t)return;const r=(await o.e(122).then(o.bind(o,70122))).default,s=await r.call("users.getCurrentGif");e()&&(s.docs&&c(s.docs),s.error_code&&h(s.error_code),i(!1))},[t]);const _={isLoading:t,curCover:a,errorCode:d,forceUpdate:()=>{i(!0),c(null),h(null)}};return(0,r.jsx)(l.Provider,{value:_,children:e})}},23183:(e,t,o)=>{o.d(t,{A:()=>a});var r=o(74848),i=o(39107);const s="BZ0GgWiVDrrUcNs5",a=({size:e="m",children:t,...o})=>(0,r.jsx)("div",{className:s,children:(0,r.jsx)(i.$nd,{size:e,...o,children:t})})},26914:(e,t,o)=>{o.d(t,{A:()=>r});const r=()=>!1},27182:(e,t,o)=>{o.d(t,{W:()=>a});var r=o(74848),i=o(96540),s=o(22185);const a=e=>{const t=i.useId();return(0,r.jsxs)(s.uC,{viewBox:"0 0 20 20",width:20,height:20,vkuiIconId:"crown_circle_fill_vk_next_20",vkuiProps:e,children:[(0,r.jsx)("rect",{width:"20",height:"20",fill:`url(#crown_circle_fill_vk_next_20${t}a)`,rx:"10"}),(0,r.jsx)("path",{fill:"#fff",fillRule:"evenodd",d:"M10.549 7.138a1.14 1.14 0 0 0 .59-.999 1.14 1.14 0 1 0-1.688 1L7.844 9.54a.2.2 0 0 1-.284.051L6.167 8.585a1.1 1.1 0 0 0 .112-.494 1.14 1.14 0 1 0-1.14 1.139l.572 1.772h8.595l.555-1.772a1.14 1.14 0 1 0-1.023-.636l-1.393 1.007a.2.2 0 0 1-.283-.051L10.55 7.138ZM6 12.202h8l-.128.622a1.72 1.72 0 0 1-1.688 1.376H7.817a1.72 1.72 0 0 1-1.687-1.374z",clipRule:"evenodd"}),(0,r.jsx)("defs",{children:(0,r.jsxs)("linearGradient",{id:`crown_circle_fill_vk_next_20${t}a`,x1:"17",x2:"3",y1:"3",y2:"17",gradientUnits:"userSpaceOnUse",children:[(0,r.jsx)("stop",{offset:"0%",style:{stopColor:"#8a13d6",stopOpacity:"1"}}),(0,r.jsx)("stop",{offset:"100%",style:{stopColor:"#7d81ff",stopOpacity:"1"}})]})})]})}},27514:(e,t,o)=>{o.d(t,{A:()=>r});const r=e=>void 0!==e&&!1!==e&&null!==e&&""!==e},31958:(e,t,o)=>{o.a(e,async(e,r)=>{try{o.d(t,{A:()=>c});var i=o(74848),s=o(8015),a=o(39107),n=o(86598),l=e([s]);s=(l.then?(await l)():l)[0];const c=({isSection:e,className:t,...o})=>{const r=(0,s.A)();return(0,i.jsx)(a.m_M,{className:n.A.Badges__tooltip,description:e?r.use("global_badges_beta_section_warning"):r.use("global_badges_beta_function_warning"),appearance:"black",usePortal:document.body,...o,children:(0,i.jsx)("span",{className:(0,a.xWm)(n.A.Badges__beta,t),children:"β"})})};r()}catch(e){r(e)}})},37851:(e,t,o)=>{o.d(t,{b:()=>s});var r=o(74848),i=(o(96540),o(22185));const s=e=>(0,r.jsx)(i.uC,{viewBox:"0 0 24 24",width:20,height:20,vkuiIconId:"external_link_outline_24",vkuiAttrs:{fill:"none"},vkuiProps:e,children:(0,r.jsxs)("g",{fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd",children:[(0,r.jsx)("path",{d:"M5.146 3.634c.762-.407 1.512-.534 3.082-.534H10.1a.9.9 0 1 1 0 1.8H8.228c-1.487 0-1.87.128-2.233.322q-.504.27-.773.773c-.194.362-.322.746-.322 2.233v7.544c0 1.487.128 1.87.322 2.233q.27.504.773.774c.362.193.746.321 2.233.321h7.544c1.487 0 1.87-.128 2.233-.321q.504-.27.774-.774c.193-.362.321-.746.321-2.233V13.9a.9.9 0 1 1 1.8 0v1.872c0 1.57-.127 2.32-.534 3.082a3.65 3.65 0 0 1-1.512 1.512c-.763.407-1.512.534-3.082.534H8.228c-1.57 0-2.32-.127-3.082-.534a3.65 3.65 0 0 1-1.512-1.512c-.407-.762-.534-1.512-.534-3.082V8.228c0-1.57.127-2.32.534-3.082a3.65 3.65 0 0 1 1.512-1.512"}),(0,r.jsx)("path",{d:"M14 4a.9.9 0 0 1 .9-.9H20a.9.9 0 0 1 .9.9v5.1a.9.9 0 1 1-1.8 0V6.173l-6.564 6.563a.9.9 0 1 1-1.272-1.272L17.827 4.9H14.9A.9.9 0 0 1 14 4"})]})})},40411:(e,t,o)=>{o.a(e,async(e,r)=>{try{o.d(t,{A:()=>w});var i=o(74848),s=o(56287),a=o(8015),n=o(90275),l=o(27514),c=o(99381),d=o(37851),h=o(73615),_=o(52509),u=o(39107),p=e([a]);a=(p.then?(await p)():p)[0];const w=({helpLink:e,actions:t})=>{const o=(0,a.A)(),r=(0,s.A)(),p=()=>{window.open(window.location.href),window.close()};return e||(0,l.A)(t)?(0,i.jsx)(n.Ku,{placement:"bottom-end",actions:(0,i.jsxs)(i.Fragment,{children:[(0,l.A)(t)&&(0,i.jsxs)(i.Fragment,{children:[t,(r||e)&&(0,i.jsx)(n.AS,{})]}),r&&(0,i.jsx)(n.vH,{onClick:p,leftIcon:(0,i.jsx)(d.b,{width:20,height:20}),children:o.use("settings_open_settings")}),e&&(0,i.jsx)(n.vH,{href:e,target:"_blank",leftIcon:(0,i.jsx)(h.V,{}),children:o.use("settings_menu_help_section")})]}),children:(0,i.jsx)(u.qAe,{onClick:c.A,children:(0,i.jsx)(_.z,{})})}):r?(0,i.jsx)(u.m_M,{description:o.use("settings_open_settings"),placement:"bottom",usePortal:!0,children:(0,i.jsx)(u.qAe,{onClick:p,children:(0,i.jsx)(d.b,{})})}):null};r()}catch(e){r(e)}})},52319:(e,t,o)=>{o.d(t,{_:()=>r});var r=(0,o(78414).mT)("Icon28ErrorCircleOutline","error_circle_outline_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 28 28" id="error_circle_outline_28"><path fill="currentColor" d="M14 2c6.627 0 12 5.373 12 12s-5.373 12-12 12S2 20.627 2 14 7.373 2 14 2m0 2C8.477 4 4 8.477 4 14s4.477 10 10 10 10-4.477 10-10S19.523 4 14 4m0 13.6a1.4 1.4 0 1 1 0 2.8 1.4 1.4 0 0 1 0-2.8m.074-9.6c.237 0 .386.037.517.107q.196.106.302.302c.07.13.107.28.107.517v6.148c0 .237-.037.386-.107.517a.73.73 0 0 1-.302.302c-.13.07-.28.107-.517.107h-.148c-.237 0-.386-.037-.517-.107a.73.73 0 0 1-.302-.302c-.07-.13-.107-.28-.107-.517V8.926c0-.237.037-.386.107-.517a.73.73 0 0 1 .302-.302c.13-.07.28-.107.517-.107z" /></symbol>',28,28,!1,void 0)},52509:(e,t,o)=>{o.d(t,{z:()=>r});var r=(0,o(78414).mT)("Icon24MoreHorizontal","more_horizontal_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="more_horizontal_24"><path d="M18 10c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2m-6 4c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m-6 0c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2" /></symbol>',24,24,!1,void 0)},56287:(e,t,o)=>{o.d(t,{A:()=>s});var r=o(91691),i=o(15033);const s=()=>{const e=(0,i.l)();return((e.width||0)<=800||(e.height||0)<=600)&&!(0,r.A)()}},62135:(e,t,o)=>{o.a(e,async(e,r)=>{try{o.d(t,{A:()=>d});var i=o(74848),s=o(8015),a=o(69075),n=o(39107),l=o(86598),c=e([s]);s=(c.then?(await c)():c)[0];const d=({isSection:e,className:t,...o})=>{const r=(0,s.A)();return(0,i.jsx)(n.m_M,{className:l.A.Badges__tooltip,description:e?r.use("global_badges_prime_section_warning"):r.use("global_badges_prime_function_warning"),appearance:"black",usePortal:document.body,...o,children:(0,i.jsx)("span",{className:(0,n.xWm)(l.A.vknPrime,t),children:(0,i.jsx)(a.B,{height:16,width:16})})})};r()}catch(e){r(e)}})},68566:(e,t,o)=>{o.a(e,async(e,r)=>{try{o.d(t,{A:()=>d});var i=o(74848),s=o(8015),a=o(27182),n=o(39107),l=o(86598),c=e([s]);s=(c.then?(await c)():c)[0];const d=({isSection:e,className:t,...o})=>{const r=(0,s.A)();return(0,i.jsx)(n.m_M,{className:l.A.Badges__tooltip,description:e?r.use("global_badges_deluxe_section_warning"):r.use("global_badges_deluxe_function_warning"),appearance:"black",usePortal:document.body,...o,children:(0,i.jsx)("span",{className:(0,n.xWm)(l.A.vknPrime,t),children:(0,i.jsx)(a.W,{height:16,width:16})})})};r()}catch(e){r(e)}})},69075:(e,t,o)=>{o.d(t,{B:()=>r});var r=(0,o(78414).mT)("Icon20FavoriteCircleFillYellow","favorite_circle_fill_yellow_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="favorite_circle_fill_yellow_20"><linearGradient id="favorite_circle_fill_yellow_20_a" x1="-10" x2="10" y1="10" y2="30" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#ffb73d" /><stop offset="1" stop-color="#ffa000" /></linearGradient><path fill="url(#favorite_circle_fill_yellow_20_a)" d="M0 10C0 4.477 4.477 0 10 0s10 4.477 10 10-4.477 10-10 10S0 15.523 0 10" /><path fill="#fff" d="m11.805 7.566 2.39.235c.831.081 1.086.912.444 1.458l-1.87 1.591.694 2.592c.228.851-.48 1.366-1.189.854l-2.273-1.643-2.273 1.643c-.706.51-1.417-.003-1.188-.854l.694-2.592-1.87-1.59c-.646-.549-.392-1.377.443-1.46l2.39-.234 1.052-2.483c.33-.778 1.174-.777 1.504 0z" /></symbol>',20,20,!1,void 0)},70063:(e,t,o)=>{o.a(e,async(e,r)=>{try{o.r(t),o.d(t,{default:()=>G});var i=o(74848),s=o(11157),a=o(39107),n=o(96540),l=o(74225),c=o.n(l),d=o(82295),h=o(7139),_=o(7708),u=o(40411),p=o(79369),w=o(58006),g=o(85252),f=o(8015),m=o(68741),v=o(57087),x=o(26914),b=o(6311),j=o(27250),A=o(23183),y=o(5467),k=o(84178),C=o(92046),P=o(17615),B=o(89827),M=o(20465),S=o(10046),H=e([h,u,p,f]);[h,u,p,f]=H.then?(await H)():H;const W=221719968,N=({cover:e})=>{const{viewer:t}=(0,v.ur)(),o=(0,w.A)();return(0,i.jsx)(b.A,{cover_url:e||void 0,photo_avg_color:t?.photo_avg_color,style:{maxHeight:o}})},z=()=>{const e=(0,f.A)(),{viewer:t}=(0,v.ur)(),{isLoading:r,errorCode:l,curCover:h,forceUpdate:_}=(0,M.f)(),u=(0,s.Gz)(),{showSnackbar:w,hideSnackbar:b}=(0,v.Qs)(),H=(0,n.useRef)(null),[z,G]=(0,n.useState)(null),[I]=(0,g.A)();c()(async e=>{if(r||l)return;if(!e())return;if(!h)return void G("");const{vkapiWrapper:t}=await Promise.resolve().then(o.bind(o,52370)),i=await t.docs.getById({docs:h}),s=i[0]?.url;e()&&G(s||"")},[h,r,l]);const T=async(e,t=!0)=>{const{vkapiWrapper:r}=await Promise.resolve().then(o.bind(o,52370));if(t)try{await r.groups.join({group_id:W})}catch(e){console.error(e)}if(L){const[e,t]=(z||"").split("_");await r.docs.delete({doc_id:Number(t),owner_id:Number(e)})}const{upload_url:s}=await r.docs.getUploadServer(t?{group_id:W}:{}),n=new FormData;n.append("file",new File([e],"vknext_cover.gif",{type:"image/gif"}));const l=await fetch(s,{method:"POST",body:n}).then(e=>e.json()),c=await r.docs.save(l);if(t){try{await r.groups.leave({group_id:W})}catch(e){console.error(e)}if(c.error)return T(e,!1)}else{if(c.error)throw w((0,i.jsx)(a.qb_,{onClose:b,children:c.error.error_msg})),new Error(c.error.error_msg);const e=await fetch(`https://${d.A}/docs.php?act=edit_box`,{headers:{"content-type":"application/x-www-form-urlencoded","x-requested-with":"XMLHttpRequest"},body:new URLSearchParams({act:"edit_box",al:"1",did:c.doc.id,oid:c.doc.owner_id}),method:"POST",credentials:"include"}).then(B.A).then(e=>e.json()),t=e.payload[1][2].split("a_edit_doc")[1].match(/hash: *'([^']+)/)?.[1];await fetch(`https://${d.A}/docs.php?act=a_edit_doc`,{headers:{"content-type":"application/x-www-form-urlencoded","x-requested-with":"XMLHttpRequest"},body:new URLSearchParams({act:"a_edit_doc",al:"1",did:c.doc.id,hash:t,oid:c.doc.owner_id,tags:"",title:c.doc.title,type:"4"}),method:"POST",credentials:"include"})}return[c.doc.owner_id,c.doc.id].join("_")},L=(z?.length||0)>0;return(0,i.jsxs)(a.guY,{className:S.A.MainGroup,children:[(0,i.jsxs)(j.A,{noPadding:!0,mode:"group",className:S.A.MainGroup__profile,children:[(0,i.jsx)(N,{cover:z||void 0}),t?(0,i.jsx)(y.A,{user:t,headerButtons:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(A.A,{mode:"primary",onClick:()=>{(0,x.A)()&&w((0,i.jsx)(p.A,{})),I?H.current?.click():u.push(m.JZ.root.main.prime)},children:[L?e.use("global_update"):e.use("global_install"),(0,i.jsx)(a.s6o,{children:(0,i.jsx)("input",{type:"file",accept:"image/gif",ref:H,onChange:async({target:t})=>{if(t.files){u.showPopout((0,i.jsx)(a.WHT,{}));try{const r=await(0,P.A)(t.files[0]),s=await T(r),n=(await o.e(122).then(o.bind(o,70122))).default,l=await n.call("users.setGif",{cover_gif:s});if(l.error){u.showPopout((0,i.jsx)(a.WHT,{state:"error"}));const t=()=>10===l.error.error_code?e.use("global_badges_prime_function_warning"):l.error.error_msg;w((0,i.jsx)(a.qb_,{onClose:b,children:t()}))}else _(),u.showPopout((0,i.jsx)(a.WHT,{state:"done"}))}catch(e){console.error(e),u.showPopout((0,i.jsx)(a.WHT,{state:"error"}))}await(0,C.c)(1e3),u.hidePopout()}}})})]}),(0,i.jsx)(A.A,{disabled:!L,mode:"secondary",onClick:async()=>{const e=(await o.e(122).then(o.bind(o,70122))).default;if(await e.call("users.setGif",{cover_gif:""}),L&&h){const{vkapiWrapper:e}=await Promise.resolve().then(o.bind(o,52370)),[t,r]=h.split("_");await e.docs.delete({doc_id:Number(r),owner_id:Number(t)})}_()},children:e.use("global_remove")})]})}):(0,i.jsx)(k.A,{}),(0,i.jsx)(a.KzX,{size:4})]}),(0,i.jsx)(j.A,{mode:"group",children:(0,i.jsxs)(a.iau,{children:[(0,i.jsx)(a.$ji,{weight:"2",children:e.use("settings_please_note")}),(0,i.jsx)(a.LEX,{className:S.A.ProfileCoverGifWarning__subtitle,children:e.use("settings_profile_cover_gif_warning")})]})})]})},G=()=>{const e=(0,f.A)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(_.A,{backPage:m.JZ.root.main_0_0.users,after:(0,i.jsx)(u.A,{}),children:[e.use("settings_menu_profile_cover_gif_title"),(0,i.jsx)(h.A.Prime,{})]}),(0,i.jsx)(M.A,{children:(0,i.jsx)(z,{})})]})};r()}catch(e){r(e)}})},73615:(e,t,o)=>{o.d(t,{V:()=>r});var r=(0,o(78414).mT)("Icon20HelpOutline","help_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="help_outline_20"><g fill="currentColor"><path d="M10 6.25a1.25 1.25 0 0 0-1.21.937.75.75 0 0 1-1.453-.374 2.75 2.75 0 0 1 5.413.687c0 1.211-.654 1.84-1.144 2.298l-.009.008c-.478.446-.772.72-.855 1.3a.75.75 0 0 1-1.484-.212c.158-1.11.803-1.709 1.256-2.13l.068-.062c.447-.417.668-.663.668-1.202 0-.69-.56-1.25-1.25-1.25M10 15a1 1 0 1 0 0-2 1 1 0 0 0 0 2" /><path fill-rule="evenodd" d="M10 1.5a8.5 8.5 0 1 0 0 17 8.5 8.5 0 0 0 0-17M3 10a7 7 0 1 0 14 0 7 7 0 0 0-14 0" clip-rule="evenodd" /></g></symbol>',20,20,!1,void 0)},79369:(e,t,o)=>{o.a(e,async(e,r)=>{try{o.d(t,{A:()=>h});var i=o(74848),s=o(61699),a=o(8015),n=o(57087),l=o(52319),c=o(39107),d=e([a]);a=(d.then?(await d)():d)[0];const h=()=>{const e=(0,a.A)(),{hideSnackbar:t}=(0,n.Qs)(),{createTab:o}=(0,s.A)();return(0,i.jsx)(c.qb_,{onClose:t,duration:7e3,before:(0,i.jsx)(l._,{fill:"var(--vkui--color_icon_negative)"}),action:e.use("global_open"),onActionClick:()=>{o({url:window.location.href,active:!0}),window.close()},children:e.use("settings_file_input_is_not_supported")})};r()}catch(e){r(e)}})},86598:(e,t,o)=>{o.d(t,{A:()=>r});const r={vknPrime:"JVvmIPoC7I10XheA",Badges__beta:"ZPQT4b9d5yikcHQ_",Badges__tooltip:"llvJGi7mMeD_9Eod",Badges__wrapper:"gGl8DJ2tHp5UMWYV"}},89827:(e,t,o)=>{o.d(t,{A:()=>r});const r=async e=>new Response(new TextDecoder("windows-1251").decode(await e.arrayBuffer()))}}]);