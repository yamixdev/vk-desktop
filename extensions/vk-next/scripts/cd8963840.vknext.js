"use strict";(globalThis.webpackChunkvknext=globalThis.webpackChunkvknext||[]).push([[9765],{2120:(e,t,o)=>{o.d(t,{A:()=>s});var r=o(53644);const n="wGnjLCZ_kHG1SsM_",i="u4jlO0w2ygIFdPcp",l="h3nvK3QpPJNPuRux",s=({leftIcon:e,onClick:t,text:o})=>{const s=document.createElement("button");if(s.className=n,e){const t=document.createElement("div");t.className=i,t.appendChild((0,r.A)(e)),s.appendChild(t)}if(o){const e=document.createElement("div");e.className=l,e.innerText=o,s.appendChild(e)}return t&&s.addEventListener("click",t),s}},35584:(e,t,o)=>{o.d(t,{A:()=>r});const r=(e,t,o=null)=>{if(!Array.isArray(e)||0===e.length)return null;const r=[...e].sort((e,t)=>e.width<t.width?-1:e.width>t.width?1:e.height<t.height?-1:e.height>t.height?1:0),n=r.filter(e=>e.width>=t);if(0===n.length)return r[r.length-1];if(!o)return n[0];for(let e=0;e<n.length;e++){const t=n[e];if(t.height>=o)return t}const i=n.sort((e,t)=>t.height-e.height);return i[i.length-1]}},37746:(e,t,o)=>{o.d(t,{A:()=>i});const r=e=>{try{e.dispatchEvent(new MouseEvent("click"))}catch(t){const o=document.createEvent("MouseEvents");o.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(o)}},n=async(e,t="download")=>{const o=document.createElement("a");o.download=t,o.rel="noopener",(globalThis?.chrome?.runtime?.id||globalThis?.browser?.runtime?.id)&&(o.target="_blank"),"string"==typeof e?(o.href=e,o.origin!==location.origin?await(async e=>{try{const t=await globalThis.fetch(e,{method:"HEAD"});return t.status>=200&&t.status<=299}catch(e){console.error(e)}return!1})(o.href)?await(async(e,t)=>{try{const o=await globalThis.fetch(e,{method:"GET"}),r=await o.blob();await n(r,t)}catch(e){console.error(e)}})(e,t):(o.target="_blank",r(o)):r(o)):(o.href=URL.createObjectURL(e),setTimeout(()=>{URL.revokeObjectURL(o.href)},4e4),setTimeout(()=>{r(o)},0))},i=n},38444:(e,t,o)=>{o.d(t,{A:()=>b});var r=o(22440),n=o(7417),i=o(22707),l=o(37400),s=o(38729),c=o(91570),a=o(2006);const d=(0,r.A)(),u=(0,s.NS)(),h=(0,s.NS)(),f=[],m=async(e,t)=>{if(!(e[`_${t}`]>1)){e[`_${t}`]=(e[`_${t}`]||0)+1;for(const o of f){const r=o[t];r&&(await(0,l.G)(),r(e))}}},p=(e,t)=>{t[u]||(t[u]=new MutationObserver(async o=>{for(const r of o)if("attributes"===r.type&&"style"===r.attributeName&&(await(0,l.G)(),"none"===t.style.display)){const t=e.querySelector(".Profile");t&&m(t,"onProfileLoadComplited")}}),t[u].observe(t,{attributes:!0}),a.A.add(t))},v=e=>{const t=e.querySelector(".Profile");return!!t&&(m(t,"onProfileLoadComplited"),!0)},g=()=>{for(const e of document.querySelectorAll(".ProfileWrapper,.ProfileWrapper__root")){m(e,"onProfileLoad");const t=e.querySelector("#profile_skeleton");let o=e.querySelector(".ProfileWrapper__root,#react_rootprofile")||e;o?v(o)||o&&!o[h]&&(o[h]=new MutationObserver((e,t)=>{v(o)&&t.disconnect()}),o[h].observe(o,{childList:!0,subtree:!0}),a.A.add(o)):t?p(e,t):m(e,"onErrorFindSkeleton")}};let w=!1;const b=async e=>{if(f.push(e),(0,n.n)(g),w)return;w=!0;(await(0,c.R)()).subscribeOnModuleEvaluated(async()=>{await(0,i.t)(),d.cur?.module&&"profile"!==d.cur?.module||requestIdleCallback(g)})}},53644:(e,t,o)=>{o.d(t,{A:()=>n});let r=0;const n=e=>{const t=!!document.importNode;let o=(new DOMParser).parseFromString(e,"image/svg+xml").documentElement;t&&(o=document.importNode(o,!0));for(const e of o.querySelectorAll("title,desc"))e.remove();for(const e of o.querySelectorAll("[id]")){if(!e.id)continue;const t="vknext_icon-"+r++;let n=!1;for(const r of o.querySelectorAll(`[fill="url(#${e.id})"]`))r.setAttribute("fill",`url(#${t})`),n=!0;n&&(e.id=t)}return o}},69765:(e,t,o)=>{o.r(t);var r=o(37746),n=o(94229),i=o(35584),l=o(90603),s=o(2120),c=o(38444),a=o(93819);const d=()=>{const{state:e}=(0,l.A)();if(!e)return;if(!e.owner.cover?.images)throw new Error("Обложка не установлена");const t=(0,i.A)(e.owner.cover?.images,9999999)||e.owner.cover?.images[0];(0,r.A)(t.url,`cover${e.owner?.id||""}.jpg`)};(0,c.A)({onProfileLoadComplited:async e=>{const t=e.querySelector(".OwnerPageCover__in");if(!t||!t.style.backgroundImage||t.vkn_down_inj)return;t.vkn_down_inj=!0;const o=await a.A;t.appendChild((0,s.A)({leftIcon:n.A,text:o.use("global_download"),onClick:d}))}})},90603:(e,t,o)=>{o.d(t,{A:()=>n});var r=o(95728);const n=()=>{const e=document.getElementById("profile_redesigned");if(!e)return{state:void 0,profileRedesigned:void 0,store:void 0};const t=document.getElementById("react_rootprofile"),{container:o,fiber:n}=(0,r.A)(t);let{env:i,store:l}=o?.memoizedState?.element?.props||n?.memoizedProps?.children?.[0]?.props?.children?.props||{};if(!l){const{fiber:t}=(0,r.A)(e);l=t?.return?.return?.memoizedProps?.value?.store||t?.return?.return?.return?.return?.return?.memoizedProps?.value}const s=l?.getState?.();return s||console.warn("profile state not found"),{state:s||void 0,profileRedesigned:e,store:l,env:i}}},94229:(e,t,o)=>{o.d(t,{A:()=>r});const r='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M12.002 2a.9.9 0 0 1 .9.9v11.002l4.562-4.631a.9.9 0 1 1 1.283 1.263l-6.104 6.195a.9.9 0 0 1-1.284-.001l-6.09-6.206a.9.9 0 1 1 1.286-1.26l4.547 4.633V2.9a.9.9 0 0 1 .9-.9Zm-8 18.1a.9.9 0 0 1 .9-.9h14.2a.9.9 0 1 1 0 1.8h-14.2a.9.9 0 0 1-.9-.9Z" clip-rule="evenodd"/></svg>\n'}}]);